(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){},126:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(20),r=a.n(i),s=a(2),d=a(3),l=a(6),p=a(4),u=a(5),c=a(37),h=a.n(c),y=(a(74),a(75),a(76),a(77),a(129)),E=a(130),f=a(131),m=a(1),v=a(14),g=a(12).connect,N=function(e){var t=e.line,a=e.current,n=e.index,i=a?v.LINE_FOCUS:v.LINE_STD;return o.a.createElement("div",{style:Object(m.a)({},i,{paddingRight:"10px"})},o.a.createElement("div",{className:"codeline"},(n<10?"\xa0":"")+n,".",o.a.createElement("span",{style:{paddingLeft:(15*t.ind).toString()+"px"}},t.text)))},_=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){if(this.props.code&&this.props.show){var e=this.props,t=e.code,a=e.lines,n=[];if(t)for(var i=0;i<t.length;i++)n.push(o.a.createElement(N,{index:i+1,line:t[i],current:a&&a.includes(i)}));return o.a.createElement("div",{className:"codeblock"},n)}return o.a.createElement(o.a.Fragment,null)}}]),t}(o.a.Component),S=g(function(e){return{code:e.pseudo,lines:e.lines,show:e.showPseudo}})(_),I=a(12).connect,O=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement(y.a,{style:{height:"100%",backgroundColor:"#ccc"}},o.a.createElement(E.a,{style:{height:"40%"}},o.a.createElement(f.a,null,o.a.createElement("div",{className:"algorithm-description"},o.a.createElement("div",{className:"header"},o.a.createElement("h4",null,null!=this.props.algorithm?this.props.algorithm:"Nombre del algoritmo")),o.a.createElement("div",{className:"content"},"Descripcion del algoritmo")))),o.a.createElement(E.a,{style:{height:"50%"}},o.a.createElement(f.a,null,o.a.createElement("div",{className:"algorithm-description"},o.a.createElement("div",{className:"header"},o.a.createElement("h4",null,"Pseudocodigo")),o.a.createElement("div",{className:"content"},o.a.createElement(S,null))))))}}]),t}(o.a.Component),A=(I(function(e){return{algorithm:e.algorithm}})(O),{INITIAL:"INITIAL",SELECT_BFS:"SELECT_BFS",SELECT_DFS:"SELECT_DFS",SELECT_DIJKSTRA:"SELECT_DIJKSTRA",SELECT_KRUSKAL:"SELECT_KRUSKAL",SELECT_PRIM:"SELECT_PRIM",SELECT_HEAP:"SELECT_HEAP",SELECT_AVL:"SELECT_AVL",SELECT_BUBBLESORT:"SELECT_BUBBLESORT",SELECT_MERGESORT:"SELECT_MERGESORT",SELECT_BINARY_SEARCH:"SELECT_BINARY_SEARCH",SELECT_LINKED_LIST:"SELECT_LINKED_LIST",SELECT_SINGLE_LINKED_LIST:"SELECT_SINGLE_LINKED_LIST",SELECT_DOUBLE_LINKED_LIST:"SELECT_DOUBLE_LINKED_LIST",SELECT_QUEUE:"SELECT_QUEUE",SELECT_STACK:"SELECT_STACK",SELECTION:"SELECTION",NO_SELECTION:"NO_SELECTION",ANIMATION_START:"ANIMATION_START",ANIMATION_PAUSE:"ANIMATION_PAUSE",ANIMATION_CONTINUE:"ANIMATION_CONTINUE",ANIMATION_END:"ANIMATION_END",CLEAR_GRAPH:"CLEAR_GRAPH",CHANGE_PSEUDO:"CHANGE_PSEUDO",TOGGLE_PSEUDO:"TOGGLE_PSEUDO",SHOW_PSEUDO:"SHOW_PSEUDO",CLOSE_PSEUDO:"CLOSE_PSEUDO",INC_SPEED:"INC_SPEED",DEC_SPEED:"DEC_SPEED",CHANGE_SPEED:"CHANGE_SPEED",CHANGE_OPTIONS:"CHANGE_OPTIONS",CHANGE_LINE:"CHANGE_LINE",LOAD_GRAPH:"LOAD_GRAPH",FINISHED_LOAD:"FINISHED_LOAD",INC_GIF_LENGTH:"INC_GIF_LENGTH",RESET_GIF_LENGTH:"RESET_GIF_LENGTH",NO_NODE_SELECTED_ERROR:"NO_NODE_SELECTED_ERROR",NO_EDGE_SELECTED_ERROR:"NO_EDGE_SELECTED_ERROR",NO_ELEMENT_SELECTED_ERROR:"NO_ELEMENT_SELECTED_ERROR",INVALID_INTEGER_ERROR:"INVALID_INTEGER_ERROR",INVALID_ARRAY_ERROR:"INVALID_ARRAY_ERROR",INVALID_GRAPH_ERROR:"INVALID_GRAPH_ERROR",INVALID_HEAP_ERROR:"INVALID_HEAP_ERROR",INVALID_AVL_ERROR:"INVALID_AVL_ERROR",ANIMATION_RUNNING_ERROR:"ANIMATION_RUNNING_ERROR",EMPTY_LIST_WARNING:"EMPTY_LIST_WARNING",EMPTY_QUEUE_WARNING:"EMPTY_QUEUE_WARNING",EMPTY_STACK_WARNING:"EMPTY_STACK_WARNING",EMPTY_HEAP_WARNING:"EMPTY_HEAP_WARNING",DIJKSTRA_NEGATIVE_WEIGHT_WARNING:"DIJKSTRA_NEGATIVE_WEIGHT_WARNING",AVL_NOT_FOUND_INFO:"AVL_NOT_FOUND_INFO",AVL_ELEMENT_ALREADY_INFO:"AVL_ELEMENT_ALREADY_INFO",STARTING_BFS_INFO:"STARTING_BFS_INFO",STARTING_DFS_INFO:"STARTING_DFS_INFO",STARTING_DIJKSTRA_INFO:"STARTING_DIJKSTRA_INFO",STARTING_KRUSKAL_INFO:"STARTING_KRUSKAL_INFO",STARTING_PRIM_INFO:"STARTING_PRIM_INFO",STARTING_BUBBLESORT_INFO:"STARTING_BUBBLESORT_INFO",STARTING_MERGESORT_INFO:"STARTING_MERGESORT_INFO",STARTING_BINARYSEARCH_INFO:"STARTING_BINARYSEARCH_INFO",STARTING_GIF_RECORDING_INFO:"STARTING_GIF_RECORDING_INFO",FINISHED_GIF_RECORDING_INFO:"FINISHED_GIF_RECORDING_INFO",STARTING_BINARY_SEARCH_INFO:"STARTING_BINARY_SEARCH_INFO",BINARY_SEARCH_NOT_FOUND_INFO:"BINARY_SEARCH_NOT_FOUND_INFO",FINISHED_GIF_SUCCESS:"FINISHED_GIF_SUCCESS",LOAD_GRAPH_SUCCESS:"LOAD_GRAPH_SUCCESS",PHOTO_SUCCESS:"PHOTO_SUCCESS",FINISHED_ALGORITHM_SUCCESS:"FINISHED_ALGORITHM_SUCCESS",AVL_FOUND_SUCCESS:"AVL_FOUND_SUCCESS",ARRAY_SORTED_SUCCESS:"ARRAY_SORTED_SUCCESS",BINARY_SEARCH_FOUND_SUCCESS:"BINARY_SEARCH_FOUND_SUCCESS"});var b=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),i=0;i<t.length;i++)o[i]=t.charCodeAt(i);var r=new DataView(n);return new Blob([r],{type:a})},R=a(82),T=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){};Object(s.a)(this,e),this._gifBuffer=[],this._takingGif=!1,this._interval=0,this._dispatch=null,this.downloadGif=function(e,a,n){var o=t._dispatch;R.createGIF({images:e,gifWidth:a,gifHeight:n,frameDuration:1},function(e){if(e.error)o({type:A.FINISHED_GIF_SUCCESS}),console.log(e.error);else{var t=b(e.image),a=document.createElement("a");a.setAttribute("href",window.URL.createObjectURL(t)),a.setAttribute("download","test.gif"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),o({type:A.FINISHED_GIF_SUCCESS})}})},this._dispatch=a}return Object(d.a)(e,[{key:"takePicture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.jpg();if(a){var o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download","test.jpg"),o.setAttribute("target","_blank"),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}else t._gifBuffer.length<300?(t._gifBuffer.push(n),t._dispatch({type:A.INC_GIF_LENGTH})):t.takeGif(e)}},{key:"cancelGif",value:function(){this._takingGif=!1,this._dispatch({type:A.RESET_GIF_LENGTH}),clearInterval(this._interval)}},{key:"takeGif",value:function(e){this._takingGif?(clearInterval(this._interval),this._dispatch({type:A.FINISHED_GIF_RECORDING_INFO}),this._dispatch({type:A.RESET_GIF_LENGTH}),this.downloadGif(this._gifBuffer,e.width(),e.height()),this._takingGif=!1,this._gifBuffer=[]):(this._takingGif=!0,this._dispatch({type:A.STARTING_GIF_RECORDING_INFO}),this._interval=setInterval(this.takePicture,300,e,this,!1))}},{key:"takeJson",value:function(e){var t=JSON.stringify(e),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","graph.json"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"readJson",value:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","myFile"),e.setAttribute("style","position: absolute"),document.body.appendChild(e),e.click(),console.log(e.value)}}]),e}(),L=a(10),x=a.n(L),k=a(132),C=a(12).connect,w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).uploadGraph=function(){var e=document.getElementById("graphUploadInput");if(e.files){var t=e.files[0],n=new FileReader;n.onload=function(){var e=n.result;a.props.dispatch({type:A.LOAD_GRAPH,payload:{data:e}})},n.readAsText(t),a.props.handleClose()}},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,{show:a,onHide:n},o.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},o.a.createElement(x.a.Title,null,"Seleccione un archivo")),o.a.createElement(x.a.Body,null,o.a.createElement("p",null,"El archivo debe contener un grafo valido, previamente descargado "),o.a.createElement("input",{type:"file",id:"graphUploadInput"})),o.a.createElement(x.a.Footer,null,o.a.createElement(k.a,{variant:"secondary",onClick:n},"Cancelar"),o.a.createElement(k.a,{variant:"primary",onClick:function(){return e.uploadGraph()}},"Subir grafo"))))}}]),t}(o.a.Component),D=C()(w),G=a(12).connect,P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.handleAccept=function(){if(a.input&&a.validateNumber(a.input.value)){var e=a.input.value,t=parseInt(e);a.props.callback(t),a.props.handleClose()}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.currentValue&&a.setState({text:a.props.currentValue.toString()}),a.props.handleClose()},a.input=null,a.state={text:a.props.currentValue.toString()},a.setStepInputRef=function(e){a.input=e},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.currentValue;null!=t&&t!=e.currentValue&&this.setState({text:this.props.currentValue.toString()})}},{key:"validateNumber",value:function(e){return!(!e||!/^([-]?([0-9]{1,3}))$/.test(e))||(this.props.dispatch({type:A.INVALID_INTEGER_ERROR}),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return o.a.createElement(x.a,{show:a,onHide:n},o.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},o.a.createElement(x.a.Title,null,"Introduzca un numero entero")),o.a.createElement(x.a.Body,null,o.a.createElement("p",null,"El numero debe estar entre -999 y 999"),o.a.createElement("input",{id:"IntInput",type:"number",min:-999,max:999,ref:this.setStepInputRef,value:this.state.text,onChange:function(t){return e.handleChange(t)}})),o.a.createElement(x.a.Footer,null,o.a.createElement(k.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),o.a.createElement(k.a,{variant:"primary",onClick:this.handleAccept},"Aceptar")))}}]),t}(o.a.Component),M=G(function(e){return{currentValue:e.selection?e.selection.weight:0}})(P),B=a(14),U=a(18),j=(a(12).connect,function(e){var t=[];return e.nodes().forEach(function(e){t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),style:e.data("style"),position:e.data("position")},position:e.data("position")})}),e.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),JSON.parse(JSON.stringify(t))}),F=function(e,t){for(var a=U({elements:JSON.parse(JSON.stringify(e)),headless:!0}),n=[],o=[],i=function(e){var i=t[e],r=i.eles,s=i.distance,d=i.style,l=i.duration,p=i.inst,u=i.lines,c=i.data;null==l&&(l=1e3),null==u&&(u=[]),n.push({elements:j(a),lines:o,duration:l}),o=u,r&&r.forEach(function(e,t){var n=a.getElementById(e).data("style");d&&a.getElementById(e).data("style",Object(m.a)({},n,d[t])),c&&a.getElementById(e).data("value",c[t].value),void 0!==s&&(a.getElementById(e+"-popper").data("style",B.NODE_POPPER),a.getElementById(e+"-popper").data("value",s[t]))}),p&&p.forEach(function(e){if("update_level"===e.name){var t=e.data;if(t){var n=t.id,o=t.value;null!=n&&null!=o&&(a.getElementById(n+"-popper").data("style",B.NODE_POPPER),a.getElementById(n+"-popper").data("value",o))}}})},r=0;r<t.length;r++)i(r);return n.push({elements:j(a),lines:o,duration:0}),n},H={BFS:"BFS",DFS:"DFS",Dijkstra:"Dijkstra",Kruskal:"Kruskal",Prim:"Prim",MinHeap:"MinHeap",AVL:"AVL",BubbleSort:"BubbleSort",MergeSort:"MergeSort",BinarySearch:"BusquedaBinaria",SingleLinkedList:"ListaEnlazada",DoubleLinkedList:"ListaDoblementeEnlazada",Queue:"Cola",Stack:"Pila"},V=a(14),K=a(18),z=a(12).connect;a(120)(K);var J=function(e){return"node-"+e},W=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.state={values:new Array,showModal:!1,showWeightModal:!1},a.layout={run:function(){},stop:function(){}},a.nodeStyle=V.NODE,a.edgeStyle=V.EDGE,a.undo=[],a.redo=[],a.options=void 0,a.cy=K(),a.buffer=[],a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();console.log(t),a.redo.push(e),void 0!==t&&a.loadGraph(t)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();a.undo.push(e),void 0!==t&&a.loadGraph(t)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1),console.log(a.step);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.clearGraph=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.CLEAR_GRAPH}),a.pushState();for(var e=a.cy.nodes(),t=0;t<e.length;t++)a.removeNode(e[t].id())}},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]'),a.removeNodePopper(e)},a.removeEdge=function(e){a.cy.remove('edge[id="'+e+'"]')},a.executeAnimation=function(e){var t;a.cy.nodes().style({"background-color":"white",color:"black"}),a.buffer=F(a.exportGraph(!0),e),a.props.algorithm===H.BFS?t=A.STARTING_BFS_INFO:a.props.algorithm===H.DFS?t=A.STARTING_DFS_INFO:a.props.algorithm===H.Dijkstra?t=A.STARTING_DIJKSTRA_INFO:a.props.algorithm===H.Kruskal?t=A.STARTING_KRUSKAL_INFO:a.props.algorithm===H.Prim&&(t=A.STARTING_PRIM_INFO),a.props.dispatch({type:t}),a.step=0,a.animation()},a.runButton=function(){if(!0===a.props.animation)return a.setState({values:Array()}),a.props.dispatch({type:A.ANIMATION_END}),a.cy.nodes().style(a.nodeStyle),a.cy.edges().style(a.edgeStyle),a.removePoppers(),void a.cy.autolock(!1);var e=a.props.selection;a.props.algorithm===H.Kruskal||a.props.algorithm===H.Prim||(console.log(a.props.algorithm),e&&"node"===e.type)?(a.cy.nodes().forEach(function(e){a.createPopper(e.id())}),a.refreshLayout(),new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START}),e(a.props.execute({cy:a.cy,selection:a.props.selection}))}).then(function(e){a.cy.autolock(!0),a.executeAnimation(e)})):a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})},a.removeButton=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.props.selection;e?(a.pushState(),"node"===e.type?a.removeNode(e.id):"edge"===e.type&&a.removeEdge(e.id),a.props.dispatch({type:A.NO_SELECTION})):a.props.dispatch({type:A.NO_ELEMENT_SELECTED_ERROR})}},a.handleClickOnNode=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection;if(n&&"node"===n.type){if("node"===n.type){var o=n.id;if(o===t)e.style(V.NODE),a.props.dispatch({type:A.NO_SELECTION});else{var i=a.cy.getElementById(o);o&&((a.props.directed&&!i.outgoers().contains(e)||!a.props.directed&&!i.neighborhood().contains(e))&&a.createEdge(o,t),a.props.dispatch({type:A.NO_SELECTION,payload:{selection:null}})),i.style(V.NODE)}}}else e.style(V.NODE_SELECTED),n&&"edge"===n.type&&a.cy.getElementById(n.id).style(a.edgeStyle),a.props.dispatch({type:A.SELECTION,payload:{selection:{id:t,type:"node"}}})}},a.handleClickOnEdge=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection,o=null;if(n){o=n.id;var i=a.cy.getElementById(o);"edge"===n.type?i.style(a.edgeStyle):"node"===n.type&&i.style(a.nodeStyle)}if(o===t)a.props.dispatch({type:A.NO_SELECTION,payload:{selection:null}}),a.cy.getElementById(o).style(a.edgeStyle);else a.props.dispatch({type:A.SELECTION,payload:{selection:{type:"edge",id:t,weight:a.cy.getElementById(t).data("weight")}}}),e.style(V.EDGE_SELECTED)}},a.changeWeight=function(e){var t=a.props.selection;if("edge"===t.type){var n=t.id;if(a.cy.getElementById(n).data("weight")===e)return;a.pushState(),a.cy.getElementById(n).data("weight",e),a.props.dispatch({type:A.SELECTION,payload:{selection:{type:"edge",weight:e,id:n}}})}},a.weightButton=function(){var e=a.props.selection;e&&"edge"===e.type?a.setState({showWeightModal:!0}):a.props.dispatch({type:A.NO_EDGE_SELECTED_ERROR})},a.handleClickViewport=function(e){if(!0!==a.props.animation){var t=a.props.selection;if(e.target===a.cy)if(t){var n=a.cy.getElementById(t.id);"node"===t.type?n.style(V.NODE):"edge"===t.type&&n.style(a.edgeStyle),a.props.dispatch({type:A.NO_SELECTION})}else{var o=e.position,i=o.x,r=o.y;a.createNode(i,r),a.refreshLayout()}}else a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR})},a.props.weighted&&(a.edgeStyle=Object(m.a)({},a.edgeStyle,V.EDGE_WEIGHTED)),a.props.directed&&(a.edgeStyle=Object(m.a)({},a.edgeStyle,V.EDGE_DIRECTED)),a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ejecutar",run:a.runButton},{name:"Eliminar",run:a.removeButton},{name:"Cambiar peso",run:a.weightButton},{name:"Limpiar canvas",run:a.clearGraph},{name:"Descargar grafo",run:function(){return a._mediaRecorder.takeJson(a.exportGraph())}},{name:"Subir grafo",run:function(){return a.setState({showModal:!0})}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.props.dispatch({type:this.props.action,payload:{run:this.runButton,photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}}),this.props.action===A.SELECT_DIJKSTRA&&this.props.dispatch({type:A.DIJKSTRA_NEGATIVE_WEIGHT_WARNING})}},{key:"componentDidUpdate",value:function(e){if(!e.loadingGraph&&this.props.loadingGraph){var t=JSON.parse(this.props.data);t&&(this.pushState(),this.loadGraph(t)),this.props.dispatch({type:A.FINISHED_LOAD})}!e.animation&&this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}}):e.animation&&!this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),this._isMounted=!1,clearTimeout(this.animationTimeout),this._mediaRecorder.cancelGif(),this.removePoppers()}},{key:"initialize",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e);var n=V.EDGE;this.props.weighted&&(n=Object(m.a)({},n,V.EDGE_WEIGHTED)),this.props.directed&&(n=Object(m.a)({},n,V.EDGE_DIRECTED)),this.cy=K({container:document.getElementById("canvas"),elements:JSON.parse(JSON.stringify(e)),style:[{selector:"node",style:V.NODE},{selector:"edge",style:n}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0"}),a?this.cy.nodes().forEach(function(e){e.id().match("popper")&&e.style({visibility:"hidden"})}):this.removePoppers(),this.cy.on("click",function(e){return t.handleClickViewport(e)}),this.cy.on("click","node",function(e){return t.handleClickOnNode(e.target)}),this.cy.on("click","edge",function(e){return t.handleClickOnEdge(e.target)}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"loadGraph",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var t=this.cy.nodes(),a=0;a<t.length;a++)this.removeNode(t[a].id());console.log(e);for(var n=0;n<e.length;n++)this.cy.add(e[n]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)})}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility"),zIndex:a.style("z-index")}:{}},position:{x:a.position().x,y:a.position().y}})}),this.cy.edges().forEach(function(a){t.push({group:"edges",data:{id:a.id(),source:a.source().id(),target:a.target().id(),weight:a.data("weight"),style:e?{lineColor:a.style("line-color"),targetArrowShape:a.style("target-arrow-shape"),targetArrowColor:a.style("target-arrow-color"),lineStyle:a.style("line-style")}:{}}})}),t}},{key:"pushState",value:function(){this.redo=[],this.undo.push(this.exportGraph())}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"removeNodePopper",value:function(e){this.cy.remove('node[id="'+e+'-popper"]')}},{key:"animation",value:function(){var e=this;!function t(){if(e._isMounted){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(!e.props.animation)return e.cy.nodes().style(e.nodeStyle),e.cy.edges().style(e.edgeStyle),e.props.dispatch({type:A.ANIMATION_END}),void e.cy.autolock(!1);if(!e.props.paused){var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration;e.loadGraph(n,!0),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),e.refreshLayout(),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed)}}}()}},{key:"createNode",value:function(e,t){for(var a=1;this.cy.getElementById(J(a.toString())).length>0;)a++;var n=J(a.toString());this.pushState(),this.cy.add({group:"nodes",data:{id:n,value:a},position:{x:e,y:t}})}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper"},position:{x:t.x,y:t.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10,visibility:"hidden"}})}},{key:"removePoppers",value:function(){var e=this;this.cy.nodes().forEach(function(t){e.removeNode(t.id()+"-popper")})}},{key:"createEdge",value:function(e,t){this.pushState(),this.cy.add({group:"edges",data:{id:e+"-"+t,weight:Math.floor(15*Math.random()),source:e,target:t}})}},{key:"render",value:function(){var e=this,t=this.props.selection;if(t&&"edge"===t.type){var a=t.id;this.cy.getElementById(a).data("weight")}return o.a.createElement(o.a.Fragment,null,o.a.createElement(D,{show:this.state.showModal,handleClose:function(){return e.setState({showModal:!1})}}),o.a.createElement(M,{show:this.state.showWeightModal,handleClose:function(){return e.setState({showWeightModal:!1})},callback:function(t){return e.changeWeight(t)}}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Y=z(function(e){return{selection:e.selection,algorithm:e.algorithm,animation:e.animation,speed:e.speed,loadingGraph:e.loadingGraph,data:e.data,paused:e.paused}})(W);var q=a(12).connect,X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.uploadGraph=function(){var e=document.getElementById("HeapUploadInput");if(e.files){var t=e.files[0],n=new FileReader;n.onload=function(){if(console.log(n.result),"string"===typeof n.result){var e=n.result;a.validateArray(e)}},n.readAsText(t)}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.handleClose()},a.input=null,a.setStepInputRef=function(e){a.input=e},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){if(console.log(e),!e||!/^(([-]?([0-9]{1,3})[,]){0,15})([-]?([0-9]{1,3}))$/.test(e))return this.props.dispatch({type:A.INVALID_HEAP_ERROR}),!1;var t=e.split(",").map(function(e){return parseInt(e)});console.log(t),!function(e){var t=e.length;console.log("VALIDANDO",e);for(var a=1;2*a<t;a++){var n=e[2*a],o=2*a+1===t?1/0:e[2*a+1];if(console.log(e[a],n,o),n<e[a]||o<e[a])return!1}return!0}(t)?this.props.dispatch({type:A.INVALID_HEAP_ERROR}):(this.props.changeArray(t),this.props.handleClose())}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleClose;return o.a.createElement(x.a,{show:t,onHide:a},o.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},o.a.createElement(x.a.Title,null,"Seleccione un archivo")),o.a.createElement(x.a.Body,null,o.a.createElement("p",null,"El archivo debe contener un Heap valido, previamente descargado"),o.a.createElement("input",{type:"file",id:"HeapUploadInput"})),o.a.createElement(x.a.Footer,null,o.a.createElement(k.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),o.a.createElement(k.a,{variant:"primary",onClick:this.uploadGraph},"Aceptar")))}}]),t}(o.a.Component),Q=q()(X),$=[{text:"extraer_minimo(Arreglo A de longitud n)",ind:0},{text:"intercambiar(A[1], A[n])",ind:1},{text:"n--",ind:1},{text:"hundir(1)",ind:1},{text:"\u2063",ind:0},{text:"hundir(Entero i): ",ind:0},{text:"Si no es_hoja(i):",ind:1},{text:"Si A[2*i] < A[2*i+1]:",ind:2},{text:"h = 2*i",ind:3},{text:"Sino: ",ind:2},{text:"h = 2*i+1",ind:3},{text:"Si A[i] > A[h]:",ind:2},{text:"hundir(h)",ind:3}],Z=[{text:"insertar(Arreglo A de longitud n, Entero v):",ind:0},{text:"A[n++] = v",ind:1},{text:"flotar(n)",ind:1},{text:"\u2063",ind:0},{text:"flotar(entero i):",ind:0},{text:"Si i/2 > 0 y A[i/2] > A[i]:",ind:1},{text:"intercambiar(A[i/2], A[i])",ind:2},{text:"flotar(i/2)",ind:2}],ee=[{text:"MinHeap{",ind:0},{text:"Arreglo A",ind:1},{text:"insertar(entero v)",ind:1},{text:"extraer_minimo()",ind:1},{text:"flotar(entero i)",ind:1},{text:"hundir(entero i)",ind:1},{text:"}",ind:0}],te=a(14),ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e>=t},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t};Object(s.a)(this,e),this._data=[0],this._comp=null,this._eq=null,this._comp=t,this._eq=a}return Object(d.a)(e,[{key:"isEmpty",value:function(){return 1===this._data.length}},{key:"length",value:function(){return this._data.length}},{key:"top",value:function(){return this.isEmpty()?null:this._data[1]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];this._data.push(e);var n=this._data.length-1;for(t&&a.push({eles:[n.toString()],style:[te.NODE_BLACK],classes:["heap-focus"],lines:[4]});n>1;){var o=Math.floor(n/2);if(this._comp(this._data[o],this._data[n])||this._eq(this._data[o],this._data[n])){t&&a.push({eles:[o.toString()],style:[te.NODE_CORRECT],classes:["heap-correct"],lines:[-1]});break}t&&a.push({eles:[o.toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[5,6,7]},{eles:[o.toString(),n.toString()],style:[te.NODE_BLACK,te.NODE],data:[{value:this._data[n]},{value:this._data[o]}],classes:["heap-focus","heap-default"],lines:[4]});var i=[this._data[n],this._data[o]];this._data[o]=i[0],this._data[n]=i[1],n=o}return a}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(!this.isEmpty()){var a=this._data[this._data.length-1];if(this._data.pop(),this.isEmpty())return t;var n=1;for(this._data[1]=a,e&&t.push({eles:[n.toString()],style:[te.NODE_BLACK],classes:["heap-focus"],lines:[5]});2*n<this._data.length;){var o=this._data[2*n],i=2*n+1<this._data.length?this._data[2*n+1]:null;if(a=this._data[n],null==i){if(!this._comp(o,a))break;e&&t.push({eles:[(2*n).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[7,8]},{eles:[n.toString(),(2*n).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var r=[this._data[n],this._data[2*n]];this._data[2*n]=r[0],this._data[n]=r[1],n*=2}else if((this._comp(o,i)||this._eq(o,i))&&this._comp(o,a)){e&&t.push({eles:[(2*n).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[7,8]},{eles:[n.toString(),(2*n).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var s=[this._data[n],this._data[2*n]];this._data[2*n]=s[0],this._data[n]=s[1],n*=2}else{if(!this._comp(i,o)&&!this._eq(i,o)||!this._comp(i,a))break;e&&t.push({eles:[(2*n+1).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[9,10]},{eles:[n.toString(),(2*n+1).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n+1]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var d=[this._data[n],this._data[2*n+1]];this._data[2*n+1]=d[0],this._data[n]=d[1],n=2*n+1}}}return t}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}}]),e}(),ne=a(14),oe=a(18),ie=(a(12).connect,function(){function e(t,a){var n=this;Object(s.a)(this,e),this.heap=new ae(function(e,t){return e<t},function(e,t){return e===t}),this.cy=oe(),this.vh=void 0,this.vw=void 0,this.exportGraph=function(){var e=[];return n.layoutProcessing(),n.cy.nodes().forEach(function(t){var a=t.data("prevPosition");a||(a=t.data("position")),e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),style:t.data("style"),position:t.data("position")},position:a})}),n.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight"),style:t.data("style")}})}),JSON.parse(JSON.stringify(e))},this.removeNode=function(e){n.cy.remove('node[id="'+e+'"]'),n.cy.remove('node[id="'+e+'-popper"]')},this.remove=function(){var e,t=n.heap.length()-1,a=n.cy.getElementById("1").outgoers("node");if(n.removeNode("1"),e=n.heap.pop(!0),1===t)return[{elements:n.exportGraph(),lines:[],duration:1e3}];var o=n.cy.getElementById(t.toString()).data("position"),i=n.cy.getElementById(t.toString()).data("value");n.removeNode(t.toString()),n.addNode("1",i,o);for(var r=[],s=0;s<a.length;s++)0!==n.cy.getElementById(a[s].id()).length&&n.cy.add({group:"edges",data:{id:"1-"+a[s].id(),source:"1",target:a[s].id()}});return r=(r=r.concat({elements:n.exportGraph(),lines:[],duration:1e3})).concat(n.processCommands(e)),n.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",ne.NODE)}),r.push({elements:n.exportGraph(),lines:[],duration:0}),r},this.vh=a,this.vw=t}return Object(d.a)(e,[{key:"loadGraph",value:function(e){var t=this;this.cy=oe({elements:JSON.parse(JSON.stringify(e))}),this.heap._data=[0],this.cy.nodes().forEach(function(e){e.id().match("popper")?e.data("style",ne.NODE_POPPER):(t.heap._data[parseInt(e.id())]=e.data("value"),e.data("style",ne.NODE))}),console.log(this.heap._data)}},{key:"createPopper",value:function(e,t){var a=this.cy.getElementById(e).data("position");this.cy.add({group:"nodes",data:{id:e+"-popper",value:t,style:ne.NODE_POPPER,position:{x:a.x,y:a.y+30}},position:{x:a.x,y:a.y+30}})}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e.toString(),value:t,position:{x:a.x,y:a.y}},position:{x:a.x,y:a.y}}),this.createPopper(e,parseInt(e))}},{key:"layoutProcessing",value:function(){var e=this;if(0!==this.heap._data.length){var t=5*(1<<function e(t){for(var a=t.outgoers("node"),n=0,o=0;o<a.length;o++)n=Math.max(n,e(a[o]));return n+1}(this.cy.getElementById("1")));return function t(a,n,o,i){var r=a.data("position");a.data("prevPosition",r),a.data("position",{x:n,y:o});var s=e.cy.getElementById(a.id()+"-popper"),d=s.data("position");s.data("prevPosition",d),s.data("position",{x:n,y:o+30}),a.outgoers("node").length&&t(a.outgoers("node")[0],n-i,o+50,i/2),2===a.outgoers("node").length&&t(a.outgoers("node")[1],n+i,o+50,i/2)}(this.cy.getElementById("1"),this.vw/2,this.vh/4,t),!0}}},{key:"processCommands",value:function(e){var t=this;this.cy.nodes().forEach(function(e){e.id().match("-popper")||e.style({"background-color":"white",color:"black"})});for(var a=[],n=[],o=0,i=function(i){var r=e[i],s=r.eles,d=r.style,l=r.duration,p=r.data,u=(r.classes,r.lines);null==l&&(l=1e3),null==u&&(u=[]),a.push({elements:t.exportGraph(),lines:n,duration:o}),n=u,o=l,s&&s.forEach(function(e,a){d&&t.cy.getElementById(e).data("style",d[a]);null!=p&&t.cy.getElementById(e).data(p[a])})},r=0;r<e.length;r++)i(r);return a.push({elements:this.exportGraph(),lines:n,duration:1e3}),a}},{key:"insert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[];if(this.heap.length()-1===0){this.addNode("1",e),t.push({elements:this.exportGraph(),duration:1e3,lines:[1,2,3,4]});var a=this.heap.push(e,!0);t=t.concat(this.processCommands(a))}else{var n=this.heap.length();console.log(n);var o=this.cy.getElementById(Math.floor(n/2).toString());this.addNode(n.toString(),e,o.data("position")),this.cy.add({group:"edges",data:{id:o.id()+"-"+n.toString(),source:o.id(),target:n.toString()}}),t.push({elements:this.exportGraph(),duration:1e3,lines:[1,2,3,4]});var i=this.heap.push(e,!0);t=t.concat(this.processCommands(i))}return this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",ne.NODE)}),t.push({elements:this.exportGraph(),lines:[],duration:0}),t}}]),e}()),re=a(14),se=a(18),de=a(12).connect,le={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.undo=[],a.redo=[],a.state={show:!1,showInsertModal:!1},a.layout={run:function(){},stop:function(){}},a.nodeStyle=re.NODE,a.edgeStyle=re.EDGE,a.cy=se(),a.heapProcessor=void 0,a.buffer=[],a.options=void 0,a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push(e),a.loadGraph(t),a.heapProcessor.loadGraph(t))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push(e),a.loadGraph(t),a.heapProcessor.loadGraph(t))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]'),a.cy.remove('node[id="'+e+'-popper"]')},a.executeAnimation=function(){a.cy.nodes().forEach(function(e){e.id().match("-popper")||e.style({"background-color":"white",color:"black"})}),new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START}),e()}).then(function(){a.step=0,a.animation()})},a.remove=function(){a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:$}}),a.pushState(),a.buffer=a.heapProcessor.remove(),console.log(a.buffer),a.executeAnimation())},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Insertar",run:function(){return a.setState({showInsertModal:!0})}},{name:"Extraer minimo",run:a.remove},{name:"Limpiar canvas",run:function(){}},{name:"Subir Heap",run:function(){return a.setState({show:!0})}},{name:"Descargar Heap",run:function(){a.props.animation||function(e){var t=e.toString(),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","avl.txt"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(a.heapProcessor.heap._data)}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"initialize",value:function(){var e=this,t=re.EDGE;this.cy=se({container:document.getElementById("canvas"),elements:[],style:[{selector:"node",style:re.NODE},{selector:"edge",style:t}],headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.nodes().forEach(function(e){e.id().match("-popper")&&e.style({"z-index":0,"border-width":0,"font-size":15,width:10,height:10})}),this.cy.on("resize",function(){return e.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(Object(m.a)({},le,{animate:!1})),this.layout.run(),this.refreshLayout()}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize(),this.heapProcessor=new ie(this.cy.width(),this.cy.height()),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue}})}},{key:"componentDidUpdate",value:function(e){var t=this;le.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){t.loadGraph(t.buffer[t.buffer.length-1].elements),t.props.dispatch({type:A.ANIMATION_END})}}]}})}},{key:"componentWillUnmount",value:function(){var e=this;this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(t){e.removeNode(t.id())})}},{key:"pushState",value:function(){this.redo=[],this.undo.push(this.exportGraph())}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var a=e.data("position");null!=a&&(le.positions[e.id()]=JSON.parse(JSON.stringify(a)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:{x:t.position().x,y:t.position().y}},style:t.style(),position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"createPopper",value:function(e,t){var a=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper",value:t},position:{x:a.x,y:a.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10}})}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e.toString(),value:t},grabbable:!1,pannable:!1,position:{x:a.x,y:a.y}}),this.createPopper(e,parseInt(e))}},{key:"animation",value:function(){var e=this;!function t(){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration;e.props.paused||(e.loadGraph(n),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),console.log(i),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed))}}()}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layoutProcessing(),this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},le,{animate:e})),this.layout.run()}},{key:"layoutProcessing",value:function(){var e=this,t=5*(1<<function e(t){for(var a=t.outgoers("node"),n=0,o=0;o<a.length;o++)n=Math.max(n,e(a[o]));return n+1}(this.cy.getElementById("1"))),a=this.cy.width(),n=this.cy.height();return function t(a,n,o,i){le.positions[a.id()]={x:n,y:o},a.data("position",{x:n,y:o});var r=e.cy.getElementById(a.id()+"-popper");le.positions[r.id()]={x:n,y:o+30},r.data("position",{x:n,y:o+30}),a.outgoers("node").length&&t(a.outgoers("node")[0],n-i,o+50,i/2),2===a.outgoers("node").length&&t(a.outgoers("node")[1],n+i,o+50,i/2)}(this.cy.getElementById("1"),a/2,n/4,t),!0}},{key:"insert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:Z}}),this.pushState(),this.buffer=this.heapProcessor.insert(e),console.log(this.buffer),this.executeAnimation())}},{key:"changeArray",value:function(e){var t=this;this.pushState(),this.cy.nodes().forEach(function(e){t.cy.remove(e)}),this.heapProcessor.heap.clear();for(var a=1;a<e.length;a++)this.addNode(a.toString(),e[a]);for(var n=1;2*n<e.length;n++)this.cy.add({group:"edges",data:{id:n.toString()+"-"+(2*n).toString(),source:n.toString(),target:(2*n).toString()}});for(var o=1;2*o+1<e.length;o++)this.cy.add({group:"edges",data:{id:o.toString()+"-"+(2*o+1).toString(),source:o.toString(),target:(2*o+1).toString()}});this.refreshLayout(),this.heapProcessor.loadGraph(this.exportGraph())}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Q,{show:this.state.show,changeArray:function(t){return e.changeArray(t)},handleClose:function(){return e.setState({show:!1})}}),o.a.createElement(M,{show:this.state.showInsertModal,handleClose:function(){return e.setState({showInsertModal:!1})},callback:function(t){return e.insert(t)}}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),ue=de(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(pe),ce=a(23),he=a.n(ce),ye=a(35),Ee=a(9);function fe(e){return 0===e.outgoers("node").length}function me(e){var t=null,a=null,n=e.outgoers("node");if(n.length>=1&&(t=n[0]),2===n.length&&(a=n[1]),null!=t&&null!=a&&t.data("value")>a.data("value")){var o=[a,t];t=o[0],a=o[1]}else if(null!=t&&t.data("value")>e.data("value")){var i=[a,t];t=i[0],a=i[1]}else if(null!=a&&a.data("value")<e.data("value")){var r=[a,t];t=r[0],a=r[1]}return[t,a]}function ve(e,t,a){for(;t.id()!==a.id();)t.data("depth")<a.data("depth")?a=e.getElementById(a.data("prev")):t.data("depth")>a.data("depth")?t=e.getElementById(t.data("prev")):(t=e.getElementById(t.data("prev")),a=e.getElementById(a.data("prev")));return t}function ge(e){return e?e.data("height"):0}function Ne(e){var t="";if(0===e.length)return t;!function e(a){if(a){t+=a.data("value").toString();var n=me(a),o=Object(Ee.a)(n,2),i=o[0],r=o[1];t+="(",e(i),t+=")",t+="(",e(r),t+=")"}else t+="."}(e);var a=document.createElement("a");return a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","avl.txt"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),t}var _e=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={text:""},a.uploadGraph=function(){var e=document.getElementById("AVLUploadInput");if(e.files){var t=e.files[0],n=new FileReader;n.onload=function(){if(console.log(n.result),"string"===typeof n.result){var e=n.result;a.validateArray(e)}},n.readAsText(t)}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.handleClose()},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){var t=this.props,a=t.addNode,n=t.addEdge,o=t.clearGraph;if(e&&/^([^0-9().-]|([0-9]{4,})|([.]{2,}))/.test(e))return console.error("Invalid AVL format"),!1;(function(e,t,a,n){var o=0,i=e.length,r=0,s=[],d=[];return!(!function t(a,n){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if("."===e[o])return o++,{correct:!0,height:0,balance:0};var p=1;if("-"===e[o]&&(p=-1,o++),o===i||e[o]<"0"||e[o]>"9")return{correct:!1};for(var u=0;o<i&&e[o]>="0"&&e[o]<="9";)u=10*u+parseInt(e[o++]);if((u*=p)<=a||u>=n)return{correct:!1};var c=r++;if(o===i||"("!==e[o])return{correct:!1};o++;var h=t(a,u,c);if(!h.correct||o===i||")"!==e[o])return{correct:!1};if(++o===i||"("!==e[o])return{correct:!1};o++;var y=t(u,n,c);if(!y.correct||o===i||")"!==e[o])return{correct:!1};o++;var E=Math.max(h.height,y.height)+1,f=y.height-h.height;return Math.abs(f)>1?{correct:!1}:(s.push({id:c.toString(),value:u,height:E,balance:f}),-1!==l&&d.push({source:l.toString(),target:c.toString()}),{correct:!0,height:E,balance:f})}(-1/0,1/0)||o!==i)&&(n(),s.forEach(function(e){t(e.id,e.value,e.height,e.balance)}),d.forEach(function(e){a(e.source,e.target)}),!0)})(e,a,n,o)&&this.props.handleClose(!0)}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleClose;return o.a.createElement(x.a,{show:t,onHide:a},o.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},o.a.createElement(x.a.Title,null,"Seleccione un archivo")),o.a.createElement(x.a.Body,null,o.a.createElement("p",null,"El archivo debe contener un arbol AVL valido, previamente descargado"),o.a.createElement("input",{type:"file",id:"AVLUploadInput"})),o.a.createElement(x.a.Footer,null,o.a.createElement(k.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),o.a.createElement(k.a,{variant:"primary",onClick:this.uploadGraph},"Aceptar")))}}]),t}(o.a.Component);function Se(e,t){return e+"-"+t}var Ie=[{text:"insertar(nodo u, entero v):",ind:0},{text:"Si u == NULL",ind:1},{text:"u = nuevo nodo(v)",ind:2},{text:"Sino si v < u.valor:",ind:1},{text:"insertar(u.hijoIzquierdo, v)",ind:2},{text:"Sino si v > u.valor:",ind:1},{text:"insertar(u.hijoDerecho, v)",ind:2}],Oe=[{text:"eliminar(nodo u):",ind:0},{text:"Si es_hoja(u): borrar u",ind:1},{text:"Sino: ",ind:1},{text:"Si hijos(u) == 1:",ind:2},{text:"eliminar(hijo(u))",ind:3},{text:"Sino: ",ind:2},{text:"nodo s = sucesor(u)",ind:3},{text:"intercambiar(u.valor, s.valor)",ind:3},{text:"borrar s",ind:3}],Ae=[{text:"balancear(nodo u)",ind:0},{text:"Caso 0: u esta balanceado",ind:1},{text:"Caso 1: factor(u)==2 y factor(u.hijoDerecho)>=0",ind:1},{text:"rotacionIzquierda(u)",ind:2},{text:"Caso 2: factor(u)==-2 y factor(u.hijoIzquierdo)<=0",ind:1},{text:"rotacionDerecha(u)",ind:2},{text:"Caso 3: factor(u)==2 y factor(u.hijoIzquierdo)<0",ind:1},{text:"rotacionDerecha(u.hijoDerecho), rotacionIzquierda(u)",ind:2},{text:"Caso 4: factor(u)==-2 y factor(u.hijoDerecho)>0",ind:1},{text:"rotacionIzquierda(u.hijoIzquiedo), rotacionDerecha(u)",ind:2}],be=[{text:"buscar(nodo u, entero v):",ind:0},{text:"Si u == NULL: retornar Falso",ind:1},{text:"Si v == u.valor: retornar Verdadero",ind:1},{text:"Si v < u.valor:",ind:1},{text:"buscar(u.hijoIzquierdo, v)",ind:2},{text:"Sino:",ind:1},{text:"buscar(u.hijoDerecho, v)",ind:2}],Re=[{text:"AVL{",ind:0},{text:"Nodo raiz",ind:1},{text:"insertar(nodo u, entero v)",ind:1},{text:"eliminar(nodo u)",ind:1},{text:"buscar(nodo u, entero v)",ind:1},{text:"balancear(nodo u)",ind:1},{text:"sucesor(nodo u)",ind:1},{text:"}",ind:0}],Te=a(14),Le=a(18),xe=a(12).connect,ke=(a(65),{name:"preset",positions:{},padding:30,animate:!0,animationDuration:500}),Ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.layout={run:function(){},stop:function(){}},a.treeRoot="",a.state={show:!1,showSearchModal:!1,showInsertModal:!1,showRemoveModal:!1},a.undo=[],a.redo=[],a.nodeStyle=Te.NODE,a.edgeStyle=Te.EDGE,a.cy=Le(),a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({root:a.treeRoot,elements:e}),a.initialize(t))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({root:a.treeRoot,elements:e}),a.initialize(t))}},a.removeNode=function(e){var t=e.id();a.cy.remove(e),a.removeNodePopper(t)},a.removeEdge=function(e,t){a.cy.remove('edge[id="'+Se(e,t)+'"]')},a.addNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};a.cy.add({group:"nodes",data:{id:e,value:t,height:n,balance:o},position:{x:i.x,y:i.y}}),a.createPopper(e)},a.addEdge=function(e,t){console.log(e,t),a.cy.add({group:"edges",data:{id:Se(e,t),source:e,target:t}}),a.cy.getElementById(t).data("prev",e)},a.remove=function(e){a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.search(e,!1).then(function(t){if(void 0!==t){var n="";if(a.props.dispatch({type:A.ANIMATION_START}),a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:Oe}}),a.pushState(),fe(t))a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),t.id()!==a.treeRoot&&(n=t.data("prev")),a.removeNode(t),a.refreshLayout(),""!==n?a.balance(a.cy.getElementById(n)).then(function(){a.props.dispatch({type:A.ANIMATION_END})}):a.props.dispatch({type:A.ANIMATION_END});else if(1===t.outgoers("node").length){if(a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[3,4]}}),t.id()===a.treeRoot)a.treeRoot=t.outgoers("node")[0].id(),n=a.treeRoot,a.removeNode(t),a.refreshLayout();else{var o;o=t.data("prev");var i=t.outgoers("node")[0];i.data(o),a.removeNode(t),a.addEdge(o,i.id()),n=i.id(),a.refreshLayout()}setTimeout(function(){return a.balance(a.cy.getElementById(n)).then(function(){a.props.dispatch({type:A.ANIMATION_END})})},1e3/a.props.speed)}else{a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[6]}}),a.inorderSuccessor(t).then(function(o){a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[7,8]}}),t.data("value",o.data("value")),o.data("value",e),setTimeout(function(){if(!fe(o)){var e=me(o)[1];e.data("prev",o.data("prev")),a.addEdge(o.data("prev"),e.id())}n=o.data("prev"),a.removeNode(o),a.refreshLayout(),setTimeout(function(){return a.balance(a.cy.getElementById(n)).then(function(){a.props.dispatch({type:A.ANIMATION_END})})},1e3/a.props.speed),t.style(Te.NODE)},1e3/a.props.speed)})}}}).catch(function(){a.props.dispatch({type:A.ANIMATION_END})})},a.handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({show:!1}),e&&(a.treeRoot="0",a.refreshLayout())},a.clearGraph=function(){a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(a.pushState(),a.cy.nodes().forEach(function(e){return a.cy.remove(e)}))},a._mediaRecorder=new T(e.dispatch),a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize({root:"",elements:[]}),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:[{name:"Insertar",run:function(){return e.setState({showInsertModal:!0})}},{name:"Eliminar",run:function(){return e.setState({showRemoveModal:!0})}},{name:"Buscar",run:function(){return e.setState({showSearchModal:!0})}},{name:"Limpiar canvas",run:this.clearGraph},{name:"Subir AVL",run:function(){return e.setState({show:!0})}},{name:"Descargar AVL",run:function(){return Ne(e.cy.getElementById(e.treeRoot))}}]}})}},{key:"initialize",value:function(e){var t=this,a=e.root,n=e.elements,o=Te.EDGE;this.cy=Le({container:document.getElementById("canvas"),elements:n,style:[{selector:"node",style:Te.NODE},{selector:"edge",style:o}],headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,wheelSensitivity:1,pixelRatio:"1.0",autoungrabify:!0}),this.cy.nodes().forEach(function(e){e.id().match("-popper")&&e.style({"z-index":0,"border-width":0,"font-size":15,width:10,height:10})}),this.treeRoot=a,this.cy.on("resize",function(){return t.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(Object(m.a)({},ke,{animate:!1})),this.layout.run(),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),prev:t.data("prev"),height:t.data("height"),balance:t.data("balance")},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"pushState",value:function(){console.log("pushed"),this.redo=[],this.undo.push({root:this.treeRoot,elements:this.exportGraph()})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),this._isMounted=!1}},{key:"componentDidUpdate",value:function(){ke.animationDuration=500/this.props.speed}},{key:"removeNodePopper",value:function(e){this.cy.remove(this.cy.getElementById(e+"-popper"))}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper",value:0},position:{x:t.x,y:t.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10}})}},{key:"isLeaf",value:function(e){return 0===e.outgoers("node").length}},{key:"getChildren",value:function(e){var t=null,a=null,n=e.outgoers("node");if(n.length>=1&&(t=n[0]),2===n.length&&(a=n[1]),null!=t&&null!=a&&t.data("value")>a.data("value")){var o=[a,t];t=o[0],a=o[1]}else if(null!=t&&t.data("value")>e.data("value")){var i=[a,t];t=i[0],a=i[1]}else if(null!=a&&a.data("value")<e.data("value")){var r=[a,t];t=r[0],a=r[1]}return[t,a]}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layoutProcessing(),this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},ke,{animate:e})),this.layout.run()}},{key:"propagate",value:function(e,t){if(null!=e){e.data("X",e.data("X")+t);var a=me(e),n=Object(Ee.a)(a,2),o=n[0],i=n[1];o&&this.propagate(o,t),i&&this.propagate(i,t)}}},{key:"layoutProcessing",value:function(){var e=this;if(""!==this.treeRoot){for(var t={},a=function a(n,o,i){console.log(n.data("value")),n.data("depth",o),n.data("X",i),void 0===t[o]&&(t[o]=Array()),t[o].push(n.id());var r=me(n),s=Object(Ee.a)(r,2),d=s[0],l=s[1],p=0,u=0;d&&(p=a(d,o+1,i-1)),l&&(u=a(l,o+1,i+1));var c=u-p;return e.cy.getElementById(n.id()+"-popper").data("value",c),Math.max(p,u)+1}(this.cy.getElementById(this.treeRoot),0,0),n=0;n++<1e3;){for(var o=!0,i=a-1;i>=0;i--)for(var r=t[i],s=0;s<r.length-1;s++){var d=this.cy.getElementById(r[s]),l=this.cy.getElementById(r[s+1]);if(d.data("X")+1>=l.data("X")){var p=me(ve(this.cy,d,l)),u=Object(Ee.a)(p,2),c=u[0],h=u[1],y=Math.max(d.data("X")-l.data("X"),1);this.propagate(c,-y),this.propagate(h,y),o=!1;break}}if(o)break}1001===n&&console.error("ALERT, INFINITE LOOP AVOIDED");var E=this.cy.width(),f=this.cy.height();return function e(t,a,n){ke.positions[t.id()]={x:24*t.data("X")+a,y:n},ke.positions[t.id()+"-popper"]={x:24*t.data("X")+a,y:n+30};var o=me(t),i=Object(Ee.a)(o,2),r=i[0],s=i[1];r&&e(r,a,n+50),s&&e(s,a,n+50)}(this.cy.getElementById(this.treeRoot),E/2,f/4),!0}}},{key:"rotateLeft",value:function(){var e=Object(ye.a)(he.a.mark(function e(t){var a,n,o=this;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){var n=me(t),i=Object(Ee.a)(n,2),r=i[0],s=i[1];if(null!=r){var d=me(r),l=Object(Ee.a)(d,2),p=l[0],u=l[1];o.removeEdge(t.id(),r.id()),u&&(o.removeEdge(r.id(),u.id()),o.addEdge(t.id(),u.id()));var c=t.data("prev");o.addEdge(r.id(),t.id()),o.treeRoot!==t.id()?(o.removeEdge(c,t.id()),o.addEdge(c,r.id())):(o.treeRoot=r.id(),console.log(o.treeRoot)),t.data("height",Math.max(ge(u),ge(s))+1),r.data("height",Math.max(ge(p),ge(t))+1),t.data("balance",ge(s)-ge(u)),r.data("balance",ge(t)-ge(p)),o.refreshLayout(),setTimeout(e,1e3/o.props.speed)}}),e.next=3,a;case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"rotateRight",value:function(){var e=Object(ye.a)(he.a.mark(function e(t){var a,n,o=this;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){var n=me(t),i=Object(Ee.a)(n,2),r=i[0],s=i[1];if(null!=s){var d=me(s),l=Object(Ee.a)(d,2),p=l[0],u=l[1];o.removeEdge(t.id(),s.id()),p&&(o.removeEdge(s.id(),p.id()),o.addEdge(t.id(),p.id()));var c=t.data("prev");o.addEdge(s.id(),t.id()),o.treeRoot!==t.id()?(o.removeEdge(c,t.id()),o.addEdge(c,s.id())):(o.treeRoot=s.id(),console.log(o.treeRoot)),t.data("height",Math.max(ge(r),ge(p))+1),s.data("height",Math.max(ge(t),ge(u))+1),t.data("balance",ge(p)-ge(r)),s.data("balance",ge(u)-ge(t)),o.refreshLayout(),setTimeout(e,1e3/o.props.speed)}}),e.next=3,a;case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"balance",value:function(e){var t=this,a=e;return this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:Ae}}),this.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[]}}),new Promise(function(e,n){t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),a.style({"background-color":"red",color:"black"}),setTimeout(function n(){var o=me(a),i=Object(Ee.a)(o,2),r=i[0],s=i[1],d=ge(r),l=ge(s);a.data("height",Math.max(d,l)+1);var p=l-d;a.data("balance",p),console.log("NODO "+a.id()+" BAL "+p);var u=function(){return new Promise(function(e){e()})},c=function(){return new Promise(function(e){e()})};2===p?s.data("balance")>=0?(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[2,3]}}),u=function(){return t.rotateRight(a)}):(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[6,7]}}),u=function(){return t.rotateLeft(s)},c=function(){return t.rotateRight(a)}):-2===p?r.data("balance")<=0?(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[4,5]}}),u=function(){return t.rotateLeft(a)}):(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[8,9]}}),u=function(){return t.rotateRight(r)},c=function(){return t.rotateLeft(a)}):t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),u().then(function(){c().then(function(){console.log("hello"),a.style({"background-color":"white",color:"black"}),a.id()!==t.treeRoot?((a=t.cy.getElementById(a.data("prev"))).style({"background-color":"red",color:"black"}),setTimeout(n,1e3/t.props.speed)):e()})})},1e3/t.props.speed)})}},{key:"insert",value:function(e){var t=this;if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:Ie}});for(var a=0;this.cy.getElementById(a.toString()).length>0;)a++;var n,o=this.cy.nodes().length/2+1;new Promise(function(i,r){if(t.props.dispatch({type:A.ANIMATION_START}),o>1){!function o(r,s){if(console.log(r),s&&s.style({color:"black","background-color":"white"}),r){r.style({color:"white","background-color":"black"});var d=me(r),l=Object(Ee.a)(d,2),p=l[0],u=l[1];if(e===r.data("value"))return t.props.dispatch({type:A.AVL_ELEMENT_ALREADY_INFO}),void setTimeout(i,1e3/t.props.speed,r.id());e<r.data("value")?(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[3,4]}}),setTimeout(o,1e3/t.props.speed,p,r)):(t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[5,6]}}),setTimeout(o,1e3/t.props.speed,u,r))}else t.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1,2]}}),s&&(t.pushState(),t.addNode(a.toString(),e,0,0,s.position()),n=t.cy.getElementById(a.toString()),t.addEdge(s.id(),n.id())),t.refreshLayout(),setTimeout(i,1e3/t.props.speed,null)}(t.cy.getElementById(t.treeRoot),null)}else t.pushState(),t.addNode(a.toString(),e),n=t.cy.getElementById(a.toString()),t.treeRoot=a.toString(),t.refreshLayout(),i(null)}).then(function(e){e?(t.cy.getElementById(e).style({"background-color":"white",color:"black"}),t.props.dispatch({type:A.ANIMATION_END})):t.balance(n).then(function(){t.props.dispatch({type:A.ANIMATION_END})})})}}},{key:"inorderSuccessor",value:function(){var e=Object(ye.a)(he.a.mark(function e(t){var a,n,o=this;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){var n=me(t)[1];(function t(a,n){if(n&&n.style({"background-color":"white",color:"black"}),a){a.style({"background-color":"red",color:"black"});var i=me(a)[0];setTimeout(t,1e3/o.props.speed,i,a)}else n&&e(n)})(t=n,null)}),e.next=3,a;case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(ye.a)(he.a.mark(function e(t){var a,n,o,i=this,r=arguments;return he.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(r.length>1&&void 0!==r[1])||r[1],!this.props.animation){e.next=4;break}return this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}),e.abrupt("return");case 4:return this.props.dispatch({type:A.ANIMATION_START}),this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:be}}),n=new Promise(function(e,n){var o=!1;!function r(s,d){if(d&&d.style({"background-color":"white",color:"black"}),s){s.style({"background-color":"red",color:"black"});var l=me(s),p=Object(Ee.a)(l,2),u=p[0],c=p[1];s.data("value")===t?(s.style({"background-color":"lightgreen",color:"black"}),o=!0,i.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[2]}}),setTimeout(r,1e3/i.props.speed,null,s)):s.data("value")<t?(i.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[5,6]}}),setTimeout(r,1e3/i.props.speed,c,s)):(i.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[3,4]}}),setTimeout(r,1e3/i.props.speed,u,s))}else i.props.dispatch({type:o?A.AVL_FOUND_SUCCESS:A.AVL_NOT_FOUND_INFO}),a&&i.props.dispatch({type:A.ANIMATION_END}),o||(i.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),setTimeout(n,1e3/i.props.speed)),setTimeout(e,1e3/i.props.speed,d)}(i.cy.getElementById(i.treeRoot),null)}),e.next=9,n;case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"testRotation",value:function(e){var t=this.props.selection;t&&(0===e?this.rotateLeft(this.cy.getElementById(t.id)):this.rotateRight(this.cy.getElementById(t.id)))}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{show:this.state.showInsertModal,handleClose:function(){return e.setState({showInsertModal:!1})},callback:function(t){return e.insert(t)}}),o.a.createElement(M,{show:this.state.showSearchModal,handleClose:function(){return e.setState({showSearchModal:!1})},callback:function(t){return e.search(t).catch(function(){})}}),o.a.createElement(M,{show:this.state.showRemoveModal,handleClose:function(){return e.setState({showRemoveModal:!1})},callback:function(t){return e.remove(t)}}),o.a.createElement(_e,{show:this.state.show,handleClose:this.handleClose,addNode:this.addNode,addEdge:this.addEdge,clearGraph:this.clearGraph}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),we=(xe(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection}})(Ce),a(14)),De=a(18),Ge=(a(12).connect,function(){function e(t,a){var n=this;Object(s.a)(this,e),this.cy=De(),this.vh=void 0,this.vw=void 0,this.treeRoot="",this.buffer=[],this.pseudo=[],this.addNode=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};n.cy.add({group:"nodes",data:{id:e,value:t,height:a,balance:o,position:{x:i.x,y:i.y}},position:{x:i.x,y:i.y}}),n.createPopper(e)},this.addEdge=function(e,t){n.cy.add({group:"edges",data:{id:Se(e,t),source:e,target:t}}),n.cy.getElementById(t).data("prev",e)},this.removeEdge=function(e,t){n.cy.remove('edge[id="'+Se(e,t)+'"]')},this.removeNode=function(e){var t=e.id();n.cy.remove(e),n.removeNodePopper(t)},this.remove=function(e){n.buffer=[],n.search(e),n.pseudo=Oe;var t=n.cy.getElementById(n.treeRoot),a=!1;if(n.cy.nodes().forEach(function(n){n.id().match("popper")||n.data("value")!==e||(t=n,a=!0)}),!a)return n.buffer;var o="";if(n.pushStep(),fe(t))t.id()!==n.treeRoot&&(o=t.data("prev")),n.removeNode(t),n.pushStep([1]),""!==o&&n.balance(n.cy.getElementById(o));else if(1===t.outgoers("node").length){if(t.id()===n.treeRoot)n.treeRoot=t.outgoers("node")[0].id(),o=n.treeRoot,n.removeNode(t),n.pushStep([3,4]);else{var i;i=t.data("prev");var r=t.outgoers("node")[0];r.data(i),n.removeNode(t),n.addEdge(i,r.id()),o=r.id(),n.pushStep([3,4])}n.balance(n.cy.getElementById(o))}else{n.pushStep([6]);var s=n.inorderSuccessor(t);if(console.log("NODE",t),console.log("SUC",s),n.pushStep([7,8]),t.data("value",s.data("value")),s.data("value",e),n.pushStep([7,8],1e3,!1),!fe(s)){console.log("ERROR"),console.log(me(s));var d=me(s)[1];d.data("prev",s.data("prev")),n.addEdge(s.data("prev"),d.id())}o=s.data("prev"),n.removeNode(s),n.pushStep(),n.balance(n.cy.getElementById(o))}return n.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",we.NODE)}),n.pushStep(),n.buffer},this.vh=a,this.vw=t}return Object(d.a)(e,[{key:"loadGraph",value:function(e,t){this.cy=De({elements:JSON.parse(JSON.stringify(e))}),this.cy.nodes().forEach(function(e){e.id().match("popper")?e.data("style",we.NODE_POPPER):e.data("style",we.NODE)}),this.treeRoot=t}},{key:"exportGraph",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[];return e&&this.layoutProcessing(),this.cy.nodes().forEach(function(e){var a=e.data("prevPosition");a||(a=e.data("position")),t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),prev:e.data("prev"),height:e.data("height"),balance:e.data("balance"),position:e.data("position"),style:e.data("style")},position:a})}),this.cy.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),t}},{key:"pushStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.buffer.push({elements:this.exportGraph(a),lines:e,duration:t,treeRoot:this.treeRoot,pseudo:this.pseudo})}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).data("position");this.cy.add({group:"nodes",data:{id:e+"-popper",style:we.NODE_POPPER,position:{x:t.x,y:t.y+30}},position:{x:t.x,y:t.y+30}})}},{key:"propagate",value:function(e,t){if(null!=e){e.data("X",e.data("X")+t);var a=me(e),n=Object(Ee.a)(a,2),o=n[0],i=n[1];o&&this.propagate(o,t),i&&this.propagate(i,t)}}},{key:"layoutProcessing",value:function(){var e=this;if(""!==this.treeRoot){for(var t={},a=function a(n,o,i){console.log(n.data("value")),n.data("depth",o),n.data("X",i),void 0===t[o]&&(t[o]=Array()),t[o].push(n.id());var r=me(n),s=Object(Ee.a)(r,2),d=s[0],l=s[1],p=0,u=0;d&&(p=a(d,o+1,i-1)),l&&(u=a(l,o+1,i+1));var c=u-p;return e.cy.getElementById(n.id()+"-popper").data("value",c),Math.max(p,u)+1}(this.cy.getElementById(this.treeRoot),0,0),n=0;n++<1e3;){for(var o=!0,i=a-1;i>=0;i--)for(var r=t[i],s=0;s<r.length-1;s++){var d=this.cy.getElementById(r[s]),l=this.cy.getElementById(r[s+1]);if(d.data("X")+1>=l.data("X")){var p=me(ve(this.cy,d,l)),u=Object(Ee.a)(p,2),c=u[0],h=u[1],y=Math.max(d.data("X")-l.data("X"),1);this.propagate(c,-y),this.propagate(h,y),o=!1;break}}if(o)break}1001===n&&console.error("ALERT, INFINITE LOOP AVOIDED");var E=this.vw,f=this.vh;return function t(a,n,o){var i=a.data("position");a.data("prevPosition",i),a.data("position",{x:24*a.data("X")+n,y:o});var r=e.cy.getElementById(a.id()+"-popper"),s=r.data("position");r.data("prevPosition",s),r.data("position",{x:24*a.data("X")+n,y:o+30});var d=me(a),l=Object(Ee.a)(d,2),p=l[0],u=l[1];p&&t(p,n,o+50),u&&t(u,n,o+50)}(this.cy.getElementById(this.treeRoot),E/2,f/4),!0}}},{key:"rotateLeft",value:function(e){var t=me(e),a=Object(Ee.a)(t,2),n=a[0],o=a[1];if(null!=n){var i=me(n),r=Object(Ee.a)(i,2),s=r[0],d=r[1];this.removeEdge(e.id(),n.id()),d&&(this.removeEdge(n.id(),d.id()),this.addEdge(e.id(),d.id()));var l=e.data("prev");this.addEdge(n.id(),e.id()),this.treeRoot!==e.id()?(this.removeEdge(l,e.id()),this.addEdge(l,n.id())):(this.treeRoot=n.id(),console.log(this.treeRoot)),e.data("height",Math.max(ge(d),ge(o))+1),n.data("height",Math.max(ge(s),ge(e))+1),e.data("balance",ge(o)-ge(d)),n.data("balance",ge(e)-ge(s)),this.pushStep([],1e3)}}},{key:"rotateRight",value:function(e){var t=me(e),a=Object(Ee.a)(t,2),n=a[0],o=a[1];if(null!=o){var i=me(o),r=Object(Ee.a)(i,2),s=r[0],d=r[1];this.removeEdge(e.id(),o.id()),s&&(this.removeEdge(o.id(),s.id()),this.addEdge(e.id(),s.id()));var l=e.data("prev");this.addEdge(o.id(),e.id()),this.treeRoot!==e.id()?(this.removeEdge(l,e.id()),this.addEdge(l,o.id())):(this.treeRoot=o.id(),console.log(this.treeRoot)),e.data("height",Math.max(ge(n),ge(s))+1),o.data("height",Math.max(ge(e),ge(d))+1),e.data("balance",ge(s)-ge(n)),o.data("balance",ge(d)-ge(e)),this.pushStep()}}},{key:"balance",value:function(e){var t=this,a=e;this.pseudo=Ae,this.pushStep();this.pushStep([1]),a.data("style",{"background-color":"red",color:"black"}),function e(){var n=me(a),o=Object(Ee.a)(n,2),i=o[0],r=o[1],s=ge(i),d=ge(r);a.data("height",Math.max(s,d)+1);var l=d-s;a.data("balance",l),2===l?r.data("balance")>=0?(t.pushStep([2,3]),t.rotateRight(a)):(t.pushStep([6,7]),t.rotateLeft(r),t.rotateRight(a)):-2===l?i.data("balance")<=0?(t.pushStep([4,5]),t.rotateLeft(a)):(t.pushStep([8,9]),t.rotateRight(i),t.rotateLeft(a)):t.pushStep([1]),a.id()!==t.treeRoot&&(a.data("style",we.NODE),(a=t.cy.getElementById(a.data("prev"))).data("style",{"background-color":"red",color:"black"}),e())}()}},{key:"insert",value:function(e){var t=this;this.buffer=[];for(var a=0;this.cy.getElementById(a.toString()).length>0;)a++;var n=this.cy.nodes().length/2+1,o=null;if(this.pseudo=Ie,this.pushStep(),n>1){!function n(i,r){if(console.log(i),r&&r.data("style",{color:"black","background-color":"white"}),i){i.data("style",{color:"white","background-color":"black"});var s=me(i),d=Object(Ee.a)(s,2),l=d[0],p=d[1];e<i.data("value")?(t.pushStep([3,4]),n(l,i)):(t.pushStep([5,6]),n(p,i))}else r&&(t.addNode(a.toString(),e,0,0,r.data("position")),(o=t.cy.getElementById(a.toString()))&&(t.addEdge(r.id(),o.id()),o.data("prev",r.id()))),t.pushStep([1,2])}(this.cy.getElementById(this.treeRoot),null)}else this.addNode(a.toString(),e),o=this.cy.getElementById(a.toString()),this.treeRoot=a.toString(),this.pushStep([1,2]);return o&&this.balance(o),this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",we.NODE)}),this.pushStep(),this.buffer}},{key:"search",value:function(e){var t=this;this.buffer=[],this.pseudo=be,this.pushStep();var a=!1;return function n(o,i){if(i&&i.data("style",{"background-color":"white",color:"black"}),o){o.data("style",{"background-color":"black",color:"white"});var r=me(o),s=Object(Ee.a)(r,2),d=s[0],l=s[1];o.data("value")===e?(o.data("style",{"background-color":"lightgreen",color:"black"}),a=!0,t.pushStep([2]),n(null,o)):o.data("value")<e?(t.pushStep([5,6]),n(l,o)):(t.pushStep([3,4]),n(d,o))}}(this.cy.getElementById(this.treeRoot),null),this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",we.NODE)}),this.pushStep(),{found:a,buffer:this.buffer}}},{key:"inorderSuccessor",value:function(e){var t=this;this.pushStep();var a=e;return function e(n,o){if(o&&(o.data("style",{"background-color":"white",color:"black"}),a=o),n){n.data("style",{"background-color":"red",color:"black"});var i=me(n)[0];t.pushStep(),e(i,n)}}(e=me(e)[1],null),a}},{key:"removeNodePopper",value:function(e){this.cy.remove(this.cy.getElementById(e+"-popper"))}}]),e}()),Pe=a(14),Me=a(18),Be=a(12).connect;a(65);Me.warnings(!1);var Ue={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.layout={run:function(){},stop:function(){}},a.treeRoot="",a.state={show:!1,showSearchModal:!1,showInsertModal:!1,showRemoveModal:!1},a.undo=[],a.redo=[],a.nodeStyle=Pe.NODE,a.edgeStyle=Pe.EDGE,a.AVLProcessor=void 0,a.cy=Me(),a.buffer=[],a.options=void 0,a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({root:a.treeRoot,elements:e}),a.treeRoot=t.root,a.loadGraph(t.elements),a.AVLProcessor.loadGraph(t.elements,t.root))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({root:a.treeRoot,elements:e}),a.treeRoot=t.root,a.loadGraph(t.elements),a.AVLProcessor.loadGraph(t.elements,t.root))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,o=e.pseudo,i=e.lines;a.treeRoot=t,a.loadGraph(n,!0),o&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:o}}),i&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,o=e.pseudo,i=e.lines;a.treeRoot=t,a.loadGraph(n,!0),o&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:o}}),i&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,o=e.pseudo,i=e.lines;a.treeRoot=t,a.loadGraph(n,!0),o&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:o}}),i&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){var t=e.id();a.cy.remove(e),a.removeNodePopper(t)},a.removeEdge=function(e,t){a.cy.remove('edge[id="'+Se(e,t)+'"]')},a.addNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};a.cy.add({group:"nodes",data:{id:e,value:t,height:n,balance:o},position:{x:i.x,y:i.y}}),a.createPopper(e)},a.addEdge=function(e,t){a.cy.add({group:"edges",data:{id:Se(e,t),source:e,target:t}}),a.cy.getElementById(t).data("prev",e)},a.handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({show:!1}),e&&(a.treeRoot="0",a.layoutProcessing(),a.refreshLayout(),a.AVLProcessor.loadGraph(a.exportGraph(),"0"))},a.clearGraph=function(){a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(a.pushState(),a.cy.nodes().forEach(function(e){return a.cy.remove(e)}))},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Insertar",run:function(){return a.setState({showInsertModal:!0})}},{name:"Eliminar",run:function(){return a.setState({showRemoveModal:!0})}},{name:"Buscar",run:function(){return a.setState({showSearchModal:!0})}},{name:"Limpiar canvas",run:a.clearGraph},{name:"Subir AVL",run:function(){return a.setState({show:!0})}},{name:"Descargar AVL",run:function(){return Ne(a.cy.getElementById(a.treeRoot))}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize({root:"",elements:[]}),this.AVLProcessor=new Ge(this.cy.width(),this.cy.height()),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}})}},{key:"initialize",value:function(e){var t=e.root,a=e.elements,n=Pe.EDGE;this.cy=Me({container:document.getElementById("canvas"),elements:a,style:[{selector:"node",style:Pe.NODE},{selector:"edge",style:n}],headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.nodes().forEach(function(e){e.id().match("-popper")&&e.style({"z-index":0,"border-width":0,"font-size":15,width:10,height:10})}),this.treeRoot=t,this.layout=this.cy.elements().makeLayout(Object(m.a)({},Ue,{animate:!1})),this.layout.run(),this.refreshLayout()}},{key:"loadGraph",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cy.nodes(),o={};n.forEach(function(e){a&&(o[e.id()]=JSON.parse(JSON.stringify(e.data("position")))),t.cy.remove(e)});for(var i=0;i<e.length;i++)this.cy.add(JSON.parse(JSON.stringify(e[i])));this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var n=e.data("position");a&&o[e.id()]&&e.position({x:o[e.id()].x,y:o[e.id()].y}),null!=n&&(Ue.positions[e.id()]=JSON.parse(JSON.stringify(n)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),prev:t.data("prev"),height:t.data("height"),balance:t.data("balance"),style:t.style(),position:{x:t.position().x,y:t.position().y}},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"pushState",value:function(){console.log("pushed"),this.redo=[],this.undo.push({root:this.treeRoot,elements:this.exportGraph()})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;Ue.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){t.loadGraph(t.buffer[t.buffer.length-1].elements),t.treeRoot=t.buffer[t.buffer.length-1].treeRoot,t.props.dispatch({type:A.ANIMATION_END}),console.log(me(t.cy.getElementById(t.treeRoot)))}}]}})}},{key:"removeNodePopper",value:function(e){this.cy.remove(this.cy.getElementById(e+"-popper"))}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper",value:0},position:{x:t.x,y:t.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10}})}},{key:"isLeaf",value:function(e){return 0===e.outgoers("node").length}},{key:"getChildren",value:function(e){var t=null,a=null,n=e.outgoers("node");if(n.length>=1&&(t=n[0]),2===n.length&&(a=n[1]),null!=t&&null!=a&&t.data("value")>a.data("value")){var o=[a,t];t=o[0],a=o[1]}else if(null!=t&&t.data("value")>e.data("value")){var i=[a,t];t=i[0],a=i[1]}else if(null!=a&&a.data("value")<e.data("value")){var r=[a,t];t=r[0],a=r[1]}return[t,a]}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},Ue,{animate:e})),this.layout.run()}},{key:"propagate",value:function(e,t){if(null!=e){e.data("X",e.data("X")+t);var a=me(e),n=Object(Ee.a)(a,2),o=n[0],i=n[1];o&&this.propagate(o,t),i&&this.propagate(i,t)}}},{key:"layoutProcessing",value:function(){var e=this;if(""!==this.treeRoot){for(var t={},a=function a(n,o,i){console.log(n.data("value")),n.data("depth",o),n.data("X",i),void 0===t[o]&&(t[o]=Array()),t[o].push(n.id());var r=me(n),s=Object(Ee.a)(r,2),d=s[0],l=s[1],p=0,u=0;d&&(p=a(d,o+1,i-1)),l&&(u=a(l,o+1,i+1));var c=u-p;return e.cy.getElementById(n.id()+"-popper").data("value",c),Math.max(p,u)+1}(this.cy.getElementById(this.treeRoot),0,0),n=0;n++<1e3;){for(var o=!0,i=a-1;i>=0;i--)for(var r=t[i],s=0;s<r.length-1;s++){var d=this.cy.getElementById(r[s]),l=this.cy.getElementById(r[s+1]);if(d.data("X")+1>=l.data("X")){var p=me(ve(this.cy,d,l)),u=Object(Ee.a)(p,2),c=u[0],h=u[1],y=Math.max(d.data("X")-l.data("X"),1);this.propagate(c,-y),this.propagate(h,y),o=!1;break}}if(o)break}1001===n&&console.error("ALERT, INFINITE LOOP AVOIDED");var E=this.cy.width(),f=this.cy.height();return function e(t,a,n){Ue.positions[t.id()]={x:24*t.data("X")+a,y:n},Ue.positions[t.id()+"-popper"]={x:24*t.data("X")+a,y:n+30};var o=me(t),i=Object(Ee.a)(o,2),r=i[0],s=i[1];r&&e(r,a,n+50),s&&e(s,a,n+50)}(this.cy.getElementById(this.treeRoot),E/2,f/4),!0}}},{key:"animation",value:function(){var e=this;!function t(){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration,r=a.pseudo,s=a.treeRoot,d=a.refresh;e.props.paused||(e.loadGraph(n,d),r&&e.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:r}}),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),null!=s&&(e.treeRoot=s),console.log(i),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed))}}()}},{key:"insert",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.cy.nodes(),n=0;n<a.length;n++)if(!a[n].id().match("popper")&&a[n].data("value")===t)return void this.props.dispatch({type:A.AVL_ELEMENT_ALREADY_INFO});this.pushState(),this.buffer=this.AVLProcessor.insert(t),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.AVLProcessor.search(t),n=(a.found,a.buffer);this.buffer=n,console.log(n),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pushState(),this.buffer=this.AVLProcessor.remove(t),console.log(this.buffer),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{show:this.state.showInsertModal,handleClose:function(){return e.setState({showInsertModal:!1})},callback:function(t){return e.insert(t)}}),o.a.createElement(M,{show:this.state.showSearchModal,handleClose:function(){return e.setState({showSearchModal:!1})},callback:function(t){return e.search(t)}}),o.a.createElement(M,{show:this.state.showRemoveModal,handleClose:function(){return e.setState({showRemoveModal:!1})},callback:function(t){return e.remove(t)}}),o.a.createElement(_e,{show:this.state.show,handleClose:this.handleClose,addNode:this.addNode,addEdge:this.addEdge,clearGraph:this.clearGraph}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Fe=Be(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection,paused:e.paused}})(je),He=a(13),Ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";Object(s.a)(this,e),this._data=[],this._data=Object(He.a)(t),this.type=a}return Object(d.a)(e,[{key:"length",value:function(){return this._data.length}},{key:"push_back",value:function(e,t){var a,n=e.id,o=e.value,i=void 0,r=[];if(0===this.length()?r.push({lines:[2,3]}):this.type===A.SELECT_QUEUE?a=[4,5,6]:this.type===A.SELECT_DOUBLE_LINKED_LIST&&(a=[4,5,6,7]),t)for(var s=0;s<this.length();s++){var d=this._data[s].id;r.push({eles:[d],style:[{"background-color":"black",color:"white"}],lines:[6,7]},{eles:[d],style:[{"background-color":"white",color:"black"}],duration:10})}return this.length()&&(i=this._data[this.length()-1].id),this.type===A.SELECT_SINGLE_LINKED_LIST&&(a=[8]),r.push({eles:[],style:[],inst:[{name:"push_back",data:{id:n,value:o,source:i}}],lines:a}),console.log(r),r}},{key:"pop_back",value:function(e){if(0===this.length())return[];var t=[];if(e)for(var a=0;a<this.length();a++){var n=this._data[a].id,o=void 0;o=1===this.length()?[2,3,4,5]:[7,8,9],t.push({eles:[n],style:[{"background-color":"black",color:"white"}],lines:o},{eles:[n],style:[{"background-color":"white",color:"black"}],duration:10})}var i,r=this._data[this.length()-1].id;return this.type===A.SELECT_SINGLE_LINKED_LIST&&this.length()>1?i=[10,11]:this.type===A.SELECT_DOUBLE_LINKED_LIST&&(t.push({eles:[r],style:[{"background-color":"black",color:"white"}],lines:[2,3]}),i=1===this.length()?[4,5]:[6,7]),t.push({eles:[],style:[],inst:[{name:"pop_back",data:{id:r,value:this.length()-1}}],lines:i}),t}},{key:"push_front",value:function(e){var t,a=e.id,n=e.value,o=void 0;return this.length()&&(o=this._data[0].id),0===this.length()?t=[2,3]:this.type===A.SELECT_SINGLE_LINKED_LIST?t=[4,5,6]:this.type===A.SELECT_DOUBLE_LINKED_LIST?t=[4,5,6,7]:this.type===A.SELECT_STACK&&(t=[4,5,6]),[{eles:[],style:[],inst:[{name:"push_front",data:{id:a,value:n,target:o}}],lines:t}]}},{key:"pop_front",value:function(){if(0===this.length())return[{eles:[],style:[]}];var e,t=this._data[0].id,a=[];return this.type===A.SELECT_SINGLE_LINKED_LIST||this.type===A.SELECT_STACK?e=[2,3,4]:this.type===A.SELECT_DOUBLE_LINKED_LIST?(a.push({eles:[t],style:[{"background-color":"black",color:"white"}],lines:[2,3]}),e=1===this.length()?[4,5]:[6,7]):e=1===this.length()?[3,4]:[5,6],a.push({eles:[],style:[],inst:[{name:"pop_front",data:{id:t}}],lines:e}),a}},{key:"search",value:function(e){for(var t=this.length(),a=[],n=0;n<t;n++){var o=this._data[n].id;if(a.push({eles:[o],style:[{"background-color":"black",color:"white"}]}),this._data[n].value===e)return a.push({eles:[o],style:[{"background-color":"lightgreen",color:"black"}]}),!0;a.push({eles:[o],style:[{"background-color":"white",color:"black"}],duration:10})}return a}},{key:"insert_before",value:function(e,t,a){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.length(),r=[];for(n=0;n<i;n++){var s=this._data[n].id;if(e===s)break;o&&r.push({eles:[s],style:[{"background-color":"black",color:"white"}],lines:[7,8]},{eles:[s],style:[{"background-color":"white",color:"black"}],duration:10})}if(n===i)return r;var d,l=n,p="",u=e;return d=this.type===A.SELECT_SINGLE_LINKED_LIST?0===l?[2,3,4]:[9,10]:0===l?[5,6]:[7,8],l-1>=0&&(p=this._data[l-1].id,r.push({inst:[{name:"remove_edge",data:{source:p,target:u}}],lines:this.type===A.SELECT_DOUBLE_LINKED_LIST?[2,3,4]:void 0,duration:500})),r.push({inst:[{name:"add_node_before",data:{id:t,value:a,pos:l}},{name:"add_edge",data:{source:p,target:t}},{name:"add_edge",data:{source:t,target:u}}],lines:d}),r}},{key:"insert_after",value:function(e,t,a){var n,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.length(),r=[];for(n=0;n<i;n++){var s=this._data[n].id;if(o&&r.push({eles:[s],style:[{"background-color":"black",color:"white"}],duration:500},{eles:[s],style:[{"background-color":"white",color:"black"}],duration:10}),e===s)break}if(n===i)return r;var d,l=n,p=e,u="";return l+1<this.length()&&(u=this._data[l+1].id),l+1<this.length()&&r.push({inst:[{name:"remove_edge",data:{source:p,target:u},duration:500}],lines:this.type===A.SELECT_DOUBLE_LINKED_LIST?[2,3,4]:[2,3]}),d=this.type===A.SELECT_DOUBLE_LINKED_LIST?l===this.length()-1?[5,6]:[7,8]:[4],r.push({inst:[{name:"add_node",data:{id:t,value:a,pos:l}},{name:"add_edge",data:{source:p,target:t}},{name:"add_edge",data:{source:t,target:u}}],lines:d,duration:500}),r}},{key:"delete_position",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.length(),o=[];for(t=0;t<n;t++){var i=this._data[t].id;if(a){var r=void 0;r=e===i&&0===t?[1,2]:[6,7,8],o.push({eles:[i],style:[{"background-color":"black",color:"white"}],duration:1e3,lines:r},{eles:[i],style:[{"background-color":"white",color:"black"}],duration:10})}if(e===i)break}if(t===n)return o;var s,d,l,p=t;if(p>0&&p+1<this.length()&&(s=this._data[p-1].id,d=this._data[p+1].id),this.type===A.SELECT_SINGLE_LINKED_LIST)l=0===p?[3]:[9,10];else if(this.type===A.SELECT_DOUBLE_LINKED_LIST){var u;u=1===this.length()?[2,3]:0===p?[4,5]:p===this.length()-1?[6,7]:[8,9],o.push({eles:[e],style:[{"background-color":"black",color:"white"}],lines:u}),l=[10]}return o.push({inst:[{name:"remove",data:{id:e,value:p,source:s,target:d}}],lines:l,duration:500}),o}}]),e}(),Ke=(a(14),a(18)),ze=(a(12).connect,function(){function e(t,a,n,o){var i=this;Object(s.a)(this,e),this.cy=Ke(),this.vh=void 0,this.vw=void 0,this.list=new Ve,this.buffer=[],this.doublyLinked=void 0,this.removeNode=function(e){i.cy.remove('node[id="'+e+'"]')},this.removeEdge=function(e){i.cy.remove('edge[id="'+e+'"]')},this.vh=a,this.vw=t,this.doublyLinked=n,this.list=new Ve([],o)}return Object(d.a)(e,[{key:"loadGraph",value:function(e,t){this.cy=Ke({elements:JSON.parse(JSON.stringify(e))}),this.list._data=Object(He.a)(t)}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){var a=t.data("prevPosition");a||(a=t.data("position")),e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:t.data("position"),style:t.data("style")},position:a})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight"),style:t.data("style")}})}),e}},{key:"layoutProcessing",value:function(){var e=this.list.length();if(0!==e)for(var t=this.vw/2,a=0;a<e;a++){var n=this.list._data[a].id,o=this.cy.getElementById(n),i=o.data("position");o.data("prevPosition",{x:i.x,y:i.y}),o.data("position",{x:t-35*(e-1)+70*a,y:this.vh/4})}}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e,value:t,position:{x:a.x,y:a.y}}})}},{key:"addEdge",value:function(e,t){this.cy.add({group:"edges",data:{id:e+"-"+t,source:e,target:t,weight:"sig"}})}},{key:"pushStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.buffer.push({elements:this.exportGraph(),lines:e,duration:t,list:this.list._data})}},{key:"processCommands",value:function(e){var t=this;this.cy.nodes().style({"background-color":"white",color:"black"}),this.buffer=[];var a=[],n=0;this.pushStep([],0),console.log(e);for(var o=function(o){var i=e[o],r=i.eles,s=i.style,d=i.duration,l=i.inst,p=i.lines;null==d&&(d=1e3),null==p&&(p=a),t.layoutProcessing(),t.pushStep(a,n),a=p,n=d,r&&r.forEach(function(e,a){s&&t.cy.getElementById(e).data("style",s[a])}),l&&l.forEach(function(e){if(null!=e.data){var a=e.data,n=a.id,o=a.value,i=a.source,r=a.target;if("remove"===e.name)void 0!==n&&t.removeNode(n),null!=i&&null!=r&&t.addEdge(i,r),void 0!==o&&t.list._data.splice(o,1);else if("add"===e.name)void 0!==n&&void 0!==o&&(t.addNode(n,o),t.list._data.push({id:n,value:o}),void 0!==i&&t.addEdge(i,n),void 0!==r&&t.addEdge(n,r));else if("push_back"===e.name){if(null!=n&&null!=o){var s=t.list.length();t.addNode(n,o,{x:t.vw/2+35*s,y:t.vh/4-70}),t.list._data.push({id:n,value:o}),null!=i&&t.addEdge(i,n)}}else if("push_front"===e.name)null!=n&&null!=o&&(t.addNode(n,o,{x:t.vw/2-35*t.list.length(),y:t.vh/4-70}),t.list._data.unshift({id:n,value:o}),null!=r&&t.addEdge(n,r));else if("pop_front"===e.name)null!=n&&(t.removeNode(n),t.list._data.shift());else if("pop_back"===e.name)null!=n&&(t.removeNode(n),t.list._data.pop());else if("add_node_before"===e.name){var d=e.data,l=d.id,p=d.value,u=d.pos;if(null!=l&&null!=p&&null!=u){var c=t.vw/2-35*(t.list.length()-1)+70*u;if(t.addNode(l,p,{x:c,y:t.vh/4-70}),0===u)t.list._data.unshift({id:l,value:p});else{var h,y=t.list._data.splice(u);t.list._data.push({id:l,value:p}),t.list._data=(h=t.list._data).concat.apply(h,Object(He.a)(y))}}}else if("add_node"===e.name){var E=e.data,f=E.id,m=E.value,v=E.pos;if(null!=f&&null!=m&&null!=v){var g=t.vw/2-35*(t.list.length()-1)+70*v;if(t.addNode(f,m,{x:g,y:t.vh/4-70}),++v===t.list.length())t.list._data.push({id:f,value:m});else{var N,_=t.list._data.splice(v);t.list._data.push({id:f,value:m}),t.list._data=(N=t.list._data).concat.apply(N,Object(He.a)(_))}}}else if("add_edge"===e.name){var S=e.data,I=S.source,O=S.target;I&&O&&(console.log("ADD",I,O),t.addEdge(I,O))}else if("remove_edge"===e.name){var A=e.data,b=A.source,R=A.target;b&&R&&(t.removeEdge(b+"-"+R),t.doublyLinked&&t.removeEdge(R+"-"+b))}}})},i=0;i<e.length;i++)o(i);this.layoutProcessing(),this.pushStep(a,n)}},{key:"pushFront",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=0;this.cy.getElementById(t.toString()).length>0;)t++;var a=this.list.push_front({id:t.toString(),value:e});return this.processCommands(a),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"pushBack",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;this.cy.getElementById(a.toString()).length>0;)a++;var n=this.list.push_back({id:a.toString(),value:e},t);return this.processCommands(n),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"popFront",value:function(){var e=this.list.pop_front();return this.processCommands(e),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"popBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.list.pop_back(e);return this.processCommands(t),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"insert",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,i=0;this.cy.getElementById(i.toString()).length>0;)i++;return console.log(o),console.log(this.list._data),e="before"===a?this.list.insert_before(o,i.toString(),t,n):this.list.insert_after(o,i.toString(),t,n),this.processCommands(e),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=this.list.delete_position(t,e);return this.processCommands(a),this.layoutProcessing(),this.pushStep(),this.buffer}}]),e}()),Je=a(18),We=a(14),Ye=a(12).connect,qe={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},Xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._mediaRecorder=new T(a.props.dispatch),a._isMounted=!1,a.list=new Ve,a.undo=[],a.redo=[],a.ListProcessor=void 0,a.layout={run:function(){},stop:function(){}},a.doublyLinked=!1,a.state={showDeleteModal:!1,showPushBeforeModal:!1,showPushBackModal:!1,showPushFrontModal:!1,showPushAfterModal:!1},a.cy=Je(),a.nodeStyle=Object(m.a)({},We.NODE,{shape:"square"}),a.edgeStyle={},a.buffer=[],a.options=[],a.step=0,a.animationTimeout=0,a.handleClickOnNode=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection;if(n&&"node"===n.type)if(a.cy.getElementById(n.id).style(a.nodeStyle),n.id===t)return void a.props.dispatch({type:A.NO_SELECTION});e.style(We.NODE_SELECTED),a.props.dispatch({type:A.SELECTION,payload:{selection:{id:t,type:"node"}}})}},a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({list:JSON.parse(JSON.stringify(a.ListProcessor.list._data)),elements:e}),a.loadGraph(t.elements),a.ListProcessor.loadGraph(t.elements,t.list))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({list:JSON.parse(JSON.stringify(a.ListProcessor.list._data)),elements:e}),a.loadGraph(t.elements),a.ListProcessor.loadGraph(t.elements,t.list))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]')},a.removeEdge=function(e){a.cy.remove('edge[id="'+e+'"]')},a.props.type===A.SELECT_SINGLE_LINKED_LIST||a.props.type===A.SELECT_DOUBLE_LINKED_LIST?a.options=[{name:"Insertar al frente",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushFrontModal:!0})}},{name:"Insertar al final",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushBackModal:!0})}},{name:"Extraer frente",run:function(){return a.popFront()}},{name:"Extraer final",run:function(){return a.popBack(!a.doublyLinked)}},{name:"Insertar antes de",run:function(){return a.props.selection?a.setState({showPushBeforeModal:!0}):a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Insertar despues de",run:function(){return a.props.selection?a.setState({showPushAfterModal:!0}):a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Eliminar nodo",run:function(){return a.remove(!a.doublyLinked)}}]:a.props.type===A.SELECT_STACK?a.options=[{name:"Apilar",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushFrontModal:!0})}},{name:"Desapilar",run:function(){return a.popFront()}}]:a.props.type===A.SELECT_QUEUE&&(a.options=[{name:"Encolar",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushBackModal:!0})}},{name:"Desencolar",run:function(){return a.popFront()}}]),a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"initialize",value:function(e){var t=this;this.edgeStyle=Object(m.a)({},We.EDGE,We.EDGE_DIRECTED),this.doublyLinked&&(this.edgeStyle=Object(m.a)({},this.edgeStyle,We.EDGE_DOUBLE));var a=e.list,n=e.elements;this.cy=Je({container:document.getElementById("canvas"),elements:n,style:[{selector:"node",style:Object(m.a)({},We.NODE,{shape:"square"})},{selector:"edge",style:this.edgeStyle}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.list._data=a,this.cy.on("click","node",function(e){return t.handleClickOnNode(e.target)}),this.cy.on("resize",function(){return t.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(qe),this.layout.run(),this.refreshLayout(!1)}},{key:"componentDidUpdate",value:function(e){var t=this;qe.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){t.loadGraph(t.buffer[t.buffer.length-1].elements),t.props.dispatch({type:A.ANIMATION_END})}}]}})}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.doublyLinked=this.props.type===A.SELECT_DOUBLE_LINKED_LIST,this.list.type=this.props.type,this.initialize({list:[],elements:[]}),this.ListProcessor=new ze(this.cy.width(),this.cy.height(),this.doublyLinked,this.props.type),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue,options:this.options,type:this.props.type}})}},{key:"componentWillUnmount",value:function(){var e=this;this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(t){e.removeNode(t.id())})}},{key:"layoutProcessing",value:function(){var e=this.list.length();if(0!==e)for(var t=this.cy.width()/2,a=0;a<e;a++){var n=this.list._data[a].id;qe.positions[n]={x:t-35*(e-1)+70*a,y:this.cy.height()/4}}}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},qe,{animate:e})),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push({list:JSON.parse(JSON.stringify(this.ListProcessor.list._data)),elements:this.exportGraph()})}},{key:"loadGraph",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cy.nodes(),o={};n.forEach(function(e){a&&(o[e.id()]=JSON.parse(JSON.stringify(e.data("position")))),t.cy.remove(e)});for(var i=0;i<e.length;i++)this.cy.add(JSON.parse(JSON.stringify(e[i])));this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var n=e.data("position");a&&o[e.id()]&&e.position({x:o[e.id()].x,y:o[e.id()].y}),null!=n&&(qe.positions[e.id()]=JSON.parse(JSON.stringify(n)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:{x:t.position().x,y:t.position().y}},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"animation",value:function(){var e=this;!function t(){if(e._isMounted){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(!e.props.animation)return e.cy.nodes().style(e.nodeStyle),e.cy.edges().style(e.edgeStyle),e.props.dispatch({type:A.ANIMATION_END}),void e.cy.autolock(!1);var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration;e.props.paused||(e.loadGraph(n),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed))}}()}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.x,y:a.y}}),qe.positions[e]=a}},{key:"addEdge",value:function(e,t){this.cy.add({group:"edges",data:{id:e+"-"+t,source:e,target:t,weight:"sig"}})}},{key:"pushFront",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.step=0,this.pushState(),this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushFront}}),this.buffer=this.ListProcessor.pushFront(t),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()}))}},{key:"pushBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushBack}}),this.step=0,this.pushState(),this.buffer=this.ListProcessor.pushBack(t,a),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()}))}},{key:"popFront",value:function(){var e=this;if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{if(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popFront}}),0===this.ListProcessor.list.length())return this.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),void this.props.dispatch({type:A.EMPTY_LIST_WARNING});this.step=0,this.pushState(),this.buffer=this.ListProcessor.popFront(),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}}},{key:"popBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popBack}}),0!==this.ListProcessor.list.length()?(this.step=0,this.pushState(),this.buffer=this.ListProcessor.popBack(t),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})):this.props.dispatch({type:A.EMPTY_LIST_WARNING}))}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var a=this.props.selection;if(a){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.remove}}),this.step=0,this.pushState();var n=a.id;this.buffer=this.ListProcessor.remove(t,n),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"insert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var o=this.props.selection;if(o){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:"before"===a?this.props.pseudoset.insertBefore:this.props.pseudoset.insertAfter}}),this.step=0,this.pushState();var i=o.id;this.buffer=this.ListProcessor.insert(t,a,n,i),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{show:this.state.showPushFrontModal,handleClose:function(){return e.setState({showPushFrontModal:!1})},callback:function(t){return e.pushFront(t)}}),o.a.createElement(M,{show:this.state.showPushBackModal,handleClose:function(){return e.setState({showPushBackModal:!1})},callback:function(t){return e.pushBack(t,e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),o.a.createElement(M,{show:this.state.showPushBeforeModal,handleClose:function(){return e.setState({showPushBeforeModal:!1})},callback:function(t){return e.insert(t,"before",e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),o.a.createElement(M,{show:this.state.showPushAfterModal,handleClose:function(){return e.setState({showPushAfterModal:!1})},callback:function(t){return e.insert(t,"after")}}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Qe=Ye(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection,paused:e.paused}})(Xe),$e=function(){function e(){Object(s.a)(this,e),this._data=[]}return Object(d.a)(e,[{key:"isEmpty",value:function(){return 0===this._data.length}},{key:"front",value:function(){return this.isEmpty()?null:this._data[0]}},{key:"push",value:function(e){this._data.push(e)}},{key:"pop",value:function(){this.isEmpty()||this._data.shift()}}]),e}(),Ze=a(14),et=function(e){var t=e.cy,a=e.selection.id,n={},o={},i=new $e,r=[{lines:[1,2],duration:1e3}];i.push(a),o[a]=0,r.push({eles:[a],style:[Ze.NODE_GRAY],inst:[{name:"update_level",data:{id:a,value:0}}],lines:[3,4]});for(var s=function(){r.push({lines:[5]});var e=t.getElementById(i.front());if(i.pop(),"black"===n[e])return"continue";n[e.id()]="black",r.push({eles:[e.id()],style:[Ze.NODE_BLACK],lines:[6,7],inst:[{name:"shift"}]}),e.outgoers("edge").forEach(function(t){var a=t.target();r.push({eles:[t.id()],style:[Ze.EDGE_TRAVERSE],lines:[8]},{lines:[9]}),void 0===n[a.id()]?(n[a.id()]="gray",o[a.id()]=o[e.id()]+1,r.push({eles:[a.id()],style:[Ze.NODE_GRAY],inst:[{name:"update_level",data:{id:a.id(),value:o[a.id()],class:"heap-default"}}],lines:[10,11]},{eles:[t.id()],style:[Ze.EDGE_VISITED],duration:10}),i.push(a.id())):r.push({eles:[t.id()],style:[Ze.EDGE_VISITED],duration:10})})};!i.isEmpty();)s();return r},tt=a(14),at=function(e){var t=e.cy,a=e.selection.id,n=[{lines:[8,9,10]}];return function e(t,a,n,o,i){i[a.id()]=!0,o.push({eles:[a.id()],style:[tt.NODE_GRAY],inst:[{name:"update_level",data:{id:a.id(),value:n}}],lines:[1]}),a.outgoers("edge").forEach(function(a){var r=a.target();o.push({eles:[a.id()],style:[tt.EDGE_TRAVERSE],lines:[2]}),void 0===i[r.id()]?(o.push({lines:[3,4]},{eles:[a.id()],style:[tt.EDGE_VISITED],duration:10}),e(t,r,n+1,o,i)):o.push({eles:[a.id()],style:[tt.EDGE_VISITED],duration:10})}),o.push({eles:[a.id()],style:[tt.NODE_BLACK],inst:[{name:"pop"}],lines:[5]})}(t,t.getElementById(a),0,n,{}),n},nt=a(14),ot=function(e){var t=e.cy,a=e.selection.id,n=new ae(function(e,t){return e.distance<t.distance},function(e,t){return e.distance===t.distance}),o={},i={},r=[];r.push({lines:[1,2]}),o[a]=0,n.push({distance:0,id:a}),r.push({eles:t.nodes().map(function(e){return e.id()}),distance:Array(t.nodes().length).fill("\u221e"),duration:1e3,inst:[{name:"fill",data:{value:"\u221e",class:"heap-default"}}],lines:[3]});for(var s=function(){r.push({lines:[4]});var e=n.top(),a=e.id,s=e.distance;if(n.pop(),i[a])return"continue";i[a]=!0;var d=t.getElementById(a);r.push({eles:[a],distance:[s.toString()],style:[nt.NODE_RED],duration:1e3,inst:[{name:"change_element",position:parseInt(d.data("value"),10)-1,data:{value:s.toString(),class:"heap-wrong"}}],lines:[5]}),d.outgoers("edge").forEach(function(e){var t=e.target(),a=e.data("weight"),i=t.id();r.push({eles:[e.id()],style:[nt.EDGE_TRAVERSE],lines:[6],duration:1e3});var d=o[i];void 0===d&&(d="inf"),void 0===o[i]||s+a<o[i]?(o[i]=s+a,r.push({lines:[7],eles:[i],style:[nt.NODE_GRAY]}),n.push({distance:s+a,id:i}),"inf"!==d&&r.push({eles:[i],distance:[s+a+"\u2264"+d],duration:1e3}),r.push({eles:[i],distance:[s+a],duration:1e3,lines:[8,9],inst:[{name:"change_element",position:parseInt(t.data("value"),10)-1,data:{value:(s+a).toString(),class:"heap-default"}}]})):r.push({eles:[i],distance:[d+"\u2264"+(s+a)],duration:1e3,lines:[8]},{eles:[i],distance:[d],duration:1e3}),r.push({eles:[e.id()],style:[nt.EDGE_VISITED],duration:10})}),r.push({eles:[a],distance:[s.toString()],style:[nt.NODE_BLACK],duration:1e3,inst:[{name:"change_element",position:parseInt(d.data("value"),10)-1,data:{value:s.toString(),class:"heap-default"}}]})};!n.isEmpty();)s();return r},it=a(14),rt=function(e){var t=e.cy,a=t.nodes(),n=t.edges(),o={},i={},r=new ae(function(e,t){return e.weight<=t.weight}),s=[];s.push({eles:a.map(function(e){return e.data("id")}),distance:Array(t.nodes().length).fill("\u221e"),lines:[1,2,3,4,5]},{eles:n.map(function(e){return e.data("id")}),style:Array(t.edges().length).fill(it.EDGE_NO_MST),duration:1e3,lines:[1,2,3,4,5]}),a.forEach(function(e){e.id().match("-popper")||r.push({target:e.id(),edgeId:"NONE",weight:1/0})});for(var d=function(){var e=r.top();r.pop();var a=e.target,n=e.edgeId,d=e.weight;if(i[a])return"continue";d===1/0&&(o[a]=0),s.push({lines:[6],duration:1e3}),i[a]=!0;var l=t.getElementById(a);s.push({eles:[a],style:[it.NODE_RED],duration:1e3,lines:[7,8],inst:[{name:"change_element",position:parseInt(l.data("value"),10)-1,data:{value:o[a].toString(),class:"heap-wrong"}}]}),"NONE"!==n&&(s.push({eles:[n],style:[it.EDGE_MST],lines:[9,10]}),i[n]=!0),t.getElementById(a).connectedEdges().forEach(function(e){if(!i[e.id()]){var n=e.target().id();if(n===a&&(n=e.source().id()),!i[n]){var d,l=e.data("weight");s.push({eles:[e.id()],style:[it.EDGE_TRAVERSE],lines:[11]}),s.push({lines:[12]}),(void 0===o[n]||o[n]>l)&&(s.push({lines:[13,14],eles:[n],style:[it.NODE_GRAY],distance:[l],inst:[{name:"change_element",position:parseInt(t.getElementById(n).data("value"),10)-1,data:{value:l.toString(),class:"heap-default"}}]}),o[n]=l,r.push({target:n,edgeId:e.id(),weight:l})),d=i[e.id()]?it.EDGE_MST:it.EDGE_NO_MST,s.push({eles:[e.id()],style:[d],duration:10})}}}),s.push({inst:[{name:"change_element",position:parseInt(l.data("value"),10)-1,data:{value:void 0===o[a]?"0":o[a].toString(),class:"heap-default"}}]})};!r.isEmpty();)d();return s},st=function(){function e(t){var a=this;Object(s.a)(this,e),this._parent={},t.forEach(function(e){return a._parent[e.id()]=e.id()})}return Object(d.a)(e,[{key:"find",value:function(e){return this._parent[e]===e?e:(this._parent[e]=this.find(this._parent[e]),this._parent[e])}},{key:"join",value:function(e,t){this._parent[this.find(e)]=this.find(t)}},{key:"connected",value:function(e,t){return this.find(e)===this.find(t)}}]),e}(),dt=a(14),lt=function(e){var t=e.cy,a=t.nodes(),n=t.edges(),o=new ae(function(e,t){return e.data("weight")<=t.data("weight")});n.forEach(function(e){return o.push(e)});for(var i=[{eles:n.map(function(e){return e.data("id")}),style:Array(t.edges().length).fill(dt.EDGE_NO_MST),duration:1e3,lines:[1,2]}],r=new st(a);!o.isEmpty();){var s=o.top();o.pop();var d=s.source().id(),l=s.target().id();if(i.push({eles:[s.id()],style:[dt.EDGE_TRAVERSE],duration:1e3,lines:[3]}),r.connected(d,l))i.push({eles:[s.id()],style:[dt.EDGE_NO_MST],duration:1e3,lines:null});else{r.join(d,l),s.data("weight");var p=s.source(),u=s.target();i.push({eles:[s.id(),p.id(),u.id()],style:[dt.EDGE_MST,dt.NODE_RED,dt.NODE_RED],duration:1e3,lines:[4,5]})}}return i},pt={singlySet:{main:[{text:"ListaEnlazada{",ind:0},{text:"Nodo* inicio",ind:1},{text:"ExtraerPrimero()",ind:1},{text:"ExtraerUltimo()",ind:1},{text:"InsertarPrimero(Entero v)",ind:1},{text:"InsertarUltimo(Entero v)",ind:1},{text:"Eliminar(Nodo* p)",ind:1},{text:"InsertarAntesDe(Nodo* p, Entero v)",ind:1},{text:"InsertarDespuesDe(Nodo* p, Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"InsertarPrimero(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si inicio==NULL",ind:1},{text:"inicio=p",ind:2},{text:"Sino:",ind:1},{text:"p->sig=inicio",ind:2},{text:"inicio=p",ind:2}],pushBack:[{text:"InsertarUltimo(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si inicio==NULL",ind:1},{text:"inicio=p",ind:2},{text:"Sino:",ind:1},{text:"nodo *actual = inicio",ind:2},{text:"Mientras(actual->sig != NULL):",ind:2},{text:"actual=actual->sig",ind:3},{text:"actual->sig=p",ind:2}],popFront:[{text:"ExtraerFrente():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"nodo* aux=inicio",ind:1},{text:"inicio=inicio->sig",ind:1},{text:"retornar aux",ind:1}],popBack:[{text:"ExtraerUltimo():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"Si inicio->sig == NULL:",ind:1},{text:"Nodo* aux = inicio",ind:2},{text:"inicio=NULL",ind:2},{text:"retornar aux",ind:2},{text:"nodo *actual = inicio, *anterior",ind:1},{text:"Mientras(actual->sig != NULL):",ind:1},{text:"anterior=actual",ind:2},{text:"actual=actual->sig",ind:2},{text:"anterior->sig=NULL",ind:1},{text:"retornar actual",ind:1}],insertBefore:[{text:"InsertarAntesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si inicio==p",ind:1},{text:"aux->sig=inicio",ind:2},{text:"inicio=aux",ind:2},{text:"sino:",ind:1},{text:"Nodo *actual=inicio",ind:2},{text:"Mientras actual->sig != p:",ind:2},{text:"actual=actual->sig",ind:3},{text:"actual->sig=aux",ind:2},{text:"aux->sig=p",ind:2}],insertAfter:[{text:"InsertarDespuesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *s = p->sig",ind:1},{text:"p->sig=aux",ind:1},{text:"aux->sig=s",ind:1}],remove:[{text:"Eliminar(Nodo *p):",ind:0},{text:"Si inicio==p:",ind:1},{text:"inicio=inicio->sig",ind:2},{text:"borrar p",ind:2},{text:"Sino:",ind:1},{text:"Nodo *actual=incio, *anterior=NULL",ind:2},{text:"Mientras actual != p:",ind:2},{text:"anterior=actual",ind:3},{text:"actual=actual->sig",ind:3},{text:"anterior->sig=p->sig",ind:2},{text:"borrar p",ind:2}]},doublySet:{main:[{text:"ListaDoblementeEnlazada{",ind:0},{text:"Nodo *primero, *ultimo",ind:1},{text:"ExtraerPrimero()",ind:1},{text:"ExtraerUltimo()",ind:1},{text:"InsertarPrimero(Entero v)",ind:1},{text:"InsertarUltimo(Entero v)",ind:1},{text:"Eliminar(Nodo* p)",ind:1},{text:"InsertarAntesDe(Nodo* p, Entero v)",ind:1},{text:"InsertarDespuesDe(Nodo* p, Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *ant, *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"InsertarPrimero(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si primero==NULL",ind:1},{text:"primero=ultimo=p",ind:2},{text:"Sino:",ind:1},{text:"p->sig=primero",ind:2},{text:"primero->ant=p",ind:2},{text:"primero=p",ind:2}],pushBack:[{text:"InsertarUltimo(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si primero==NULL",ind:1},{text:"primero=ultimo=p",ind:2},{text:"Sino:",ind:1},{text:"ultimo->sig=p",ind:2},{text:"p->ant=ultimo",ind:2},{text:"ultimo=p",ind:2}],popFront:[{text:"ExtraerFrente():",ind:0},{text:"Si primero == NULL: retornar",ind:1},{text:"nodo* aux=primero",ind:1},{text:"primero=primero->sig",ind:1},{text:"Si primero==NULL:",ind:1},{text:"ultimo=NULL",ind:2},{text:"Sino:",ind:1},{text:"primero->ant=NULL",ind:2},{text:"retornar aux",ind:1}],popBack:[{text:"ExtraerUltimo():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"nodo* aux=ultimo",ind:1},{text:"ultimo=ultimo->ant",ind:1},{text:"Si ultimo==NULL:",ind:1},{text:"inicio=NULL",ind:2},{text:"Sino:",ind:1},{text:"ultimo->sig=NULL",ind:2},{text:"retornar aux",ind:1}],insertBefore:[{text:"InsertarAntesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *ant = p->ant",ind:1},{text:"aux->sig=p, aux->ant=ant",ind:1},{text:"p->ant=aux",ind:1},{text:"Si ant == NULL:",ind:1},{text:"primero=aux",ind:2},{text:"Sino:",ind:1},{text:"ant->sig=aux",ind:2}],insertAfter:[{text:"InsertarDespuesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *sig = p->sig",ind:1},{text:"aux->ant=p, aux->sig=sig",ind:1},{text:"p->sig=aux",ind:1},{text:"Si sig == NULL:",ind:1},{text:"ultimo=aux",ind:2},{text:"Sino:",ind:1},{text:"sig->ant=aux",ind:2}],remove:[{text:"Eliminar(Nodo *p):",ind:0},{text:"Nodo *ant=p->ant, *sig=p->sig",ind:1},{text:"Caso 1: ant==NULL y sig==NULL:",ind:1},{text:"primero=ultimo=NULL",ind:2},{text:"Caso 2: ant==NULL y sig!=NULL",ind:1},{text:"primero=sig",ind:2},{text:"Caso 3: ant!=NULL y sig==NULL:",ind:1},{text:"ultimo=ant",ind:2},{text:"Caso 4: ant!=NULL y sig!=NULL",ind:1},{text:"ant->sig=sig, sig->ant=ant",ind:2},{text:"borrar p",ind:1}]},queueSet:{main:[{text:"Cola{",ind:0},{text:"Nodo *frente, *final",ind:1},{text:"Encolar(Entero v)",ind:1},{text:"Desencolar()",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[],pushBack:[{text:"Encolar(Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si frente==NULL:",ind:1},{text:"frente=final=aux",ind:2},{text:"Sino:",ind:1},{text:"final->sig=aux",ind:2},{text:"final=aux",ind:2}],popFront:[{text:"Desencolar():",ind:0},{text:"Si frente==NULL: retornar",ind:1},{text:"Nodo *aux = frente->sig"},{text:"Si frente==NULL: ",ind:1},{text:"ultimo=NULL",ind:2},{text:"Sino:",ind:1},{text:"frente=frente->sig",ind:2},{text:"retornar aux",ind:1}],popBack:[],insertBefore:[],insertAfter:[],remove:[]},stackSet:{main:[{text:"Pila{",ind:0},{text:"Nodo *tope",ind:1},{text:"Apilar(Entero v)",ind:1},{text:"Desapilar(Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"Apilar(Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si tope==NULL:",ind:1},{text:"tope=aux",ind:2},{text:"Sino:",ind:1},{text:"aux->sig=tope",ind:2},{text:"tope=aux",ind:2}],pushBack:[],popFront:[{text:"Desapilar():",ind:0},{text:"Si tope==NULL: retornar",ind:1},{text:"Nodo *aux=tope",ind:1},{text:"tope=tope->sig",ind:1},{text:"retornar aux",ind:1}],popBack:[],insertBefore:[],insertAfter:[],remove:[]}},ut={BFS:{execute:et,directed:!0,action:A.SELECT_BFS},DFS:{execute:at,directed:!0,action:A.SELECT_DFS},Dijkstra:{execute:ot,directed:!0,weighted:!0,action:A.SELECT_DIJKSTRA},Prim:{execute:rt,directed:!1,weighted:!0,action:A.SELECT_PRIM},Kruskal:{execute:lt,directed:!1,weighted:!0,action:A.SELECT_KRUSKAL},Heap:{action:A.SELECT_HEAP},AVL:{action:A.SELECT_AVL},BubbleSort:{action:A.SELECT_BUBBLESORT},MergeSort:{action:A.SELECT_MERGESORT},BinarySearch:{action:A.SELECT_BINARY_SEARCH},SingleLinkedList:{action:A.SELECT_LINKED_LIST,type:A.SELECT_SINGLE_LINKED_LIST,pseudoset:pt.singlySet},DoubleLinkedList:{action:A.SELECT_LINKED_LIST,type:A.SELECT_DOUBLE_LINKED_LIST,pseudoset:pt.doublySet},Stack:{action:A.SELECT_LINKED_LIST,type:A.SELECT_STACK,pseudoset:pt.stackSet},Queue:{action:A.SELECT_LINKED_LIST,type:A.SELECT_QUEUE,pseudoset:pt.queueSet}},ct=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);for(var n=t.length,o=[],i=0;i<n;i++){o.push({eles:[],style:[],lines:[1,2]});for(var r=!0,s=0;s<n-1;s++){var d=void 0,l=!1;if(t[s]>t[s+1]){r=!1,l=!0;var p=[t[s+1],t[s]];t[s]=p[0],t[s+1]=p[1],d="LightCoral"}else d="Chartreuse";o.push({eles:[s.toString(),(s+1).toString()],style:[{"background-color":d},{"background-color":d}],duration:1e3,lines:[4]},{eles:[s.toString(),(s+1).toString()],style:[{"background-color":"white"},{"background-color":"white"}],data:[{value:t[s]},{value:t[s+1]}],duration:1e3,lines:l?[5,6]:[3]}),l&&o.push({eles:[],style:[],lines:[3]})}if(r){o.push({eles:[],style:[],lines:[7]});break}}return o},ht=a(12).connect,yt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.handleAccept=function(){if(a.input&&a.validateArray(a.input.value)){var e=a.input.value.split(",").map(function(e){return parseInt(e)});console.log(e),a.props.changeArray(e),a.props.handleClose()}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.setState({text:a.props.currentValues.toString()}),a.props.handleClose()},a.input=null,a.state={text:a.props.currentValues.toString()},a.setStepInputRef=function(e){a.input=e},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){return!(!e||!/^(([-]?([0-9]{1,3})([,][ ]*)){0,15})([-]?([0-9]{1,3}))$/.test(e))||(this.props.dispatch({type:A.INVALID_ARRAY_ERROR}),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return o.a.createElement(x.a,{show:a,onHide:n},o.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},o.a.createElement(x.a.Title,null,"Introduzca un arreglo de enteros")),o.a.createElement(x.a.Body,null,o.a.createElement("p",null,"Debe estar representado por maximo 16 numeros separados por coma"),o.a.createElement("p",null,"Cada numero debe estar entre -999 y 999"),o.a.createElement("input",{type:"text",ref:this.setStepInputRef,value:this.state.text,size:60,onChange:function(t){return e.handleChange(t)}})),o.a.createElement(x.a.Footer,null,o.a.createElement(k.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),o.a.createElement(k.a,{variant:"primary",onClick:this.handleAccept},"Aceptar")))}}]),t}(o.a.Component),Et=ht()(yt),ft=a(14),mt=a(18),vt=a(12).connect,gt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=mt(),a.undo=[],a.redo=[],a.state={show:!1,values:[1,4,8,1,4,3,6,9,10,-1]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=ft.NODE,a.options=void 0,a.buffer=[],a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(console.log("UNDO"),0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}})},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BUBBLESORT_INFO}),a.step=0,a.animation()},a.runButton=function(){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),void a.valuesToGraph();new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START});var n=ct(a.state.values);a.buffer=F(a.exportGraph(),n),e()}).then(function(){setTimeout(a.executeAnimation,1e3/a.props.speed)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){a.setState({values:e})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ordenar",run:a.runButton},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.valuesToGraph(),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue}})}},{key:"componentDidUpdate",value:function(e,t){t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(e){var t=e.id(),a=document.getElementById(t+"popper");a&&document.body.removeChild(a)})}},{key:"initialize",value:function(e){this.cy=mt({container:document.getElementById("canvas"),elements:e,style:[{selector:"node",style:Object(m.a)({},ft.NODE,{shape:"square"})}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(He.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)})}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"animation",value:function(){var e=this;!function t(){if(e.step===e.buffer.length)return e.props.dispatch({type:A.ARRAY_SORTED_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration;o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),e.props.paused||(e.loadGraph(n),e.refreshLayout(),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed))}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){var e=this,t=this.state.values;this.cy.nodes().forEach(function(t){return e.cy.remove(t)});for(var a=0;a<t.length;a++)this.addNode(a.toString(),t[a]),this.refreshLayout()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Et,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Nt=vt(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(gt),_t=function(e,t,a){var n=[],o=t/2;return function e(t,a,o,i,r){var s=Object(He.a)(t),d=s.length,l=[],p=[],u=[],c=[],h=[],y=[],E={nodes:[],duration:1e3,style:[]},f=(o+i)/2;if(s.forEach(function(e,t){l.push({id:(a+t).toString()}),c.push({x:f-17.5*(d-1)+35*t,y:r}),p.push({"border-width":"3"}),u.push({"border-width":"1"}),h.push({id:(a+t).toString()+"-"+r.toString(),value:"+",position:{x:f-17.5*(d-1)+35*t,y:r}}),y.push({id:(a+t).toString()+"-"+r.toString(),value:"-"})}),n.push({nodes:l,style:p,positions:c}),n.push({shadows:h,duration:10}),1===d)return n.push({nodes:[],lines:[1,2],shadows:[{id:a+"-"+r,value:"-"}]}),s;var m=Math.floor((d+1)/2);n.push({nodes:[],lines:[3]}),n.push({nodes:l,style:u,duration:10});var v=e(s.slice(0,m),a,o,(o+i)/2,r+50);n.push({nodes:l,style:p,duration:10}),n.push({nodes:[],lines:[4]}),n.push({nodes:l,style:u,duration:10});var g=e(s.slice(m),a+m,(o+i)/2,i,r+50);n.push({nodes:l,style:p,duration:10});var N=0,_=0;n.push({nodes:[],lines:[5]},{nodes:[],lines:[8,9]});for(var S=0;S<d;S++){var I=f-17.5*(d-1)+35*S;E={nodes:[],duration:1e3},_==g.length||N<v.length&&v[N].value<=g[_].value?(E.nodes=[{id:v[N].id}],E.lines=[11,12],E.positions=[{x:I,y:r}],s[S]=v[N++]):(E.nodes=[{id:g[_].id}],E.positions=[{x:I,y:r}],s[S]=g[_++],E.lines=[13,14]),n.push(E)}return n.push({nodes:[],lines:[15]}),n.push({nodes:[],lines:[5]}),n.push({nodes:l,style:u,shadows:y}),s}(e=e.map(function(e,t){return{value:e,id:t.toString()}}),0,o-35*e.length,o+35*e.length,a/4),n},St=(a(14),a(18)),It=(a(12).connect,function(e){var t=[];return e.nodes().forEach(function(e){var a=e.data("prevPosition");a||(a=e.data("position")),t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),style:e.data("style"),position:e.data("position")},position:a}),e.data("prevPosition",e.data("position"))}),e.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),console.log(JSON.parse(JSON.stringify(t))),JSON.parse(JSON.stringify(t))}),Ot=function(e,t){for(var a=St({elements:JSON.parse(JSON.stringify(e)),headless:!0}),n=[],o=[],i=0,r=function(e){var r=t[e],s=r.nodes,d=r.duration,l=r.lines,p=r.style,u=r.positions,c=r.shadows;null==d&&(d=1e3),null==l&&(l=[]),n.push({elements:It(a),lines:o,duration:i}),o=l,i=d,s&&s.forEach(function(e,t){var n=a.getElementById(e.id);n.data("prevPosition",n.data("position"));var o=n.data("style");p&&n.data("style",Object(m.a)({},o,p[t])),u&&n.data("position",u[t])}),c&&c.forEach(function(e){"+"===e.value?function(e,t,a){console.log("adding shadow"),e.add({group:"nodes",data:{id:t,style:{zIndex:1},position:{x:a.x,y:a.y}},position:{x:a.x,y:a.y}}),console.log("shadow added",e.nodes())}(a,e.id,e.position):a.remove('node[id="'+e.id+'"]')})},s=0;s<t.length;s++)r(s);return n.push({elements:It(a),lines:o,duration:0}),n},At=a(14),bt=a(18),Rt=a(12).connect,Tt={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},Lt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=bt(),a.state={show:!1,values:[4,8,12,16,10,4,45,17]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=Object(m.a)({},At.NODE,{shape:"square",zIndex:2}),a.options=void 0,a.buffer=[],a.undo=[],a.redo=[],a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}}),Tt.positions[e]={x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}},a.addShadow=function(e,t){a.cy.add({group:"nodes",data:{id:e},style:{"z-index":1},position:t}),Tt.positions[e]=t},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BUBBLESORT_INFO}),a.step=0,a.animation()},a.runButton=function(){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),void a.valuesToGraph();new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START});var n=_t(a.state.values,a.cy.width(),a.cy.height());a.buffer=Ot(a.exportGraph(),n),e()}).then(function(){setTimeout(a.executeAnimation,1e3/a.props.speed)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){a.setState({values:e})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ordenar",run:a.runButton},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.valuesToGraph(),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}})}},{key:"componentDidUpdate",value:function(e,t){Tt.animationDuration=500/this.props.speed,t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1}},{key:"initialize",value:function(e){this.cy=bt({container:document.getElementById("canvas"),elements:JSON.parse(JSON.stringify(e)),style:[{selector:"node",style:this.nodeStyle}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),Tt.positions={},this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout(Tt),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(He.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var a=e.data("position");null!=a&&(Tt.positions[e.id()]=JSON.parse(JSON.stringify(a)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),zIndex:a.style("z-index"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},Tt,{animate:!0})),this.layout.run()}},{key:"animation",value:function(){var e=this;!function t(){if(console.log(e.props.paused),e.step===e.buffer.length)return e.props.dispatch({type:A.ARRAY_SORTED_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,o=a.lines,i=a.duration;e.props.paused||(e.loadGraph(n),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),console.log(i),e.animationTimeout=window.setTimeout(t,(void 0===i?1e3:i)/e.props.speed))}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){for(var e=this.state.values,t=0;t<e.length;t++)this.addNode(t.toString(),e[t]);this.refreshLayout()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Et,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),xt=Rt(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(Lt),kt=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);for(var n=t.length,o=0;o<n;o++){for(var i=!0,r=0;r<n-1;r++)if(t[r]>t[r+1]){i=!1;var s=[t[r+1],t[r]];t[r]=s[0],t[r+1]=s[1]}if(i)break}return t},Ct=function(e,t){for(var a=kt(e),n=a.length,o=Array(n).fill().map(function(e,t){return t.toString()}),i=Array(n).fill({"border-width":1,"z-index":0}),r=[],s=0,d=n-1,l=!1;s<=d;){r.push({eles:o,style:i,duration:0});for(var p={eles:[],style:[]},u=s;u<=d;u++)p.eles.push(u.toString()),p.style.push({"border-width":3,"z-index":1});r.push(p);var c=Math.floor((s+d)/2);if(r.push({eles:[c.toString()],style:[{"background-color":"gray","z-index":2}],lines:[3]}),r.push({lines:t<a[c]?[6,7]:a[c]<t?[8,9]:[4,5]}),a[c]===t){r.push({eles:[c.toString()],style:[{"background-color":"lightgreen"}],lines:[4,5]}),l=!0;break}r.push({eles:[c.toString()],style:[{"background-color":"white","z-index":1}],duration:10}),a[c]<t?s=c+1:d=c-1}return l||r.push({eles:[],style:[],lines:[10]}),r},wt=a(14),Dt=a(18),Gt=a(12).connect,Pt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=Dt(),a.undo=[],a.redo=[],a.state={show:!1,showInputModal:!1,values:[1,2,3,4,5,6,7,8]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=wt.NODE,a.options=void 0,a.buffer=[],a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(He.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}})},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BINARY_SEARCH_INFO}),a.step=0,a.animation()},a.runButton=function(e){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),void a.valuesToGraph();new Promise(function(t,n){a.props.dispatch({type:A.ANIMATION_START});var o=Ct(a.state.values,e);a.buffer=F(a.exportGraph(),o),t(a.cy.nodes("[value = "+e+"]").length>0)}).then(function(e){setTimeout(a.executeAnimation,1e3/a.props.speed,e)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){var t=kt(e);a.setState({values:t})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Buscar",run:function(){return a.setState({showInputModal:!0})}},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}}),this.initialize([]),this.valuesToGraph()}},{key:"componentDidUpdate",value:function(e,t){t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),this._isMounted=!1,clearTimeout(this.animationTimeout),this.cy.nodes().forEach(function(e){var t=e.id(),a=document.getElementById(t+"popper");a&&document.body.removeChild(a)})}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(He.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)})}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"animation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function a(){if(e.step===e.buffer.length)return e.props.dispatch({type:t?A.BINARY_SEARCH_FOUND_SUCCESS:A.BINARY_SEARCH_NOT_FOUND_INFO}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){if(!e.props.paused){var n=e.buffer[e.step++],o=n.elements,i=n.lines,r=n.duration;e.loadGraph(o),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),e.refreshLayout(),e.animationTimeout=window.setTimeout(a,(void 0===r?1e3:r)/e.props.speed)}}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){var e=this,t=this.state.values;this.cy.nodes().forEach(function(t){return e.cy.remove(t)});for(var a=0;a<t.length;a++)this.addNode(a.toString(),t[a]),this.refreshLayout()}},{key:"initialize",value:function(e){this.cy=Dt({container:document.getElementById("canvas"),elements:e,style:[{selector:"node",style:Object(m.a)({},wt.NODE,{shape:"square"})}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{show:this.state.showInputModal,handleClose:function(){return e.setState({showInputModal:!1})},callback:function(t){return e.runButton(t)},currentValue:0}),o.a.createElement(Et,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Mt=Gt(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(Pt),Bt=a(18),Ut=a(14),jt=a(12).connect,Ft={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},Ht=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o))))._mediaRecorder=new T(a.props.dispatch),a._isMounted=!1,a.list=new Ve,a.undo=[],a.redo=[],a.layout={run:function(){},stop:function(){}},a.doublyLinked=!1,a.state={showDeleteModal:!1,showPushBeforeModal:!1,showPushBackModal:!1,showPushFrontModal:!1,showPushAfterModal:!1},a.cy=Bt(),a.nodeStyle=Object(m.a)({},Ut.NODE,{shape:"square"}),a.edgeStyle={},a.handleClickOnNode=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection;if(n&&"node"===n.type)if(a.cy.getElementById(n.id).style(a.nodeStyle),n.id===t)return void a.props.dispatch({type:A.NO_SELECTION});e.style(Ut.NODE_SELECTED),a.props.dispatch({type:A.SELECTION,payload:{selection:{id:t,type:"node"}}})}},a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({list:Object(He.a)(a.list._data),elements:e}),a.initialize(t))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({list:Object(He.a)(a.list._data),elements:e}),a.initialize(t))}},a.executeAnimation=function(e){a.cy.nodes().style({"background-color":"white",color:"black"});!function(){var t=0;!function n(){if(a._isMounted)if(t!==e.length){if(!a.props.animation)return a.cy.nodes().style(a.nodeStyle),a.cy.edges().style(a.edgeStyle),void a.props.dispatch({type:A.ANIMATION_END});var o=e[t++],i=o.eles,r=o.style,s=o.duration,d=o.inst,l=o.lines;i&&i.forEach(function(e,t){r&&a.cy.getElementById(e).style(r[t])}),d&&d.forEach(function(e){if(null!=e.data){var t=e.data,n=t.id,o=t.value,i=t.source,r=t.target;if("remove"===e.name)void 0!==n&&a.removeNode(n),null!=i&&null!=r&&a.addEdge(i,r),void 0!==o&&a.list._data.splice(o,1);else if("add"===e.name)void 0!==n&&void 0!==o&&(a.addNode(n,o),a.list._data.push({id:n,value:o}),void 0!==i&&a.addEdge(i,n),void 0!==r&&a.addEdge(n,r));else if("push_back"===e.name){if(null!=n&&null!=o){var s=a.list.length();a.addNode(n,o,{x:a.cy.width()/2+35*s,y:a.cy.height()/4-70}),a.list._data.push({id:n,value:o}),null!=i&&a.addEdge(i,n)}}else if("push_front"===e.name)null!=n&&null!=o&&(a.addNode(n,o,{x:a.cy.width()/2-35*a.list.length(),y:a.cy.height()/4-70}),a.list._data.unshift({id:n,value:o}),null!=r&&a.addEdge(n,r));else if("pop_front"===e.name)null!=n&&(a.removeNode(n),a.list._data.shift());else if("pop_back"===e.name)null!=n&&(a.removeNode(n),a.list._data.pop());else if("add_node_before"===e.name){var d=e.data,l=d.id,p=d.value,u=d.pos;if(null!=l&&null!=p&&null!=u){var c=a.cy.width()/2-35*(a.list.length()-1)+70*u;if(a.addNode(l,p,{x:c,y:a.cy.height()/4-70}),0===u)a.list._data.unshift({id:l,value:p});else{var h,y=a.list._data.splice(u);a.list._data.push({id:l,value:p}),a.list._data=(h=a.list._data).concat.apply(h,Object(He.a)(y))}}}else if("add_node"===e.name){var E=e.data,f=E.id,m=E.value,v=E.pos;if(null!=f&&null!=m&&null!=v){var g=a.cy.width()/2-35*(a.list.length()-1)+70*v;if(a.addNode(f,m,{x:g,y:a.cy.height()/4-70}),++v===a.list.length())a.list._data.push({id:f,value:m});else{var N,_=a.list._data.splice(v);a.list._data.push({id:f,value:m}),a.list._data=(N=a.list._data).concat.apply(N,Object(He.a)(_))}}}else if("add_edge"===e.name){var S=e.data,I=S.source,O=S.target;I&&O&&(console.log("ADD",I,O),a.addEdge(I,O))}else if("remove_edge"===e.name){var A=e.data,b=A.source,R=A.target;b&&R&&(a.removeEdge(b+"-"+R),a.doublyLinked&&a.removeEdge(R+"-"+b))}}}),null!=l&&a._isMounted&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:l}}),a.refreshLayout(),setTimeout(n,(void 0===s?500:s)/a.props.speed)}else a.props.dispatch({type:A.ANIMATION_END})}()}()},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]')},a.removeEdge=function(e){a.cy.remove('edge[id="'+e+'"]')},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"initialize",value:function(e){var t=this;this.edgeStyle=Object(m.a)({},Ut.EDGE,Ut.EDGE_DIRECTED),this.doublyLinked&&(this.edgeStyle=Object(m.a)({},this.edgeStyle,Ut.EDGE_DOUBLE));var a=e.list,n=e.elements;this.cy=Bt({container:document.getElementById("canvas"),elements:n,style:[{selector:"node",style:Object(m.a)({},Ut.NODE,{shape:"square"})},{selector:"edge",style:this.edgeStyle}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,wheelSensitivity:1,pixelRatio:"1.0",autoungrabify:!0}),this.list._data=a,this.cy.on("click","node",function(e){return t.handleClickOnNode(e.target)}),this.cy.on("resize",function(){return t.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(Ft),this.layout.run(),this.refreshLayout(!1)}},{key:"componentDidUpdate",value:function(){Ft.animationDuration=500/this.props.speed}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.doublyLinked=this.props.type===A.SELECT_DOUBLE_LINKED_LIST,this.list.type=this.props.type,this.initialize({list:[],elements:[]});var t=[];this.props.type===A.SELECT_SINGLE_LINKED_LIST||this.props.type===A.SELECT_DOUBLE_LINKED_LIST?t=[{name:"Insertar al frente",run:function(){return e.props.animation?e.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):e.setState({showPushFrontModal:!0})}},{name:"Insertar al final",run:function(){return e.props.animation?e.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):e.setState({showPushBackModal:!0})}},{name:"Extraer frente",run:function(){return e.popFront()}},{name:"Extraer final",run:function(){return e.popBack(!e.doublyLinked)}},{name:"Insertar antes de",run:function(){return e.props.selection?e.setState({showPushBeforeModal:!0}):e.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Insertar despues de",run:function(){return e.props.selection?e.setState({showPushAfterModal:!0}):e.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Eliminar nodo",run:function(){return e.remove(!e.doublyLinked)}}]:this.props.type===A.SELECT_STACK?t=[{name:"Apilar",run:function(){return e.props.animation?e.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):e.setState({showPushFrontModal:!0})}},{name:"Desapilar",run:function(){return e.popFront()}}]:this.props.type===A.SELECT_QUEUE&&(t=[{name:"Encolar",run:function(){return e.props.animation?e.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):e.setState({showPushBackModal:!0})}},{name:"Desencolar",run:function(){return e.popFront()}}]),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:t,type:this.props.type}})}},{key:"layoutProcessing",value:function(){var e=this.list.length();if(0!==e)for(var t=this.cy.width()/2,a=0;a<e;a++){var n=this.list._data[a].id;Ft.positions[n]={x:t-35*(e-1)+70*a,y:this.cy.height()/4}}}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layout.stop(),this.layoutProcessing(),this.layout=this.cy.elements().makeLayout(Object(m.a)({},Ft,{animate:e})),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push({list:Object(He.a)(this.list._data),elements:this.exportGraph()})}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:{x:t.position().x,y:t.position().y}},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.x,y:a.y}}),Ft.positions[e]=a}},{key:"addEdge",value:function(e,t){this.cy.add({group:"edges",data:{id:e+"-"+t,source:e,target:t,weight:"sig"}})}},{key:"pushBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushBack}}),this.pushState();for(var n=0;this.cy.getElementById(n.toString()).length>0;)n++;new Promise(function(o,i){e.props.dispatch({type:A.ANIMATION_START}),o(e.list.push_back({id:n.toString(),value:t},a))}).then(function(t){e.executeAnimation(t)})}}},{key:"pushFront",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{this.pushState(),this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushFront}});for(var a=0;this.cy.getElementById(a.toString()).length>0;)a++;new Promise(function(n,o){e.props.dispatch({type:A.ANIMATION_START}),n(e.list.push_front({id:a.toString(),value:t}))}).then(function(t){e.executeAnimation(t)})}}},{key:"popFront",value:function(){var e=this;this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):0!==this.list.length()?(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popFront}}),this.pushState(),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t(e.list.pop_front())}).then(function(t){e.executeAnimation(t)})):this.props.dispatch({type:A.EMPTY_LIST_WARNING})}},{key:"popBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):0!==this.list.length()?(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popBack}}),this.pushState(),new Promise(function(a,n){e.props.dispatch({type:A.ANIMATION_START}),a(e.list.pop_back(t))}).then(function(t){e.executeAnimation(t)})):this.props.dispatch({type:A.EMPTY_LIST_WARNING})}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var a=this.props.selection;if(a){if(!this.props.animation){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.remove}}),this.pushState();var n=a.id;new Promise(function(a,o){e.props.dispatch({type:A.ANIMATION_START}),a(e.list.delete_position(n,t))}).then(function(t){e.executeAnimation(t)})}}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"insert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var o=this.props.selection;if(o){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:"before"===a?this.props.pseudoset.insertBefore:this.props.pseudoset.insertAfter}}),this.pushState();for(var i=o.id,r=0;this.cy.getElementById(r.toString()).length>0;)r++;new Promise(function(o,s){e.props.dispatch({type:A.ANIMATION_START}),o("before"===a?e.list.insert_before(i,r.toString(),t,n):e.list.insert_after(i,r.toString(),t,n))}).then(function(t){e.executeAnimation(t)})}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement(M,{show:this.state.showPushFrontModal,handleClose:function(){return e.setState({showPushFrontModal:!1})},callback:function(t){return e.pushFront(t)}}),o.a.createElement(M,{show:this.state.showPushBackModal,handleClose:function(){return e.setState({showPushBackModal:!1})},callback:function(t){return e.pushBack(t,e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),o.a.createElement(M,{show:this.state.showPushBeforeModal,handleClose:function(){return e.setState({showPushBeforeModal:!1})},callback:function(t){return e.insert(t,"before",e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),o.a.createElement(M,{show:this.state.showPushAfterModal,handleClose:function(){return e.setState({showPushAfterModal:!1})},callback:function(t){return e.insert(t,"after")}}),o.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(o.a.Component),Vt=(jt(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection}})(Ht),{BFS:"/bfs",DFS:"/dfs",Dijkstra:"/dijkstra",Kruskal:"/kruskal",Prim:"/prim",BubbleSort:"/bubblesort",MergeSort:"/mergesort",BinarySearch:"/busqueda-binaria",SingleLinkedList:"/lista-enlazada",DoubleLinkedList:"/lista-doblemente-enlazada",Queue:"/cola",Stack:"/pila",MinHeap:"/minheap",AVL:"/avl"}),Kt=a(45),zt=Kt.HashRouter,Jt=Kt.Route,Wt=(Kt.Switch,function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).call(this,e))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement(zt,null,o.a.createElement(E.a,null,o.a.createElement(f.a,null,o.a.createElement(Jt,{path:Vt.BFS,render:function(){return o.a.createElement(Y,ut.BFS)}}),o.a.createElement(Jt,{path:Vt.DFS,render:function(){return o.a.createElement(Y,ut.DFS)}}),o.a.createElement(Jt,{path:Vt.Dijkstra,render:function(){return o.a.createElement(Y,ut.Dijkstra)}}),o.a.createElement(Jt,{path:Vt.Prim,render:function(){return o.a.createElement(Y,ut.Prim)}}),o.a.createElement(Jt,{path:Vt.Kruskal,render:function(){return o.a.createElement(Y,ut.Kruskal)}}),o.a.createElement(Jt,{path:Vt.MinHeap,render:function(){return o.a.createElement(ue,ut.Heap)}}),o.a.createElement(Jt,{path:Vt.AVL,render:function(){return o.a.createElement(Fe,ut.AVL)}}),o.a.createElement(Jt,{path:Vt.BubbleSort,render:function(){return o.a.createElement(Nt,ut.BubbleSort)}}),o.a.createElement(Jt,{path:Vt.MergeSort,render:function(){return o.a.createElement(xt,ut.MergeSort)}}),o.a.createElement(Jt,{path:Vt.BinarySearch,render:function(){return o.a.createElement(Mt,ut.BinarySearch)}}),o.a.createElement(Jt,{path:Vt.SingleLinkedList,render:function(){return o.a.createElement(Qe,ut.SingleLinkedList)}}),o.a.createElement(Jt,{path:Vt.DoubleLinkedList,render:function(){return o.a.createElement(Qe,ut.DoubleLinkedList)}}),o.a.createElement(Jt,{path:Vt.Queue,render:function(){return o.a.createElement(Qe,ut.Queue)}}),o.a.createElement(Jt,{path:Vt.Stack,render:function(){return o.a.createElement(Qe,ut.Stack)}}))))}}]),t}(o.a.Component)),Yt=a(45),qt=Yt.NavLink,Xt=Yt.HashRouter,Qt=((0,a(12).connect)(function(e){return{algorithm:e.algorithm}})(function(e){for(var t=[{name:"BFS"},{name:"DFS"},{name:"Dijkstra"},{name:"Prim"},{name:"Kruskal"},{name:"Heap"},{name:"AVL"},{name:"BubbleSort"},{name:"MergeSort"}],a=[],n=0;n<t.length;n++)a.push(o.a.createElement(qt,{to:"/"+t[n].name},o.a.createElement("li",{className:t[n].name===e.algorithm?"active":"normal"},t[n].name)));return o.a.createElement(Xt,null,o.a.createElement("ul",null,a))}),[{text:"BFS(Grafo G(V,E), nodo inicio):",ind:0},{text:"Para cada nodo u \u2208 V:",ind:1},{text:"color[u]=Blanco",ind:2},{text:"color[inicio]=Gris:",ind:1},{text:"encolar(cola, inicio)",ind:1},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer(cola)",ind:2},{text:"color[u]=Negro",ind:2},{text:"Para cada v adyacente a u:",ind:2},{text:"Si color[v] es Blanco:",ind:3},{text:"color[v]=Gris",ind:4},{text:"encolar(cola, v)",ind:4}]),$t=function(e){var t=e.op,a=Array();return t.forEach(function(e){var t=e.name,n=e.run;a.push(o.a.createElement("button",{onClick:n},t))}),o.a.createElement(o.a.Fragment,null,a)},Zt=(0,a(12).connect)(function(e){return{speed:e.speed}})(function(e){return o.a.createElement(E.a,null,o.a.createElement(f.a,{xs:12},o.a.createElement("div",{className:"slidecontainer"},o.a.createElement("input",{type:"range",min:"0.25",max:"5",value:e.speed,id:"myRange",step:"0.05",onChange:function(t){e.dispatch({type:A.CHANGE_SPEED,payload:{speed:t.currentTarget.value}})},className:"slider"}))))}),ea=a(29),ta=a(26),aa=a(12).connect,na={BFS:"BFS",DFS:"DFS",Dijkstra:"Dijkstra",Prim:"Prim",Kruskal:"Kruskal",Heap:"Min Heap",AVL:"Arbol AVL",BubbleSort:"Bubble Sort",MergeSort:"Merge Sort",BinarySearch:"Busqueda Binaria",SingleLinkedList:"Lista enlazada",DoubleLinkedList:"Lista doble",Queue:"Cola",Stack:"Pila"},oa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={showActions:!0},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props.algorithm);var t,a=this.props,n=a.animation,i=a.paused;return t=n?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:i?"Continuar":"Pausa",className:"dropdown-button",onClick:this.props.pause},o.a.createElement(ea.a,{icon:i?ta.d:ta.c,size:"lg"}))),o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:"Repetir",className:"dropdown-button",onClick:this.props.repeat},o.a.createElement(ea.a,{icon:ta.e,size:"lg"}))),o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:"Retroceder",className:"dropdown-button",onClick:this.props.rewind},o.a.createElement(ea.a,{icon:ta.a,size:"lg"}))),o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:"Avanzar",className:"dropdown-button",onClick:this.props.forward},o.a.createElement(ea.a,{icon:ta.b,size:"lg"}))),o.a.createElement(f.a,{md:{span:2,offset:2}},o.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.props.dispatch({type:A.TOGGLE_PSEUDO})}},"Pseudocodigo"))):o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:"Deshacer",className:"dropdown-button",onClick:this.props.undo},o.a.createElement(ea.a,{icon:ta.f,size:"lg"}))),o.a.createElement(f.a,{md:1},o.a.createElement("button",{title:"Rehacer",className:"dropdown-button",onClick:this.props.redo},o.a.createElement(ea.a,{icon:ta.e,size:"lg"}))),o.a.createElement(f.a,{md:{span:2,offset:4}},o.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.props.dispatch({type:A.TOGGLE_PSEUDO})}},"Pseudocodigo"))),o.a.createElement("div",{className:"footer"},"none"!==this.props.algorithm&&o.a.createElement(E.a,null,o.a.createElement(f.a,{md:2},o.a.createElement("div",{className:"dropup"},o.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.setState({showActions:!e.state.showActions})}},na[this.props.algorithm]),this.state.showActions&&o.a.createElement("div",{className:"actions-menu"},o.a.createElement($t,{op:this.props.options})))),o.a.createElement(f.a,{md:2},o.a.createElement("span",null,"Velocidad"),o.a.createElement(Zt,null)),t))}}]),t}(o.a.Component),ia=aa(function(e){return Object(m.a)({},e)})(oa),ra=a(12).connect,sa=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(){a.props.dispatch({type:A.PHOTO_SUCCESS}),a.props.callback()},a}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{className:"dropdown-button",onClick:this.handleClick},"Foto")}}]),t}(o.a.Component),da=ra()(sa),la=a(12).connect,pa=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"handleClick",value:function(){this.props.callback()}},{key:"render",value:function(){var e=this,t=this.props.timeEllapsed,a=Math.floor(t/10).toString(),n=(t%10).toString();return 1===a.length&&(a="0"+a),o.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.handleClick()}},"GIF 0:",a,":",n)}}]),t}(o.a.Component),ua=la(function(e){return{timeEllapsed:e.gifLength}})(pa),ca=a(12).connect,ha=a(45),ya=ha.NavLink,Ea=ha.HashRouter,fa=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=[o.a.createElement(ya,{to:Vt.BFS},o.a.createElement("button",{className:"dropdown-button"},"BFS")),o.a.createElement(ya,{to:Vt.DFS},o.a.createElement("button",{className:"dropdown-button"},"DFS")),o.a.createElement(ya,{to:Vt.Dijkstra},o.a.createElement("button",{className:"dropdown-button"},"Dijkstra"))],t=[o.a.createElement(ya,{to:Vt.Kruskal},o.a.createElement("button",{className:"dropdown-button"},"Kruskal")),o.a.createElement(ya,{to:Vt.Prim},o.a.createElement("button",{className:"dropdown-button"},"Prim"))],a=[o.a.createElement(ya,{to:Vt.BubbleSort},o.a.createElement("button",{className:"dropdown-button"},"Bubble Sort")),o.a.createElement(ya,{to:Vt.MergeSort},o.a.createElement("button",{className:"dropdown-button"},"Merge Sort")),o.a.createElement(ya,{to:Vt.BinarySearch},o.a.createElement("button",{className:"dropdown-button"},"Busqueda Binaria"))],n=[o.a.createElement(ya,{to:Vt.SingleLinkedList},o.a.createElement("button",{className:"dropdown-button"},"Lista enlazada")),o.a.createElement(ya,{to:Vt.Queue},o.a.createElement("button",{className:"dropdown-button"},"Cola")),o.a.createElement(ya,{to:Vt.Stack},o.a.createElement("button",{className:"dropdown-button"},"Pila")),o.a.createElement(ya,{to:Vt.DoubleLinkedList},o.a.createElement("button",{className:"dropdown-button"},"Lista doble")),o.a.createElement(ya,{to:Vt.MinHeap},o.a.createElement("button",{className:"dropdown-button"},"Min Heap")),o.a.createElement(ya,{to:Vt.AVL},o.a.createElement("button",{className:"dropdown-button"},"Arbol AVL"))];return o.a.createElement("div",{className:"top-bar"},o.a.createElement(E.a,null,o.a.createElement(f.a,{md:2},o.a.createElement("div",{className:"dropdown"},o.a.createElement("button",{className:"dropdown-button"},"Algoritmos"),o.a.createElement(Ea,null,o.a.createElement("div",{className:"dropdown-menu"},o.a.createElement("div",{className:"dropright"},o.a.createElement("button",{className:"dropdown-button"},"Algoritmos de Busqueda"),o.a.createElement("div",{className:"right-menu"},e)),o.a.createElement("div",{className:"dropright"},o.a.createElement("button",{className:"dropdown-button"},"Arbol Recubridor Minimo"),o.a.createElement("div",{className:"right-menu"},t)),o.a.createElement("div",{className:"dropright"},o.a.createElement("button",{className:"dropdown-button"},"Arreglos"),o.a.createElement("div",{className:"right-menu"},a)),o.a.createElement("div",{className:"dropright"},o.a.createElement("button",{className:"dropdown-button"},"Estructuras de Datos"),o.a.createElement("div",{className:"right-menu"},n)))))),o.a.createElement(f.a,{md:1},o.a.createElement(da,{callback:this.props.photo})),o.a.createElement(f.a,{md:1},o.a.createElement(ua,{callback:this.props.gif}))))}}]),t}(o.a.Component),ma=ca(function(e){return Object(m.a)({},e)})(fa),va=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement("body",null,o.a.createElement("div",null,o.a.createElement(y.a,null,o.a.createElement(h.a,null),o.a.createElement(S,null),o.a.createElement(ma,null),o.a.createElement(E.a,null,o.a.createElement(f.a,null,o.a.createElement(Wt,{algorithm:this.props.algorithm}))),o.a.createElement(ia,null))))}}]),t}(o.a.Component);a(124),a(125),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ga=a(38),Na=a(12),_a=[{text:"DFS_visitar(nodo u):",ind:0},{text:"color[u]=Gris",ind:1},{text:"Para cada v adyacente a u:",ind:1},{text:"Si color[v] es blanco:",ind:2},{text:"DFS_visitar(v)",ind:3},{text:"color[u]=Negro",ind:1},{text:"\u2063",ind:0},{text:"DFS(Grafo G(V,E), Nodo inicio):",ind:0},{text:"Para cada u \u2208 V",ind:1},{text:"color[u]=blanco:",ind:2},{text:"DFS_visitar(u)",ind:1}],Sa=[{text:"Dijkstra(Grafo G(V,E), nodo inicio):",ind:0},{text:"Para cada u \u2208 V:",ind:1},{text:"distancia[u]=\u221e",ind:2},{text:"encolar(cola, <inicio,0>)",ind:1},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer_minimo(cola)",ind:2},{text:"Para cada v adyacente a u:",ind:2},{text:"Si distancia[u]+peso(u,v)<distancia[v]:",ind:3},{text:"distancia[v]=distancia[u]+peso(u,v)",ind:4},{text:"actualizar(cola, <v,distancia[v]>)",ind:4}],Ia=[{text:"Kruskal(Grafo G(V,E)):",ind:0},{text:"F=Vacio",ind:1},{text:"ordenar_por_peso(E)",ind:1},{text:"Para cada arista (u, v) \u2208 E:",ind:1},{text:"Si no_camino(u,v):",ind:2},{text:"A\xf1adir (u, v) a F",ind:3},{text:"Retornar F",ind:1}],Oa=[{text:"OrdenamientoBurbuja(Arreglo A):",ind:0},{text:"Repetir:",ind:1},{text:"Ordenado=Verdad",ind:2},{text:"Para i=1 hasta longitud(A)-1:",ind:2},{text:"Si A[i-1] > A[i]:",ind:3},{text:"Intercambiar(A[i-1], A[i])",ind:4},{text:"Ordenado=Falso",ind:4},{text:"Hasta Ordenado",ind:1}],Aa=[{text:"mergeSort(Arreglo A[n]):",ind:0},{text:"Si n==1:",ind:1},{text:"Retornar A",ind:2},{text:"Arreglo L=mergeSort(A[0..n/2))",ind:1},{text:"Arreglo R=mergeSort(A[n/2..n))",ind:1},{text:"retornar merge(L,R)",ind:1},{text:"\u2063",ind:0},{text:"merge(Arreglo L[n], Arreglo R[m]):",ind:0},{text:"Arreglo M[n+m]",ind:1},{text:"p=0, i=0, j=0",ind:1},{text:"Mientras i<n o j<m :",ind:1},{text:"Si j==m o (i<n y L[i]\u2264R[j]):",ind:2},{text:"M[p]=L[i], p=p+1, i=i+1",ind:3},{text:"Sino:",ind:2},{text:"M[p]=R[j], p=p+1, j=j+1",ind:3},{text:"Retornar M",ind:1}],ba=[{text:"Prim(Grafo G(V,E)):",ind:0},{text:"F=Vacio",ind:1},{text:"Para cada u \u2208 V",ind:1},{text:"distancia[u]=\u221e",ind:2},{text:"padre[u]=u",ind:2},{text:"encolar(cola,<u,\u221e>)",ind:2},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer_minimo(cola)",ind:2},{text:"A\xf1adir u a F",ind:2},{text:"Si padre[u]!=u:",ind:2},{text:"A\xf1adir (padre[u], u) a F",ind:3},{text:"Para cada v adyacente a u:",ind:2},{text:"Si v \u2209 F y peso(u,v)<distancia[v]:",ind:3},{text:"Actualizar(cola,<v,peso(u,v)>)",ind:4},{text:"distancia[v]=peso(u,v)",ind:4},{text:"retornar F",ind:1}],Ra=[{text:"BusquedaBinaria(Arreglo A[0..n), entero v):",ind:0},{text:"inf=0, sup=n-1",ind:1},{text:"Mientras inf \u2264 sup:",ind:1},{text:"medio=(inf+sup)/2",ind:2},{text:"Si v == A[medio]:",ind:2},{text:"Retornar Verdadero",ind:3},{text:"Si v < A[medio]:",ind:2},{text:"sup=medio-1",ind:3},{text:"Sino",ind:2},{text:"inf=medio+1",ind:3},{text:"Retornar falso",ind:1}],Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.payload?{options:t.payload.options,photo:t.payload.photo,gif:t.payload.gif,undo:t.payload.undo,redo:t.payload.redo,rewind:t.payload.rewind,forward:t.payload.forward,pause:t.payload.pause,repeat:t.payload.repeat,selection:null}:{};switch(t.type){case A.SELECT_BFS:return Object(m.a)({},e,a,{algorithm:"BFS",selection:null,pseudo:Qt,run:t.payload.run});case A.SELECT_DFS:return Object(m.a)({},e,a,{algorithm:"DFS",pseudo:_a,run:t.payload.run});case A.SELECT_DIJKSTRA:return Object(m.a)({},e,a,{algorithm:"Dijkstra",pseudo:Sa,run:t.payload.run});case A.SELECT_KRUSKAL:return Object(m.a)({},e,a,{algorithm:"Kruskal",pseudo:Ia,run:t.payload.run});case A.SELECT_PRIM:return Object(m.a)({},e,a,{algorithm:"Prim",pseudo:ba,run:t.payload.run});case A.SELECT_HEAP:return Object(m.a)({},e,a,{algorithm:"Heap",pseudo:ee});case A.SELECT_AVL:return Object(m.a)({},e,a,{algorithm:"AVL",pseudo:Re});case A.SELECT_BUBBLESORT:return Object(m.a)({},e,a,{algorithm:"BubbleSort",pseudo:Oa});case A.SELECT_MERGESORT:return Object(m.a)({},e,a,{algorithm:"MergeSort",pseudo:Aa});case A.SELECT_BINARY_SEARCH:return Object(m.a)({},e,a,{algorithm:"BinarySearch",pseudo:Ra});case A.SELECT_LINKED_LIST:var n=Object(m.a)({},e,a);switch(t.payload.type){case A.SELECT_SINGLE_LINKED_LIST:return Object(m.a)({},n,{algorithm:"SingleLinkedList",pseudo:pt.singlySet.main});case A.SELECT_DOUBLE_LINKED_LIST:return Object(m.a)({},n,{algorithm:"DoubleLinkedList",pseudo:pt.doublySet.main});case A.SELECT_QUEUE:return Object(m.a)({},n,{algorithm:"Queue",pseudo:pt.queueSet.main});case A.SELECT_STACK:return Object(m.a)({},n,{algorithm:"Stack",pseudo:pt.stackSet.main})}default:return e}},La=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.ANIMATION_START:return Object(m.a)({},e,{selection:null,animation:!0});case A.ANIMATION_PAUSE:return Object(m.a)({},e,{paused:!0});case A.ANIMATION_CONTINUE:return Object(m.a)({},e,{paused:!1});case A.ANIMATION_END:return Object(m.a)({},e,{animation:!1,paused:!1,lines:null});case A.DEC_SPEED:return Object(m.a)({},e,{speed:Math.min(e.speed+.1,2)});case A.INC_SPEED:return Object(m.a)({},e,{speed:Math.max(e.speed-.1,0)});case A.CHANGE_SPEED:return Object(m.a)({},e,{speed:t.payload.speed});case A.CHANGE_PSEUDO:return Object(m.a)({},e,{pseudo:t.payload.pseudo});case A.SHOW_PSEUDO:return Object(m.a)({},e,{showPseudo:!0});case A.TOGGLE_PSEUDO:return Object(m.a)({},e,{showPseudo:!e.showPseudo});case A.CHANGE_LINE:return Object(m.a)({},e,{lines:t.payload.lines});case A.CHANGE_OPTIONS:return Object(m.a)({},e,{options:t.payload.options});default:return e}},xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.CLEAR_GRAPH:return Object(m.a)({},e,{selection:null,animation:!1});case A.LOAD_GRAPH:return Object(m.a)({},e,{loadingGraph:!0,animation:!1,data:t.payload.data});case A.FINISHED_LOAD:return Object(m.a)({},e,{loadingGraph:!1,data:null});case A.INC_GIF_LENGTH:return Object(m.a)({},e,{gifLength:e.gifLength+1});case A.RESET_GIF_LENGTH:return Object(m.a)({},e,{gifLength:0});default:return e}},ka=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.NO_SELECTION:return Object(m.a)({},e,{selection:null});case A.SELECTION:return Object(m.a)({},e,{selection:t.payload.selection});default:return e}},Ca=function(e,t,a){c.store.addNotification({title:e,message:t,type:a,insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onscreen:!0,showIcon:!0}})},wa=function(e){switch(e.type){case A.NO_NODE_SELECTED_ERROR:Ca("Error","Seleccione un nodo para ejecutar el algoritmo","danger");break;case A.NO_EDGE_SELECTED_ERROR:Ca("Error","Seleccione una arista para cambiar su peso","danger");break;case A.NO_ELEMENT_SELECTED_ERROR:Ca("Error","Debe seleccionar un elemento para eliminarlo","danger");break;case A.INVALID_INTEGER_ERROR:Ca("Error","Debe ingresar un numero entero entre -999 y 999","danger");break;case A.INVALID_ARRAY_ERROR:Ca("Arreglo invalido","Verifique que el arreglo cumpla con los requerimientos","danger");break;case A.INVALID_GRAPH_ERROR:Ca("Error","Existe un error con el archivo, intente de nuevo con otro archivo","danger");break;case A.INVALID_HEAP_ERROR:Ca("Error","El archivo proporcionado no representa un Heap valido. Intente con otro archivo","danger");break;case A.INVALID_AVL_ERROR:Ca("Error","El archivo proporcionado no representa un AVL valido. Intente con otro archivo","danger");break;case A.ANIMATION_RUNNING_ERROR:Ca("Error","No se pueden hacer modificaciones mientras se ejecuta el algoritmo","warning");break;case A.EMPTY_LIST_WARNING:Ca("La lista se encuentra vacia","No se pudo realizar la accion","warning");break;case A.EMPTY_HEAP_WARNING:Ca("Heap vacio","No se puede extraer el minimo elemento de un heap vacio","warning");break;case A.DIJKSTRA_NEGATIVE_WEIGHT_WARNING:Ca("Cuidado con las aristas con peso negativo","El algoritmo de Dijkstra puede no obtener el camino minimo si hay aristas negativas","warning");break;case A.AVL_NOT_FOUND_INFO:Ca("El elemento no fue encontrado en el arbol AVL","Debe volver a la edicion para modificar el arreglo","info");break;case A.AVL_ELEMENT_ALREADY_INFO:Ca("Elemento en el arbol","El elemento ya se encuentra en el arbol AVL","info");break;case A.STARTING_BFS_INFO:Ca("","Realizando BFS desde el nodo seleccionado","info");break;case A.STARTING_DFS_INFO:Ca("","Realizando DFS desde el nodo seleccionado","info");break;case A.STARTING_DIJKSTRA_INFO:Ca("","Calculando caminos de peso minimo desde el nodo seleccionado mediante Dijkstra","info");break;case A.STARTING_KRUSKAL_INFO:Ca("","Obteniendo arbol recubridor minimo mediante el algoritmo de Kruskal","info");break;case A.STARTING_PRIM_INFO:Ca("","Obteniendo arbol recubridor minimo mediante el algoritmo de Prim","info");break;case A.STARTING_BUBBLESORT_INFO:Ca("","Ordenando el arreglo mediante ordenamiento burbuja","info");break;case A.STARTING_MERGESORT_INFO:Ca("","Ordenando el arreglo mediante ordenamiento por mezcla","info");break;case A.STARTING_BINARYSEARCH_INFO:Ca("","Realizando busqueda binaria sobre el arreglo","info");break;case A.STARTING_GIF_RECORDING_INFO:Ca("Creacion de GIF iniciada","La grabacion tendra una duracion maxima de 30 segundos","info");break;case A.FINISHED_GIF_RECORDING_INFO:Ca("Grabacion de GIF terminada","Procesando GIF para descargar","info");break;case A.SORTING_BINARY_SEARCH_INFO:Ca("Solo arreglos ordenados","Los arreglos se ordenaran para realizar la busqueda binaria","info");break;case A.BINARY_SEARCH_NOT_FOUND_INFO:Ca("El elemento no se encuentra en el arreglo","Debe volver a la edicion para modificar el arreglo","info");break;case A.FINISHED_GIF_SUCCESS:Ca("Creacion de GIF terminada","El archivo GIF sera descargado a su dispositivo","success");break;case A.LOAD_GRAPH_SUCCESS:Ca("Grafo cargado con exito"," ","success");break;case A.PHOTO_SUCCESS:Ca("Captura realizada","La captura sera descargada a su dispositivo","success");break;case A.FINISHED_ALGORITHM_SUCCESS:Ca("Ejecucion terminada exitosamente","Debe volver a la edicion para modificar el grafo","success");break;case A.AVL_FOUND_SUCCESS:Ca("Busqueda terminada","El elemento fue encontrado en el arbol AVL","success");break;case A.ARRAY_SORTED_SUCCESS:Ca("El arreglo fue ordenado exitosamente","Debe volver a la edicion para modificar el arreglo","success");break;case A.BINARY_SEARCH_FOUND_SUCCESS:Ca("El elemento fue encontrado en el arreglo","Debe volver a la edicion para modificar el arreglo","success")}},Da={algorithm:"none",selection:null,animation:!1,speed:.75,loadingGraph:!1,data:null,pseudo:null,lines:null,run:function(){},options:[],photo:function(){},gif:function(){},gifLength:0,showPseudo:!0,paused:!1,undo:function(){},redo:function(){},rewind:function(){},forward:function(){},repeat:function(){},pause:function(){}},Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da,t=arguments.length>1?arguments[1]:void 0,a=e;return a=Ta(a,t),a=La(a,t),a=xa(a,t),a=ka(a,t),wa(t),a},Pa=Object(ga.b)(Ga);r.a.render(o.a.createElement(Na.Provider,{store:Pa},o.a.createElement(va,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},14:function(e,t,a){"use strict";a.r(t),a.d(t,"NODE",function(){return n}),a.d(t,"NODE_GRAY",function(){return o}),a.d(t,"NODE_RED",function(){return i}),a.d(t,"NODE_BLACK",function(){return r}),a.d(t,"NODE_CORRECT",function(){return s}),a.d(t,"NODE_WRONG",function(){return d}),a.d(t,"NODE_SELECTED",function(){return l}),a.d(t,"EDGE",function(){return p}),a.d(t,"EDGE_VISITED",function(){return u}),a.d(t,"EDGE_TRAVERSE",function(){return c}),a.d(t,"EDGE_NO_MST",function(){return h}),a.d(t,"EDGE_MST",function(){return y}),a.d(t,"EDGE_DIRECTED",function(){return E}),a.d(t,"EDGE_DOUBLE",function(){return f}),a.d(t,"EDGE_WEIGHTED",function(){return m}),a.d(t,"EDGE_SELECTED",function(){return v}),a.d(t,"LINE_STD",function(){return g}),a.d(t,"LINE_FOCUS",function(){return N}),a.d(t,"NODE_POPPER",function(){return _});var n={"background-color":"white",color:"black","border-style":"solid",width:"35",height:"35","border-width":"1","border-opacity":"1","border-color":"black",label:"data(value)","text-valign":"center","text-halign":"center","z-index":3},o={"background-color":"gray",color:"black"},i={"background-color":"red",color:"black"},r={"background-color":"black",color:"white"},s={"background-color":"Chartreuse",color:"black"},d={"background-color":"#FF9494",color:"black"},l={"background-color":"#2B3B6B",color:"white"},p={width:2,"line-color":"#ccc","curve-style":"bezier","line-style":"solid"},u={"line-color":"#2B3B6B","target-arrow-color":"#2B3B6B"},c={"line-color":"green","target-arrow-color":"green"},h={"line-style":"dashed","line-color":"#eee"},y={"line-style":"solid","line-color":"black"},E={"target-arrow-color":"#ccc","line-color":"#ccc","target-arrow-shape":"triangle"},f={"source-arrow-color":"#ccc","source-arrow-shape":"triangle"},m={label:"data(weight)","text-margin-y":"-10.0","text-rotation":"autorotate"},v={"line-color":"black","target-arrow-color":"black"},g={color:"#CECFE6"},N={"background-color":"#4C5090",color:"#CECFE6"},_={"z-index":0,"border-width":0,"font-size":15,width:10,height:10,visibility:"visible"}},68:function(e,t,a){e.exports=a(126)},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.dfa25316.chunk.js.map