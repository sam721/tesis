(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(20),r=a.n(o),s=a(2),d=a(3),l=a(8),u=a(6),c=a(7),p=a(35),h=a.n(p),E=(a(71),a(72),a(73),a(74),a(126)),y=a(127),m=a(128),f=a(1),v=a(13),g=a(11).connect,N=function(e){var t=e.line,a=e.current,n=e.index,o=a?v.LINE_FOCUS:v.LINE_STD;return i.a.createElement("div",{style:Object(f.a)({},o,{paddingRight:"10px"})},i.a.createElement("div",{className:"codeline"},(n<10?"\xa0":"")+n,".",i.a.createElement("span",{style:{paddingLeft:(15*t.ind).toString()+"px"}},t.text)))},_=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){if(this.props.code&&this.props.show){var e=this.props,t=e.code,a=e.lines,n=[];if(t)for(var o=0;o<t.length;o++)n.push(i.a.createElement(N,{index:o+1,line:t[o],current:a&&a.includes(o)}));return i.a.createElement("div",{className:"codeblock"},n)}return i.a.createElement(i.a.Fragment,null)}}]),t}(i.a.Component),S=g(function(e){return{code:e.pseudo,lines:e.lines,show:e.showPseudo}})(_),I=a(11).connect,O=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement(E.a,{style:{height:"100%",backgroundColor:"#ccc"}},i.a.createElement(y.a,{style:{height:"40%"}},i.a.createElement(m.a,null,i.a.createElement("div",{className:"algorithm-description"},i.a.createElement("div",{className:"header"},i.a.createElement("h4",null,null!=this.props.algorithm?this.props.algorithm:"Nombre del algoritmo")),i.a.createElement("div",{className:"content"},"Descripcion del algoritmo")))),i.a.createElement(y.a,{style:{height:"50%"}},i.a.createElement(m.a,null,i.a.createElement("div",{className:"algorithm-description"},i.a.createElement("div",{className:"header"},i.a.createElement("h4",null,"Pseudocodigo")),i.a.createElement("div",{className:"content"},i.a.createElement(S,null))))))}}]),t}(i.a.Component),A=(I(function(e){return{algorithm:e.algorithm}})(O),{INITIAL:"INITIAL",SELECT_BFS:"SELECT_BFS",SELECT_DFS:"SELECT_DFS",SELECT_BELLMAN_FORD:"SELECT_BELLMAN_FORD",SELECT_DIJKSTRA:"SELECT_DIJKSTRA",SELECT_KRUSKAL:"SELECT_KRUSKAL",SELECT_PRIM:"SELECT_PRIM",SELECT_HEAP:"SELECT_HEAP",SELECT_AVL:"SELECT_AVL",SELECT_BUBBLESORT:"SELECT_BUBBLESORT",SELECT_MERGESORT:"SELECT_MERGESORT",SELECT_BINARY_SEARCH:"SELECT_BINARY_SEARCH",SELECT_LINKED_LIST:"SELECT_LINKED_LIST",SELECT_SINGLE_LINKED_LIST:"SELECT_SINGLE_LINKED_LIST",SELECT_DOUBLE_LINKED_LIST:"SELECT_DOUBLE_LINKED_LIST",SELECT_QUEUE:"SELECT_QUEUE",SELECT_STACK:"SELECT_STACK",SELECTION:"SELECTION",NO_SELECTION:"NO_SELECTION",ANIMATION_START:"ANIMATION_START",ANIMATION_PAUSE:"ANIMATION_PAUSE",ANIMATION_CONTINUE:"ANIMATION_CONTINUE",ANIMATION_END:"ANIMATION_END",CLEAR_GRAPH:"CLEAR_GRAPH",CHANGE_PSEUDO:"CHANGE_PSEUDO",TOGGLE_PSEUDO:"TOGGLE_PSEUDO",SHOW_PSEUDO:"SHOW_PSEUDO",CLOSE_PSEUDO:"CLOSE_PSEUDO",INC_SPEED:"INC_SPEED",DEC_SPEED:"DEC_SPEED",CHANGE_SPEED:"CHANGE_SPEED",CHANGE_OPTIONS:"CHANGE_OPTIONS",CHANGE_LINE:"CHANGE_LINE",LOAD_GRAPH:"LOAD_GRAPH",FINISHED_LOAD:"FINISHED_LOAD",INC_GIF_LENGTH:"INC_GIF_LENGTH",RESET_GIF_LENGTH:"RESET_GIF_LENGTH",NO_NODE_SELECTED_ERROR:"NO_NODE_SELECTED_ERROR",NO_EDGE_SELECTED_ERROR:"NO_EDGE_SELECTED_ERROR",NO_ELEMENT_SELECTED_ERROR:"NO_ELEMENT_SELECTED_ERROR",INVALID_INTEGER_ERROR:"INVALID_INTEGER_ERROR",INVALID_ARRAY_ERROR:"INVALID_ARRAY_ERROR",INVALID_GRAPH_ERROR:"INVALID_GRAPH_ERROR",INVALID_HEAP_ERROR:"INVALID_HEAP_ERROR",INVALID_AVL_ERROR:"INVALID_AVL_ERROR",ANIMATION_RUNNING_ERROR:"ANIMATION_RUNNING_ERROR",EMPTY_LIST_WARNING:"EMPTY_LIST_WARNING",EMPTY_QUEUE_WARNING:"EMPTY_QUEUE_WARNING",EMPTY_STACK_WARNING:"EMPTY_STACK_WARNING",EMPTY_HEAP_WARNING:"EMPTY_HEAP_WARNING",DIJKSTRA_NEGATIVE_WEIGHT_WARNING:"DIJKSTRA_NEGATIVE_WEIGHT_WARNING",NEGATIVE_CYCLE_FOUND:"NEGATIVE_CYCLE_FOUND",AVL_NOT_FOUND_INFO:"AVL_NOT_FOUND_INFO",AVL_ELEMENT_ALREADY_INFO:"AVL_ELEMENT_ALREADY_INFO",STARTING_BFS_INFO:"STARTING_BFS_INFO",STARTING_DFS_INFO:"STARTING_DFS_INFO",STARTING_DIJKSTRA_INFO:"STARTING_DIJKSTRA_INFO",STARTING_BELLMAN_FORD_INFO:"STARTING_BELLMAN_FORD_INFO",STARTING_KRUSKAL_INFO:"STARTING_KRUSKAL_INFO",STARTING_PRIM_INFO:"STARTING_PRIM_INFO",STARTING_BUBBLESORT_INFO:"STARTING_BUBBLESORT_INFO",STARTING_MERGESORT_INFO:"STARTING_MERGESORT_INFO",STARTING_BINARYSEARCH_INFO:"STARTING_BINARYSEARCH_INFO",STARTING_GIF_RECORDING_INFO:"STARTING_GIF_RECORDING_INFO",FINISHED_GIF_RECORDING_INFO:"FINISHED_GIF_RECORDING_INFO",STARTING_BINARY_SEARCH_INFO:"STARTING_BINARY_SEARCH_INFO",BINARY_SEARCH_NOT_FOUND_INFO:"BINARY_SEARCH_NOT_FOUND_INFO",NO_FILE_SELECTED_INFO:"NO_FILE_SELECTED_INFO",FINISHED_GIF_SUCCESS:"FINISHED_GIF_SUCCESS",LOAD_GRAPH_SUCCESS:"LOAD_GRAPH_SUCCESS",PHOTO_SUCCESS:"PHOTO_SUCCESS",FINISHED_ALGORITHM_SUCCESS:"FINISHED_ALGORITHM_SUCCESS",AVL_FOUND_SUCCESS:"AVL_FOUND_SUCCESS",ARRAY_SORTED_SUCCESS:"ARRAY_SORTED_SUCCESS",BINARY_SEARCH_FOUND_SUCCESS:"BINARY_SEARCH_FOUND_SUCCESS"});var b=function(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),i=new Uint8Array(n),o=0;o<t.length;o++)i[o]=t.charCodeAt(o);var r=new DataView(n);return new Blob([r],{type:a})},R=a(79),T=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){};Object(s.a)(this,e),this._gifBuffer=[],this._takingGif=!1,this._interval=0,this._dispatch=null,this.downloadGif=function(e,a,n){var i=t._dispatch;R.createGIF({images:e,gifWidth:a,gifHeight:n,frameDuration:1},function(e){if(e.error)i({type:A.FINISHED_GIF_SUCCESS}),console.log(e.error);else{var t=b(e.image),a=document.createElement("a");a.setAttribute("href",window.URL.createObjectURL(t)),a.setAttribute("download","test.gif"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),i({type:A.FINISHED_GIF_SUCCESS})}})},this._dispatch=a}return Object(d.a)(e,[{key:"takePicture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=e.jpg();if(a){var i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","test.jpg"),i.setAttribute("target","_blank"),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}else t._gifBuffer.length<300?(t._gifBuffer.push(n),t._dispatch({type:A.INC_GIF_LENGTH})):t.takeGif(e)}},{key:"cancelGif",value:function(){this._takingGif=!1,this._dispatch({type:A.RESET_GIF_LENGTH}),clearInterval(this._interval)}},{key:"takeGif",value:function(e){this._takingGif?(clearInterval(this._interval),this._dispatch({type:A.FINISHED_GIF_RECORDING_INFO}),this._dispatch({type:A.RESET_GIF_LENGTH}),this.downloadGif(this._gifBuffer,e.width(),e.height()),this._takingGif=!1,this._gifBuffer=[]):(this._takingGif=!0,this._dispatch({type:A.STARTING_GIF_RECORDING_INFO}),this._interval=setInterval(this.takePicture,300,e,this,!1))}},{key:"takeJson",value:function(e){var t=JSON.stringify(e),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","graph.json"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},{key:"readJson",value:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","myFile"),e.setAttribute("style","position: absolute"),document.body.appendChild(e),e.click(),console.log(e.value)}}]),e}(),L=a(9),x=a.n(L),C=a(129),k=a(11).connect,D=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).uploadGraph=function(){var e=document.getElementById("graphUploadInput");if(e.files&&e.files.length>0){var t=e.files[0],n=new FileReader;n.onload=function(){var e=n.result;if("string"===typeof e)try{JSON.parse(e),a.props.dispatch({type:A.LOAD_GRAPH,payload:{data:e}})}catch(t){a.props.dispatch({type:A.INVALID_GRAPH_ERROR})}},n.readAsText(t),a.props.handleClose()}else a.props.dispatch({type:A.NO_FILE_SELECTED_INFO})},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,{show:a,onHide:n},i.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},i.a.createElement(x.a.Title,null,"Seleccione un archivo")),i.a.createElement(x.a.Body,null,i.a.createElement("p",null,"El archivo debe contener un grafo valido, previamente descargado "),i.a.createElement("input",{type:"file",id:"graphUploadInput"})),i.a.createElement(x.a.Footer,null,i.a.createElement(C.a,{variant:"secondary",onClick:n},"Cancelar"),i.a.createElement(C.a,{variant:"primary",onClick:function(){return e.uploadGraph()}},"Subir grafo"))))}}]),t}(i.a.Component),G=k()(D),w=a(11).connect,P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.handleAccept=function(){if(a.input&&a.validateNumber(a.input.value)){var e=a.input.value,t=parseInt(e);a.props.callback(t),a.props.handleClose()}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.currentValue&&a.setState({text:a.props.currentValue.toString()}),a.props.handleClose()},a.input=null,a.state={text:a.props.currentValue.toString()},a.setStepInputRef=function(e){a.input=e},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.currentValue;null!=t&&t!=e.currentValue&&this.setState({text:this.props.currentValue.toString()})}},{key:"validateNumber",value:function(e){return!(!e||!/^([-]?([0-9]{1,3}))$/.test(e))||(this.props.dispatch({type:A.INVALID_INTEGER_ERROR}),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return i.a.createElement(x.a,{show:a,onHide:n},i.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},i.a.createElement(x.a.Title,null,"Introduzca un numero entero")),i.a.createElement(x.a.Body,null,i.a.createElement("p",null,"El numero debe estar entre -999 y 999"),i.a.createElement("input",{id:"IntInput",type:"number",min:-999,max:999,ref:this.setStepInputRef,value:this.state.text,onChange:function(t){return e.handleChange(t)}})),i.a.createElement(x.a.Footer,null,i.a.createElement(C.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),i.a.createElement(C.a,{variant:"primary",onClick:this.handleAccept},"Aceptar")))}}]),t}(i.a.Component),B=w(function(e){return{currentValue:e.selection?e.selection.weight:0}})(P),M=a(13),U=a(18),F=(a(11).connect,function(e){var t=[];return e.nodes().forEach(function(e){t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),style:e.data("style"),position:e.data("position")},position:e.data("position")})}),e.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),JSON.parse(JSON.stringify(t))}),j=function(e,t){for(var a,n=U({elements:JSON.parse(JSON.stringify(e)),headless:!0}),i=[],o=[],r=function(e){var r=t[e],s=r.eles,d=r.distance,l=r.style,u=r.duration,c=r.inst,p=r.lines,h=r.data;null==u&&(u=1e3),null==p&&(p=[]),i.push({elements:F(n),lines:o,duration:u}),o=p,s&&s.forEach(function(e,t){var a=n.getElementById(e).data("style");l&&n.getElementById(e).data("style",Object(f.a)({},a,l[t])),h&&n.getElementById(e).data("value",h[t].value),void 0!==d&&(n.getElementById(e+"-popper").data("style",M.NODE_POPPER),n.getElementById(e+"-popper").data("value",d[t]))}),c&&(console.log(c),c.forEach(function(e){if("update_level"===e.name){var t=e.data;if(t){var i=t.id,o=t.value;null!=i&&null!=o&&(n.getElementById(i+"-popper").data("style",M.NODE_POPPER),n.getElementById(i+"-popper").data("value",o))}}else"negative_cycle"===e.name&&(a=A.NEGATIVE_CYCLE_FOUND)}))},s=0;s<t.length;s++)r(s);return i.push({elements:F(n),lines:o,duration:0,action:a}),i},H={BFS:"BFS",DFS:"DFS",Dijkstra:"Dijkstra",BellmanFord:"BellmanFord",Kruskal:"Kruskal",Prim:"Prim",MinHeap:"MinHeap",AVL:"AVL",BubbleSort:"BubbleSort",MergeSort:"MergeSort",BinarySearch:"BusquedaBinaria",SingleLinkedList:"ListaEnlazada",DoubleLinkedList:"ListaDoblementeEnlazada",Queue:"Cola",Stack:"Pila"},V=a(13),K=a(18),z=a(11).connect;a(117)(K);var J=function(e){return"node-"+e},Y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.state={values:new Array,showModal:!1,showWeightModal:!1},a.layout={run:function(){},stop:function(){}},a.nodeStyle=V.NODE,a.edgeStyle=V.EDGE,a.undo=[],a.redo=[],a.options=void 0,a.cy=K(),a.buffer=[],a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(console.log(a.undo),0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();console.log(t),a.redo.push(e),void 0!==t&&a.loadGraph(t)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();a.undo.push(e),void 0!==t&&a.loadGraph(t)}},a.handleRewind=function(){console.log(a.animationTimeout),clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1),console.log(a.step);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.clearGraph=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.CLEAR_GRAPH});var e=a.cy.nodes();if(0!==e.length){a.pushState();for(var t=0;t<e.length;t++)a.removeNode(e[t].id())}}},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]'),a.removeNodePopper(e)},a.removeEdge=function(e){a.cy.remove('edge[id="'+e+'"]')},a.executeAnimation=function(e){var t;a.cy.nodes().style({"background-color":"white",color:"black"}),a.buffer=j(a.exportGraph(!0),e),a.props.algorithm===H.BFS?t=A.STARTING_BFS_INFO:a.props.algorithm===H.DFS?t=A.STARTING_DFS_INFO:a.props.algorithm===H.Dijkstra?t=A.STARTING_DIJKSTRA_INFO:a.props.algorithm===H.BellmanFord?t=A.STARTING_BELLMAN_FORD_INFO:a.props.algorithm===H.Kruskal?t=A.STARTING_KRUSKAL_INFO:a.props.algorithm===H.Prim&&(t=A.STARTING_PRIM_INFO),a.props.dispatch({type:t}),a.step=0,a.animation()},a.runButton=function(){if(!0!==a.props.animation){a.pushState();var e=a.props.selection;if(a.props.algorithm===H.Kruskal||a.props.algorithm===H.Prim||(console.log(a.props.algorithm),e&&"node"===e.type))a.cy.nodes().forEach(function(e){a.createPopper(e.id())}),a.refreshLayout(),new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START}),e(a.props.execute({cy:a.cy,selection:a.props.selection}))}).then(function(e){a.cy.autolock(!0),a.executeAnimation(e)});else a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}else new Promise(function(e){a.props.dispatch({type:A.ANIMATION_END}),a.cy.autolock(!1),clearTimeout(a.animationTimeout),e()}).then(function(){a.handleUndo(),a.redo.pop()})},a.removeButton=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.props.selection;e?(a.pushState(),"node"===e.type?a.removeNode(e.id):"edge"===e.type&&a.removeEdge(e.id),a.props.dispatch({type:A.NO_SELECTION})):a.props.dispatch({type:A.NO_ELEMENT_SELECTED_ERROR})}},a.handleClickOnNode=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection;if(n&&"node"===n.type){if("node"===n.type){var i=n.id;if(i===t)e.style(V.NODE),a.props.dispatch({type:A.NO_SELECTION});else{var o=a.cy.getElementById(i);i&&((a.props.directed&&!o.outgoers().contains(e)||!a.props.directed&&!o.neighborhood().contains(e))&&a.createEdge(i,t),a.props.dispatch({type:A.NO_SELECTION,payload:{selection:null}})),o.style(V.NODE)}}}else e.style(V.NODE_SELECTED),n&&"edge"===n.type&&a.cy.getElementById(n.id).style(a.edgeStyle),a.props.dispatch({type:A.SELECTION,payload:{selection:{id:t,type:"node"}}})}},a.handleClickOnEdge=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection,i=null;if(n){i=n.id;var o=a.cy.getElementById(i);"edge"===n.type?o.style(a.edgeStyle):"node"===n.type&&o.style(a.nodeStyle)}if(i===t)a.props.dispatch({type:A.NO_SELECTION,payload:{selection:null}}),a.cy.getElementById(i).style(a.edgeStyle);else a.props.dispatch({type:A.SELECTION,payload:{selection:{type:"edge",id:t,weight:a.cy.getElementById(t).data("weight")}}}),e.style(V.EDGE_SELECTED)}},a.changeWeight=function(e){var t=a.props.selection;if("edge"===t.type){var n=t.id;if(a.cy.getElementById(n).data("weight")===e)return;a.pushState(),a.cy.getElementById(n).data("weight",e),a.props.dispatch({type:A.SELECTION,payload:{selection:{type:"edge",weight:e,id:n}}})}},a.weightButton=function(){var e=a.props.selection;e&&"edge"===e.type?a.setState({showWeightModal:!0}):a.props.dispatch({type:A.NO_EDGE_SELECTED_ERROR})},a.handleClickViewport=function(e){if(!0!==a.props.animation){var t=a.props.selection;if(e.target===a.cy)if(t){var n=a.cy.getElementById(t.id);"node"===t.type?n.style(V.NODE):"edge"===t.type&&n.style(a.edgeStyle),a.props.dispatch({type:A.NO_SELECTION})}else{var i=e.position,o=i.x,r=i.y;a.createNode(o,r),a.refreshLayout()}}else a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR})},a.props.weighted&&(a.edgeStyle=Object(f.a)({},a.edgeStyle,V.EDGE_WEIGHTED)),a.props.directed&&(a.edgeStyle=Object(f.a)({},a.edgeStyle,V.EDGE_DIRECTED)),a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ejecutar",run:a.runButton},{name:"Cambiar peso",run:a.weightButton},{name:"Descargar grafo",run:function(){return a._mediaRecorder.takeJson(a.exportGraph())}},{name:"Subir grafo",run:function(){return a.setState({showModal:!0})}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.props.dispatch({type:this.props.action,payload:{run:this.runButton,photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat,remove:this.removeButton,clear:this.clearGraph}}),this.props.action===A.SELECT_DIJKSTRA&&this.props.dispatch({type:A.DIJKSTRA_NEGATIVE_WEIGHT_WARNING})}},{key:"componentDidUpdate",value:function(e){if(!e.loadingGraph&&this.props.loadingGraph){var t=JSON.parse(this.props.data);t&&(this.pushState(),this.loadGraph(t)),this.props.dispatch({type:A.FINISHED_LOAD})}!e.animation&&this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}}):e.animation&&!this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),this._isMounted=!1,clearTimeout(this.animationTimeout),this._mediaRecorder.cancelGif(),this.removePoppers()}},{key:"initialize",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e);var n=V.EDGE;this.props.weighted&&(n=Object(f.a)({},n,V.EDGE_WEIGHTED)),this.props.directed&&(n=Object(f.a)({},n,V.EDGE_DIRECTED)),this.cy=K({container:document.getElementById("canvas"),elements:JSON.parse(JSON.stringify(e)),style:[{selector:"node",style:V.NODE},{selector:"edge",style:n}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0"}),a?this.cy.nodes().forEach(function(e){e.id().match("popper")&&e.style({visibility:"hidden"})}):this.removePoppers(),this.cy.on("click",function(e){return t.handleClickViewport(e)}),this.cy.on("click","node",function(e){return t.handleClickOnNode(e.target)}),this.cy.on("click","edge",function(e){return t.handleClickOnEdge(e.target)}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push(this.exportGraph())}},{key:"loadGraph",value:function(e){var t=this;arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{for(var a=this.cy.nodes(),n=0;n<a.length;n++)this.removeNode(a[n].id());for(var i=0;i<e.length;i++)this.cy.add(JSON.parse(JSON.stringify(e[i])));this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var a=e.data("style");e.style(t.edgeStyle),null!=a&&e.style(a)})}catch(o){this.props.dispatch({type:A.INVALID_GRAPH_ERROR})}}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility"),zIndex:a.style("z-index")}:{}},position:{x:a.position().x,y:a.position().y}})}),this.cy.edges().forEach(function(a){t.push({group:"edges",data:{id:a.id(),source:a.source().id(),target:a.target().id(),weight:a.data("weight"),style:e?{lineColor:a.style("line-color"),targetArrowShape:a.style("target-arrow-shape"),targetArrowColor:a.style("target-arrow-color"),lineStyle:a.style("line-style"),label:a.style("label"),textRotation:a.style("text-rotation"),textMarginY:a.style("text-margin-y")}:{}}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"removeNodePopper",value:function(e){this.cy.remove('node[id="'+e+'-popper"]')}},{key:"animation",value:function(){var e=this;!function t(){if(e._isMounted){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(!e.props.animation)return e.cy.nodes().style(e.nodeStyle),e.cy.edges().style(e.edgeStyle),e.props.dispatch({type:A.ANIMATION_END}),void e.cy.autolock(!1);if(!e.props.paused){var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration,r=a.action;r&&e.props.dispatch({type:r}),e.loadGraph(n,!0),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),e.refreshLayout(),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed)}}}()}},{key:"createNode",value:function(e,t){for(var a=1;this.cy.getElementById(J(a.toString())).length>0;)a++;var n=J(a.toString());this.pushState(),this.cy.add({group:"nodes",data:{id:n,value:a},position:{x:e,y:t}})}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper"},position:{x:t.x,y:t.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10,visibility:"hidden"}})}},{key:"removePoppers",value:function(){var e=this;this.cy.nodes().forEach(function(t){e.removeNode(t.id()+"-popper")})}},{key:"createEdge",value:function(e,t){this.pushState(),this.cy.add({group:"edges",data:{id:e+"-"+t,weight:Math.floor(15*Math.random()),source:e,target:t}})}},{key:"render",value:function(){var e=this,t=this.props.selection;if(t&&"edge"===t.type){var a=t.id;this.cy.getElementById(a).data("weight")}return i.a.createElement(i.a.Fragment,null,i.a.createElement(G,{show:this.state.showModal,handleClose:function(){return e.setState({showModal:!1})}}),i.a.createElement(B,{show:this.state.showWeightModal,handleClose:function(){return e.setState({showWeightModal:!1})},callback:function(t){return e.changeWeight(t)}}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),W=z(function(e){return{selection:e.selection,algorithm:e.algorithm,animation:e.animation,speed:e.speed,loadingGraph:e.loadingGraph,data:e.data,paused:e.paused}})(Y);var q=a(11).connect,X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.uploadGraph=function(){var e=document.getElementById("HeapUploadInput");if(e.files){var t=e.files[0],n=new FileReader;n.onload=function(){if(console.log(n.result),"string"===typeof n.result){var e=n.result;a.validateArray(e)}},n.readAsText(t)}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.handleClose()},a.input=null,a.setStepInputRef=function(e){a.input=e},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){if(console.log(e),!e||!/^(([-]?([0-9]{1,3})[,]){0,15})([-]?([0-9]{1,3}))$/.test(e))return this.props.dispatch({type:A.INVALID_HEAP_ERROR}),!1;var t=e.split(",").map(function(e){return parseInt(e)});console.log(t),!function(e){var t=e.length;console.log("VALIDANDO",e);for(var a=1;2*a<t;a++){var n=e[2*a],i=2*a+1===t?1/0:e[2*a+1];if(console.log(e[a],n,i),n<e[a]||i<e[a])return!1}return!0}(t)?this.props.dispatch({type:A.INVALID_HEAP_ERROR}):(this.props.changeArray(t),this.props.handleClose())}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleClose;return i.a.createElement(x.a,{show:t,onHide:a},i.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},i.a.createElement(x.a.Title,null,"Seleccione un archivo")),i.a.createElement(x.a.Body,null,i.a.createElement("p",null,"El archivo debe contener un Heap valido, previamente descargado"),i.a.createElement("input",{type:"file",id:"HeapUploadInput"})),i.a.createElement(x.a.Footer,null,i.a.createElement(C.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),i.a.createElement(C.a,{variant:"primary",onClick:this.uploadGraph},"Aceptar")))}}]),t}(i.a.Component),Q=q()(X),$=[{text:"extraer_minimo(Arreglo A de longitud n)",ind:0},{text:"intercambiar(A[1], A[n])",ind:1},{text:"n--",ind:1},{text:"hundir(1)",ind:1},{text:"\u2063",ind:0},{text:"hundir(Entero i): ",ind:0},{text:"Si no es_hoja(i):",ind:1},{text:"Si A[2*i] < A[2*i+1]:",ind:2},{text:"h = 2*i",ind:3},{text:"Sino: ",ind:2},{text:"h = 2*i+1",ind:3},{text:"Si A[i] > A[h]:",ind:2},{text:"hundir(h)",ind:3}],Z=[{text:"insertar(Arreglo A de longitud n, Entero v):",ind:0},{text:"A[n++] = v",ind:1},{text:"flotar(n)",ind:1},{text:"\u2063",ind:0},{text:"flotar(entero i):",ind:0},{text:"Si i/2 > 0 y A[i/2] > A[i]:",ind:1},{text:"intercambiar(A[i/2], A[i])",ind:2},{text:"flotar(i/2)",ind:2}],ee=[{text:"MinHeap{",ind:0},{text:"Arreglo A",ind:1},{text:"insertar(entero v)",ind:1},{text:"extraer_minimo()",ind:1},{text:"flotar(entero i)",ind:1},{text:"hundir(entero i)",ind:1},{text:"}",ind:0}],te=a(13),ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e>=t},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return e===t};Object(s.a)(this,e),this._data=[0],this._comp=null,this._eq=null,this._comp=t,this._eq=a}return Object(d.a)(e,[{key:"isEmpty",value:function(){return 1===this._data.length}},{key:"length",value:function(){return this._data.length}},{key:"top",value:function(){return this.isEmpty()?null:this._data[1]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[];this._data.push(e);var n=this._data.length-1;for(t&&a.push({eles:[n.toString()],style:[te.NODE_BLACK],classes:["heap-focus"],lines:[4]});n>1;){var i=Math.floor(n/2);if(this._comp(this._data[i],this._data[n])||this._eq(this._data[i],this._data[n])){t&&a.push({eles:[i.toString()],style:[te.NODE_CORRECT],classes:["heap-correct"],lines:[-1]});break}t&&a.push({eles:[i.toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[5,6,7]},{eles:[i.toString(),n.toString()],style:[te.NODE_BLACK,te.NODE],data:[{value:this._data[n]},{value:this._data[i]}],classes:["heap-focus","heap-default"],lines:[4]});var o=[this._data[n],this._data[i]];this._data[i]=o[0],this._data[n]=o[1],n=i}return a}},{key:"pop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(!this.isEmpty()){var a=this._data[this._data.length-1];if(this._data.pop(),this.isEmpty())return t;var n=1;for(this._data[1]=a,e&&t.push({eles:[n.toString()],style:[te.NODE_BLACK],classes:["heap-focus"],lines:[5]});2*n<this._data.length;){var i=this._data[2*n],o=2*n+1<this._data.length?this._data[2*n+1]:null;if(a=this._data[n],null==o){if(!this._comp(i,a))break;e&&t.push({eles:[(2*n).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[7,8]},{eles:[n.toString(),(2*n).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var r=[this._data[n],this._data[2*n]];this._data[2*n]=r[0],this._data[n]=r[1],n*=2}else if((this._comp(i,o)||this._eq(i,o))&&this._comp(i,a)){e&&t.push({eles:[(2*n).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[7,8]},{eles:[n.toString(),(2*n).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var s=[this._data[n],this._data[2*n]];this._data[2*n]=s[0],this._data[n]=s[1],n*=2}else{if(!this._comp(o,i)&&!this._eq(o,i)||!this._comp(o,a))break;e&&t.push({eles:[(2*n+1).toString()],style:[te.NODE_WRONG],classes:["heap-wrong"],lines:[9,10]},{eles:[n.toString(),(2*n+1).toString()],style:[te.NODE,te.NODE_BLACK],data:[{value:this._data[2*n+1]},{value:this._data[n]}],classes:["heap-default","heap-focus"],lines:[11,12]});var d=[this._data[n],this._data[2*n+1]];this._data[2*n+1]=d[0],this._data[n]=d[1],n=2*n+1}}}return t}},{key:"clear",value:function(){for(;!this.isEmpty();)this.pop()}}]),e}(),ne=a(13),ie=a(18),oe=(a(11).connect,function(){function e(t,a){var n=this;Object(s.a)(this,e),this.heap=new ae(function(e,t){return e<t},function(e,t){return e===t}),this.cy=ie(),this.vh=void 0,this.vw=void 0,this.exportGraph=function(){var e=[];return n.layoutProcessing(),n.cy.nodes().forEach(function(t){var a=t.data("prevPosition");a||(a=t.data("position")),e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),style:t.data("style"),position:t.data("position")},position:a})}),n.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight"),style:t.data("style")}})}),JSON.parse(JSON.stringify(e))},this.removeNode=function(e){n.cy.remove('node[id="'+e+'"]'),n.cy.remove('node[id="'+e+'-popper"]')},this.remove=function(){var e,t=n.heap.length()-1,a=n.cy.getElementById("1").outgoers("node");if(n.removeNode("1"),e=n.heap.pop(!0),1===t)return[{elements:n.exportGraph(),lines:[],duration:1e3}];var i=n.cy.getElementById(t.toString()).data("position"),o=n.cy.getElementById(t.toString()).data("value");n.removeNode(t.toString()),n.addNode("1",o,i);for(var r=[],s=0;s<a.length;s++)0!==n.cy.getElementById(a[s].id()).length&&n.cy.add({group:"edges",data:{id:"1-"+a[s].id(),source:"1",target:a[s].id()}});return r=(r=r.concat({elements:n.exportGraph(),lines:[],duration:1e3})).concat(n.processCommands(e)),n.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",ne.NODE)}),r.push({elements:n.exportGraph(),lines:[],duration:0}),r},this.vh=a,this.vw=t}return Object(d.a)(e,[{key:"loadGraph",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cy=ie({elements:JSON.parse(JSON.stringify(t))}),this.heap._data=[0],this.cy.nodes().forEach(function(t){t.id().match("popper")?t.data("style",ne.NODE_POPPER):(e.heap._data[parseInt(t.id())]=t.data("value"),t.data("style",ne.NODE))}),console.log(this.heap._data)}},{key:"createPopper",value:function(e,t){var a=this.cy.getElementById(e).data("position");this.cy.add({group:"nodes",data:{id:e+"-popper",value:t,style:ne.NODE_POPPER,position:{x:a.x,y:a.y+30}},position:{x:a.x,y:a.y+30}})}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e.toString(),value:t,position:{x:a.x,y:a.y}},position:{x:a.x,y:a.y}}),this.createPopper(e,parseInt(e))}},{key:"layoutProcessing",value:function(){var e=this;if(0!==this.heap._data.length){var t=5*(1<<function e(t){for(var a=t.outgoers("node"),n=0,i=0;i<a.length;i++)n=Math.max(n,e(a[i]));return n+1}(this.cy.getElementById("1")));return function t(a,n,i,o){var r=a.data("position");a.data("prevPosition",r),a.data("position",{x:n,y:i});var s=e.cy.getElementById(a.id()+"-popper"),d=s.data("position");s.data("prevPosition",d),s.data("position",{x:n,y:i+30}),a.outgoers("node").length&&t(a.outgoers("node")[0],n-o,i+50,o/2),2===a.outgoers("node").length&&t(a.outgoers("node")[1],n+o,i+50,o/2)}(this.cy.getElementById("1"),this.vw/2,this.vh/4,t),!0}}},{key:"processCommands",value:function(e){var t=this;this.cy.nodes().forEach(function(e){e.id().match("-popper")||e.style({"background-color":"white",color:"black"})});for(var a=[],n=[],i=0,o=function(o){var r=e[o],s=r.eles,d=r.style,l=r.duration,u=r.data,c=(r.classes,r.lines);null==l&&(l=1e3),null==c&&(c=[]),a.push({elements:t.exportGraph(),lines:n,duration:i}),n=c,i=l,s&&s.forEach(function(e,a){d&&t.cy.getElementById(e).data("style",d[a]);null!=u&&t.cy.getElementById(e).data(u[a])})},r=0;r<e.length;r++)o(r);return a.push({elements:this.exportGraph(),lines:n,duration:1e3}),a}},{key:"insert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[];if(this.heap.length()-1===0){this.addNode("1",e),t.push({elements:this.exportGraph(),duration:1e3,lines:[1,2,3,4]});var a=this.heap.push(e,!0);t=t.concat(this.processCommands(a))}else{var n=this.heap.length();console.log(n);var i=this.cy.getElementById(Math.floor(n/2).toString());this.addNode(n.toString(),e,i.data("position")),this.cy.add({group:"edges",data:{id:i.id()+"-"+n.toString(),source:i.id(),target:n.toString()}}),t.push({elements:this.exportGraph(),duration:1e3,lines:[1,2,3,4]});var o=this.heap.push(e,!0);t=t.concat(this.processCommands(o))}return this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",ne.NODE)}),t.push({elements:this.exportGraph(),lines:[],duration:0}),t}}]),e}()),re=a(13),se=a(18),de=a(11).connect,le={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.undo=[],a.redo=[],a.state={show:!1,showInsertModal:!1},a.layout={run:function(){},stop:function(){}},a.nodeStyle=re.NODE,a.edgeStyle=re.EDGE,a.cy=se(),a.heapProcessor=void 0,a.buffer=[],a.options=void 0,a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push(e),a.loadGraph(t),a.heapProcessor.loadGraph(t))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push(e),a.loadGraph(t),a.heapProcessor.loadGraph(t))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]'),a.cy.remove('node[id="'+e+'-popper"]')},a.executeAnimation=function(){a.cy.nodes().forEach(function(e){e.id().match("-popper")||e.style({"background-color":"white",color:"black"})}),new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START}),e()}).then(function(){a.step=0,a.animation()})},a.clearGraph=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.CLEAR_GRAPH});var e=a.cy.nodes();if(0!==e.length){a.pushState(),a.heapProcessor.loadGraph();for(var t=0;t<e.length;t++)a.removeNode(e[t].id())}}},a.remove=function(){a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:$}}),a.pushState(),a.buffer=a.heapProcessor.remove(),console.log(a.buffer),a.executeAnimation())},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Insertar",run:function(){return a.setState({showInsertModal:!0})}},{name:"Extraer minimo",run:a.remove},{name:"Subir Heap",run:function(){return a.setState({show:!0})}},{name:"Descargar Heap",run:function(){a.props.animation||function(e){var t=e.toString(),a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","avl.txt"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}(a.heapProcessor.heap._data)}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"initialize",value:function(){var e=this,t=re.EDGE;this.cy=se({container:document.getElementById("canvas"),elements:[],style:[{selector:"node",style:re.NODE},{selector:"edge",style:t}],headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.nodes().forEach(function(e){e.id().match("-popper")&&e.style({"z-index":0,"border-width":0,"font-size":15,width:10,height:10})}),this.cy.on("resize",function(){return e.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(Object(f.a)({},le,{animate:!1})),this.layout.run(),this.refreshLayout()}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize(),this.heapProcessor=new oe(this.cy.width(),this.cy.height()),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue,clear:this.clearGraph,remove:null}})}},{key:"componentDidUpdate",value:function(e){var t=this;le.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){t.loadGraph(t.buffer[t.buffer.length-1].elements),t.props.dispatch({type:A.ANIMATION_END}),clearTimeout(t.animationTimeout)}}]}})}},{key:"componentWillUnmount",value:function(){var e=this;this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(t){e.removeNode(t.id())})}},{key:"pushState",value:function(){this.redo=[],this.undo.push(this.exportGraph())}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var a=e.data("position");null!=a&&(le.positions[e.id()]=JSON.parse(JSON.stringify(a)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:{x:t.position().x,y:t.position().y}},style:t.style(),position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"createPopper",value:function(e,t){var a=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper",value:t},position:{x:a.x,y:a.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10}})}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e.toString(),value:t},grabbable:!1,pannable:!1,position:{x:a.x,y:a.y}}),this.createPopper(e,parseInt(e))}},{key:"animation",value:function(){var e=this;!function t(){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration;e.props.paused||(e.loadGraph(n),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),console.log(o),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed))}}()}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layoutProcessing(),this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(f.a)({},le,{animate:e})),this.layout.run()}},{key:"layoutProcessing",value:function(){var e=this,t=5*(1<<function e(t){for(var a=t.outgoers("node"),n=0,i=0;i<a.length;i++)n=Math.max(n,e(a[i]));return n+1}(this.cy.getElementById("1"))),a=this.cy.width(),n=this.cy.height();return function t(a,n,i,o){le.positions[a.id()]={x:n,y:i},a.data("position",{x:n,y:i});var r=e.cy.getElementById(a.id()+"-popper");le.positions[r.id()]={x:n,y:i+30},r.data("position",{x:n,y:i+30}),a.outgoers("node").length&&t(a.outgoers("node")[0],n-o,i+50,o/2),2===a.outgoers("node").length&&t(a.outgoers("node")[1],n+o,i+50,o/2)}(this.cy.getElementById("1"),a/2,n/4,t),!0}},{key:"insert",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:Z}}),this.pushState(),this.buffer=this.heapProcessor.insert(e),console.log(this.buffer),this.executeAnimation())}},{key:"changeArray",value:function(e){var t=this;this.pushState(),this.cy.nodes().forEach(function(e){t.cy.remove(e)}),this.heapProcessor.heap.clear();for(var a=1;a<e.length;a++)this.addNode(a.toString(),e[a]);for(var n=1;2*n<e.length;n++)this.cy.add({group:"edges",data:{id:n.toString()+"-"+(2*n).toString(),source:n.toString(),target:(2*n).toString()}});for(var i=1;2*i+1<e.length;i++)this.cy.add({group:"edges",data:{id:i.toString()+"-"+(2*i+1).toString(),source:i.toString(),target:(2*i+1).toString()}});this.refreshLayout(),this.heapProcessor.loadGraph(this.exportGraph())}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Q,{show:this.state.show,changeArray:function(t){return e.changeArray(t)},handleClose:function(){return e.setState({show:!1})}}),i.a.createElement(B,{show:this.state.showInsertModal,handleClose:function(){return e.setState({showInsertModal:!1})},callback:function(t){return e.insert(t)}}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),ce=de(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(ue),pe=a(16);function he(e){return 0===e.outgoers("node").length}function Ee(e){var t=null,a=null,n=e.outgoers("node");if(n.length>=1&&(t=n[0]),2===n.length&&(a=n[1]),null!=t&&null!=a&&t.data("value")>a.data("value")){var i=[a,t];t=i[0],a=i[1]}else if(null!=t&&t.data("value")>e.data("value")){var o=[a,t];t=o[0],a=o[1]}else if(null!=a&&a.data("value")<e.data("value")){var r=[a,t];t=r[0],a=r[1]}return[t,a]}function ye(e,t,a){for(;t.id()!==a.id();)t.data("depth")<a.data("depth")?a=e.getElementById(a.data("prev")):t.data("depth")>a.data("depth")?t=e.getElementById(t.data("prev")):(t=e.getElementById(t.data("prev")),a=e.getElementById(a.data("prev")));return t}function me(e){return e?e.data("height"):0}var fe=a(11).connect,ve=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={text:""},a.uploadGraph=function(){var e=document.getElementById("AVLUploadInput");if(e.files){var t=e.files[0],n=new FileReader;n.onload=function(){if("string"===typeof n.result){var e=n.result;a.validateArray(e)}},n.readAsText(t)}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.props.handleClose()},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){var t=this.props,a=t.addNode,n=t.addEdge,i=t.clearGraph;if(e&&/^([^0-9().-]|([0-9]{4,})|([.]{2,}))/.test(e))return this.props.dispatch({type:A.INVALID_AVL_ERROR}),!1;!function(e,t,a,n){var i=0,o=e.length,r=0,s=[],d=[];return!(!function t(a,n){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if("."===e[i])return i++,{correct:!0,height:0,balance:0};var u=1;if("-"===e[i]&&(u=-1,i++),i===o||e[i]<"0"||e[i]>"9")return{correct:!1};for(var c=0;i<o&&e[i]>="0"&&e[i]<="9";)c=10*c+parseInt(e[i++]);if((c*=u)<=a||c>=n)return{correct:!1};var p=r++;if(i===o||"("!==e[i])return{correct:!1};i++;var h=t(a,c,p);if(!h.correct||i===o||")"!==e[i])return{correct:!1};if(++i===o||"("!==e[i])return{correct:!1};i++;var E=t(c,n,p);if(!E.correct||i===o||")"!==e[i])return{correct:!1};i++;var y=Math.max(h.height,E.height)+1,m=E.height-h.height;return Math.abs(m)>1?{correct:!1}:(s.push({id:p.toString(),value:c,height:y,balance:m}),-1!==l&&d.push({source:l.toString(),target:p.toString()}),{correct:!0,height:y,balance:m})}(-1/0,1/0)||i!==o)&&(n(),s.forEach(function(e){t(e.id,e.value,e.height,e.balance)}),d.forEach(function(e){a(e.source,e.target)}),!0)}(e,a,n,i)?this.props.dispatch({type:A.INVALID_AVL_ERROR}):this.props.handleClose(!0)}},{key:"render",value:function(){var e=this.props,t=e.show,a=e.handleClose;return i.a.createElement(x.a,{show:t,onHide:a},i.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},i.a.createElement(x.a.Title,null,"Seleccione un archivo")),i.a.createElement(x.a.Body,null,i.a.createElement("p",null,"El archivo debe contener un arbol AVL valido, previamente descargado"),i.a.createElement("input",{type:"file",id:"AVLUploadInput"})),i.a.createElement(x.a.Footer,null,i.a.createElement(C.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),i.a.createElement(C.a,{variant:"primary",onClick:this.uploadGraph},"Aceptar")))}}]),t}(i.a.Component),ge=fe()(ve);function Ne(e,t){return e+"-"+t}var _e=[{text:"insertar(nodo u, entero v):",ind:0},{text:"Si u == NULL",ind:1},{text:"u = nuevo nodo(v)",ind:2},{text:"Sino si v < u.valor:",ind:1},{text:"insertar(u.hijoIzquierdo, v)",ind:2},{text:"Sino si v > u.valor:",ind:1},{text:"insertar(u.hijoDerecho, v)",ind:2}],Se=[{text:"eliminar(nodo u):",ind:0},{text:"Si es_hoja(u): borrar u",ind:1},{text:"Sino: ",ind:1},{text:"Si hijos(u) == 1:",ind:2},{text:"eliminar(hijo(u))",ind:3},{text:"Sino: ",ind:2},{text:"nodo s = sucesor(u)",ind:3},{text:"intercambiar(u.valor, s.valor)",ind:3},{text:"borrar s",ind:3}],Ie=[{text:"balancear(nodo u)",ind:0},{text:"Caso 0: u esta balanceado",ind:1},{text:"Caso 1: factor(u)==2 y factor(u.hijoDerecho)>=0",ind:1},{text:"rotacionIzquierda(u)",ind:2},{text:"Caso 2: factor(u)==-2 y factor(u.hijoIzquierdo)<=0",ind:1},{text:"rotacionDerecha(u)",ind:2},{text:"Caso 3: factor(u)==2 y factor(u.hijoIzquierdo)<0",ind:1},{text:"rotacionDerecha(u.hijoDerecho), rotacionIzquierda(u)",ind:2},{text:"Caso 4: factor(u)==-2 y factor(u.hijoDerecho)>0",ind:1},{text:"rotacionIzquierda(u.hijoIzquiedo), rotacionDerecha(u)",ind:2}],Oe=[{text:"buscar(nodo u, entero v):",ind:0},{text:"Si u == NULL: retornar Falso",ind:1},{text:"Si v == u.valor: retornar Verdadero",ind:1},{text:"Si v < u.valor:",ind:1},{text:"buscar(u.hijoIzquierdo, v)",ind:2},{text:"Sino:",ind:1},{text:"buscar(u.hijoDerecho, v)",ind:2}],Ae=[{text:"AVL{",ind:0},{text:"Nodo raiz",ind:1},{text:"insertar(nodo u, entero v)",ind:1},{text:"eliminar(nodo u)",ind:1},{text:"buscar(nodo u, entero v)",ind:1},{text:"balancear(nodo u)",ind:1},{text:"sucesor(nodo u)",ind:1},{text:"}",ind:0}],be=a(13),Re=a(18),Te=(a(11).connect,function(){function e(t,a){var n=this;Object(s.a)(this,e),this.cy=Re(),this.vh=void 0,this.vw=void 0,this.treeRoot="",this.buffer=[],this.pseudo=[],this.addNode=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};n.cy.add({group:"nodes",data:{id:e,value:t,height:a,balance:i,position:{x:o.x,y:o.y}},position:{x:o.x,y:o.y}}),n.createPopper(e)},this.addEdge=function(e,t){n.cy.add({group:"edges",data:{id:Ne(e,t),source:e,target:t}}),n.cy.getElementById(t).data("prev",e)},this.removeEdge=function(e,t){n.cy.remove('edge[id="'+Ne(e,t)+'"]')},this.removeNode=function(e){var t=e.id();n.cy.remove(e),n.removeNodePopper(t)},this.remove=function(e){n.buffer=[],n.search(e),n.pseudo=Se;var t=n.cy.getElementById(n.treeRoot),a=!1;if(n.cy.nodes().forEach(function(n){n.id().match("popper")||n.data("value")!==e||(t=n,a=!0)}),!a)return n.buffer;var i="";if(n.pushStep(),he(t))t.id()!==n.treeRoot&&(i=t.data("prev")),n.removeNode(t),n.pushStep([1]),""!==i&&n.balance(n.cy.getElementById(i));else if(1===t.outgoers("node").length){if(t.id()===n.treeRoot)n.treeRoot=t.outgoers("node")[0].id(),i=n.treeRoot,n.removeNode(t),n.pushStep([3,4]);else{var o;o=t.data("prev");var r=t.outgoers("node")[0];r.data(o),n.removeNode(t),n.addEdge(o,r.id()),i=r.id(),n.pushStep([3,4])}n.balance(n.cy.getElementById(i))}else{n.pushStep([6]);var s=n.inorderSuccessor(t);if(console.log("NODE",t),console.log("SUC",s),n.pushStep([7,8]),t.data("value",s.data("value")),s.data("value",e),n.pushStep([7,8],1e3,!1),!he(s)){console.log("ERROR"),console.log(Ee(s));var d=Ee(s)[1];d.data("prev",s.data("prev")),n.addEdge(s.data("prev"),d.id())}i=s.data("prev"),n.removeNode(s),n.pushStep(),n.balance(n.cy.getElementById(i))}return n.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",be.NODE)}),n.pushStep(),n.buffer},this.vh=a,this.vw=t}return Object(d.a)(e,[{key:"loadGraph",value:function(e,t){this.cy=Re({elements:JSON.parse(JSON.stringify(e))}),this.cy.nodes().forEach(function(e){e.id().match("popper")?e.data("style",be.NODE_POPPER):e.data("style",be.NODE)}),this.treeRoot=t}},{key:"exportGraph",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=[];return e&&this.layoutProcessing(),this.cy.nodes().forEach(function(e){var a=e.data("prevPosition");a||(a=e.data("position")),t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),prev:e.data("prev"),height:e.data("height"),balance:e.data("balance"),position:e.data("position"),style:e.data("style")},position:a})}),this.cy.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),t}},{key:"pushStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.buffer.push({elements:this.exportGraph(a),lines:e,duration:t,treeRoot:this.treeRoot,pseudo:this.pseudo})}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).data("position");this.cy.add({group:"nodes",data:{id:e+"-popper",style:be.NODE_POPPER,position:{x:t.x,y:t.y+30}},position:{x:t.x,y:t.y+30}})}},{key:"propagate",value:function(e,t){if(null!=e){e.data("X",e.data("X")+t);var a=Ee(e),n=Object(pe.a)(a,2),i=n[0],o=n[1];i&&this.propagate(i,t),o&&this.propagate(o,t)}}},{key:"layoutProcessing",value:function(){var e=this;if(""!==this.treeRoot){for(var t={},a=function a(n,i,o){console.log(n.data("value")),n.data("depth",i),n.data("X",o),void 0===t[i]&&(t[i]=Array()),t[i].push(n.id());var r=Ee(n),s=Object(pe.a)(r,2),d=s[0],l=s[1],u=0,c=0;d&&(u=a(d,i+1,o-1)),l&&(c=a(l,i+1,o+1));var p=c-u;return e.cy.getElementById(n.id()+"-popper").data("value",p),Math.max(u,c)+1}(this.cy.getElementById(this.treeRoot),0,0),n=0;n++<1e3;){for(var i=!0,o=a-1;o>=0;o--)for(var r=t[o],s=0;s<r.length-1;s++){var d=this.cy.getElementById(r[s]),l=this.cy.getElementById(r[s+1]);if(d.data("X")+1>=l.data("X")){var u=Ee(ye(this.cy,d,l)),c=Object(pe.a)(u,2),p=c[0],h=c[1],E=Math.max(d.data("X")-l.data("X"),1);this.propagate(p,-E),this.propagate(h,E),i=!1;break}}if(i)break}1001===n&&console.error("ALERT, INFINITE LOOP AVOIDED");var y=this.vw,m=this.vh;return function t(a,n,i){var o=a.data("position");a.data("prevPosition",o),a.data("position",{x:24*a.data("X")+n,y:i});var r=e.cy.getElementById(a.id()+"-popper"),s=r.data("position");r.data("prevPosition",s),r.data("position",{x:24*a.data("X")+n,y:i+30});var d=Ee(a),l=Object(pe.a)(d,2),u=l[0],c=l[1];u&&t(u,n,i+50),c&&t(c,n,i+50)}(this.cy.getElementById(this.treeRoot),y/2,m/4),!0}}},{key:"rotateLeft",value:function(e){var t=Ee(e),a=Object(pe.a)(t,2),n=a[0],i=a[1];if(null!=n){var o=Ee(n),r=Object(pe.a)(o,2),s=r[0],d=r[1];this.removeEdge(e.id(),n.id()),d&&(this.removeEdge(n.id(),d.id()),this.addEdge(e.id(),d.id()));var l=e.data("prev");this.addEdge(n.id(),e.id()),this.treeRoot!==e.id()?(this.removeEdge(l,e.id()),this.addEdge(l,n.id())):(this.treeRoot=n.id(),console.log(this.treeRoot)),e.data("height",Math.max(me(d),me(i))+1),n.data("height",Math.max(me(s),me(e))+1),e.data("balance",me(i)-me(d)),n.data("balance",me(e)-me(s)),this.pushStep([],1e3)}}},{key:"rotateRight",value:function(e){var t=Ee(e),a=Object(pe.a)(t,2),n=a[0],i=a[1];if(null!=i){var o=Ee(i),r=Object(pe.a)(o,2),s=r[0],d=r[1];this.removeEdge(e.id(),i.id()),s&&(this.removeEdge(i.id(),s.id()),this.addEdge(e.id(),s.id()));var l=e.data("prev");this.addEdge(i.id(),e.id()),this.treeRoot!==e.id()?(this.removeEdge(l,e.id()),this.addEdge(l,i.id())):(this.treeRoot=i.id(),console.log(this.treeRoot)),e.data("height",Math.max(me(n),me(s))+1),i.data("height",Math.max(me(e),me(d))+1),e.data("balance",me(s)-me(n)),i.data("balance",me(d)-me(e)),this.pushStep()}}},{key:"balance",value:function(e){var t=this,a=e;this.pseudo=Ie,this.pushStep();this.pushStep([1]),a.data("style",{"background-color":"red",color:"black"}),function e(){var n=Ee(a),i=Object(pe.a)(n,2),o=i[0],r=i[1],s=me(o),d=me(r);a.data("height",Math.max(s,d)+1);var l=d-s;a.data("balance",l),2===l?r.data("balance")>=0?(t.pushStep([2,3]),t.rotateRight(a)):(t.pushStep([6,7]),t.rotateLeft(r),t.rotateRight(a)):-2===l?o.data("balance")<=0?(t.pushStep([4,5]),t.rotateLeft(a)):(t.pushStep([8,9]),t.rotateRight(o),t.rotateLeft(a)):t.pushStep([1]),a.id()!==t.treeRoot&&(a.data("style",be.NODE),(a=t.cy.getElementById(a.data("prev"))).data("style",{"background-color":"red",color:"black"}),e())}()}},{key:"insert",value:function(e){var t=this;this.buffer=[];for(var a=0;this.cy.getElementById(a.toString()).length>0;)a++;var n=this.cy.nodes().length/2+1,i=null;if(this.pseudo=_e,this.pushStep(),n>1){!function n(o,r){if(console.log(o),r&&r.data("style",{color:"black","background-color":"white"}),o){o.data("style",{color:"white","background-color":"black"});var s=Ee(o),d=Object(pe.a)(s,2),l=d[0],u=d[1];e<o.data("value")?(t.pushStep([3,4]),n(l,o)):(t.pushStep([5,6]),n(u,o))}else r&&(t.addNode(a.toString(),e,0,0,r.data("position")),(i=t.cy.getElementById(a.toString()))&&(t.addEdge(r.id(),i.id()),i.data("prev",r.id()))),t.pushStep([1,2])}(this.cy.getElementById(this.treeRoot),null)}else this.addNode(a.toString(),e),i=this.cy.getElementById(a.toString()),this.treeRoot=a.toString(),this.pushStep([1,2]);return i&&this.balance(i),this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",be.NODE)}),this.pushStep(),this.buffer}},{key:"search",value:function(e){var t=this;this.buffer=[],this.pseudo=Oe,this.pushStep();var a=!1;return""===this.treeRoot?this.pushStep([1]):(!function n(i,o){if(o&&o.data("style",{"background-color":"white",color:"black"}),i){i.data("style",{"background-color":"black",color:"white"});var r=Ee(i),s=Object(pe.a)(r,2),d=s[0],l=s[1];i.data("value")===e?(i.data("style",{"background-color":"lightgreen",color:"black"}),a=!0,t.pushStep([2]),n(null,i)):i.data("value")<e?(t.pushStep([5,6]),n(l,i)):(t.pushStep([3,4]),n(d,i))}}(this.cy.getElementById(this.treeRoot),null),this.cy.nodes().forEach(function(e){e.id().match("popper")||e.data("style",be.NODE)})),this.pushStep(),{found:a,buffer:this.buffer}}},{key:"inorderSuccessor",value:function(e){var t=this;this.pushStep();var a=e;return function e(n,i){if(i&&(i.data("style",{"background-color":"white",color:"black"}),a=i),n){n.data("style",{"background-color":"red",color:"black"});var o=Ee(n)[0];t.pushStep(),e(o,n)}}(e=Ee(e)[1],null),a}},{key:"removeNodePopper",value:function(e){this.cy.remove(this.cy.getElementById(e+"-popper"))}}]),e}()),Le=a(13),xe=a(18),Ce=a(11).connect;a(118);xe.warnings(!1);var ke={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.layout={run:function(){},stop:function(){}},a.treeRoot="",a.state={show:!1,showSearchModal:!1,showInsertModal:!1,showRemoveModal:!1},a.undo=[],a.redo=[],a.nodeStyle=Le.NODE,a.edgeStyle=Le.EDGE,a.AVLProcessor=void 0,a.cy=xe(),a.buffer=[],a.options=void 0,a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({root:a.treeRoot,elements:e}),a.treeRoot=t.root,a.loadGraph(t.elements),a.AVLProcessor.loadGraph(t.elements,t.root))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({root:a.treeRoot,elements:e}),a.treeRoot=t.root,a.loadGraph(t.elements),a.AVLProcessor.loadGraph(t.elements,t.root))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,i=e.pseudo,o=e.lines;a.treeRoot=t,a.loadGraph(n,!0),i&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:i}}),o&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,i=e.pseudo,o=e.lines;a.treeRoot=t,a.loadGraph(n,!0),i&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:i}}),o&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.treeRoot,n=e.elements,i=e.pseudo,o=e.lines;a.treeRoot=t,a.loadGraph(n,!0),i&&a.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:i}}),o&&a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){var t=e.id();a.cy.remove(e),a.removeNodePopper(t)},a.removeEdge=function(e,t){a.cy.remove('edge[id="'+Ne(e,t)+'"]')},a.addNode=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{x:0,y:0};a.cy.add({group:"nodes",data:{id:e,value:t,height:n,balance:i},position:{x:o.x,y:o.y}}),a.createPopper(e)},a.addEdge=function(e,t){a.cy.add({group:"edges",data:{id:Ne(e,t),source:e,target:t}}),a.cy.getElementById(t).data("prev",e)},a.handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({show:!1}),e&&(a.treeRoot="0",a.layoutProcessing(),a.refreshLayout(),a.AVLProcessor.loadGraph(a.exportGraph(),"0"))},a.clearGraph=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.cy.nodes();0!==e.length&&(a.pushState(),e.forEach(function(e){return a.cy.remove(e)}),a.AVLProcessor.loadGraph([],""))}},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Insertar",run:function(){return a.setState({showInsertModal:!0})}},{name:"Eliminar",run:function(){return a.setState({showRemoveModal:!0})}},{name:"Buscar",run:function(){return a.setState({showSearchModal:!0})}},{name:"Subir AVL",run:function(){return a.setState({show:!0})}},{name:"Descargar AVL",run:function(){return function(e){var t="";if(0===e.length)return t;!function e(a){if(a){t+=a.data("value").toString();var n=Ee(a),i=Object(pe.a)(n,2),o=i[0],r=i[1];t+="(",e(o),t+=")",t+="(",e(r),t+=")"}else t+="."}(e);var a=document.createElement("a");return a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),a.setAttribute("download","avl.txt"),a.setAttribute("target","_blank"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),t}(a.cy.getElementById(a.treeRoot))}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize({root:"",elements:[]}),this.AVLProcessor=new Te(this.cy.width(),this.cy.height()),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,options:this.options,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat,remove:function(){return e.setState({showRemoveModal:!0})},clear:this.clearGraph}})}},{key:"initialize",value:function(e){var t=e.root,a=e.elements,n=Le.EDGE;this.cy=xe({container:document.getElementById("canvas"),elements:a,style:[{selector:"node",style:Le.NODE},{selector:"edge",style:n}],headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.nodes().forEach(function(e){e.id().match("-popper")&&e.style({"z-index":0,"border-width":0,"font-size":15,width:10,height:10})}),this.treeRoot=t,this.layout=this.cy.elements().makeLayout(Object(f.a)({},ke,{animate:!1})),this.layout.run(),this.refreshLayout()}},{key:"loadGraph",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cy.nodes(),i={};n.forEach(function(e){a&&(i[e.id()]=JSON.parse(JSON.stringify(e.data("position")))),t.cy.remove(e)});for(var o=0;o<e.length;o++)this.cy.add(JSON.parse(JSON.stringify(e[o])));this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var n=e.data("position");a&&i[e.id()]&&e.position({x:i[e.id()].x,y:i[e.id()].y}),null!=n&&(ke.positions[e.id()]=JSON.parse(JSON.stringify(n)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),prev:t.data("prev"),height:t.data("height"),balance:t.data("balance"),style:t.style(),position:{x:t.position().x,y:t.position().y}},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"pushState",value:function(){console.log("pushed"),this.redo=[],this.undo.push({root:this.treeRoot,elements:this.exportGraph()})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1}},{key:"componentDidUpdate",value:function(e){var t=this;ke.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){clearTimeout(t.animationTimeout),t.loadGraph(t.buffer[t.buffer.length-1].elements),t.treeRoot=t.buffer[t.buffer.length-1].treeRoot,t.props.dispatch({type:A.ANIMATION_END}),console.log(Ee(t.cy.getElementById(t.treeRoot)))}}]}})}},{key:"removeNodePopper",value:function(e){this.cy.remove(this.cy.getElementById(e+"-popper"))}},{key:"createPopper",value:function(e){var t=this.cy.getElementById(e).position();this.cy.add({group:"nodes",data:{id:e+"-popper",value:0},position:{x:t.x,y:t.y+30},style:{"z-index":0,"border-width":0,"font-size":15,width:10,height:10}})}},{key:"isLeaf",value:function(e){return 0===e.outgoers("node").length}},{key:"getChildren",value:function(e){var t=null,a=null,n=e.outgoers("node");if(n.length>=1&&(t=n[0]),2===n.length&&(a=n[1]),null!=t&&null!=a&&t.data("value")>a.data("value")){var i=[a,t];t=i[0],a=i[1]}else if(null!=t&&t.data("value")>e.data("value")){var o=[a,t];t=o[0],a=o[1]}else if(null!=a&&a.data("value")<e.data("value")){var r=[a,t];t=r[0],a=r[1]}return[t,a]}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(f.a)({},ke,{animate:e})),this.layout.run()}},{key:"propagate",value:function(e,t){if(null!=e){e.data("X",e.data("X")+t);var a=Ee(e),n=Object(pe.a)(a,2),i=n[0],o=n[1];i&&this.propagate(i,t),o&&this.propagate(o,t)}}},{key:"layoutProcessing",value:function(){var e=this;if(""!==this.treeRoot){for(var t={},a=function a(n,i,o){console.log(n.data("value")),n.data("depth",i),n.data("X",o),void 0===t[i]&&(t[i]=Array()),t[i].push(n.id());var r=Ee(n),s=Object(pe.a)(r,2),d=s[0],l=s[1],u=0,c=0;d&&(u=a(d,i+1,o-1)),l&&(c=a(l,i+1,o+1));var p=c-u;return e.cy.getElementById(n.id()+"-popper").data("value",p),Math.max(u,c)+1}(this.cy.getElementById(this.treeRoot),0,0),n=0;n++<1e3;){for(var i=!0,o=a-1;o>=0;o--)for(var r=t[o],s=0;s<r.length-1;s++){var d=this.cy.getElementById(r[s]),l=this.cy.getElementById(r[s+1]);if(d.data("X")+1>=l.data("X")){var u=Ee(ye(this.cy,d,l)),c=Object(pe.a)(u,2),p=c[0],h=c[1],E=Math.max(d.data("X")-l.data("X"),1);this.propagate(p,-E),this.propagate(h,E),i=!1;break}}if(i)break}1001===n&&console.error("ALERT, INFINITE LOOP AVOIDED");var y=this.cy.width(),m=this.cy.height();return function e(t,a,n){ke.positions[t.id()]={x:24*t.data("X")+a,y:n},ke.positions[t.id()+"-popper"]={x:24*t.data("X")+a,y:n+30};var i=Ee(t),o=Object(pe.a)(i,2),r=o[0],s=o[1];r&&e(r,a,n+50),s&&e(s,a,n+50)}(this.cy.getElementById(this.treeRoot),y/2,m/4),!0}}},{key:"animation",value:function(){var e=this;!function t(){if(e.props.animation){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration,r=a.pseudo,s=a.treeRoot,d=a.refresh;e.props.paused||(e.loadGraph(n,d),r&&e.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:r}}),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),null!=s&&(e.treeRoot=s),console.log(o),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed))}}()}},{key:"insert",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.cy.nodes(),n=0;n<a.length;n++)if(!a[n].id().match("popper")&&a[n].data("value")===t)return void this.props.dispatch({type:A.AVL_ELEMENT_ALREADY_INFO});this.pushState(),this.buffer=this.AVLProcessor.insert(t),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"search",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=this.AVLProcessor.search(t),n=(a.found,a.buffer);this.buffer=n,console.log(n),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.pushState(),this.buffer=this.AVLProcessor.remove(t),console.log(this.buffer),this.step=0,new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{show:this.state.showInsertModal,handleClose:function(){return e.setState({showInsertModal:!1})},callback:function(t){return e.insert(t)}}),i.a.createElement(B,{show:this.state.showSearchModal,handleClose:function(){return e.setState({showSearchModal:!1})},callback:function(t){return e.search(t)}}),i.a.createElement(B,{show:this.state.showRemoveModal,handleClose:function(){return e.setState({showRemoveModal:!1})},callback:function(t){return e.remove(t)}}),i.a.createElement(ge,{show:this.state.show,handleClose:this.handleClose,addNode:this.addNode,addEdge:this.addEdge,clearGraph:this.clearGraph}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),Ge=Ce(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection,paused:e.paused}})(De),we=function(){function e(){Object(s.a)(this,e),this._data=[]}return Object(d.a)(e,[{key:"isEmpty",value:function(){return 0===this._data.length}},{key:"front",value:function(){return this.isEmpty()?null:this._data[0]}},{key:"push",value:function(e){this._data.push(e)}},{key:"pop",value:function(){this.isEmpty()||this._data.shift()}}]),e}(),Pe=a(13),Be=function(e){var t=e.cy,a=e.selection.id,n={},i={},o=new we,r=[{lines:[1,2],duration:1e3}];o.push(a),i[a]=0,r.push({eles:[a],style:[Pe.NODE_GRAY],inst:[{name:"update_level",data:{id:a,value:0}}],lines:[3,4]});for(var s=function(){r.push({lines:[5]});var e=t.getElementById(o.front());if(o.pop(),"black"===n[e])return"continue";n[e.id()]="black",r.push({eles:[e.id()],style:[Pe.NODE_BLACK],lines:[6,7],inst:[{name:"shift"}]}),e.outgoers("edge").forEach(function(t){var a=t.target();r.push({eles:[t.id()],style:[Pe.EDGE_TRAVERSE],lines:[8]},{lines:[9]}),void 0===n[a.id()]?(n[a.id()]="gray",i[a.id()]=i[e.id()]+1,r.push({eles:[a.id()],style:[Pe.NODE_GRAY],inst:[{name:"update_level",data:{id:a.id(),value:i[a.id()],class:"heap-default"}}],lines:[10,11]},{eles:[t.id()],style:[Pe.EDGE_VISITED],duration:10}),o.push(a.id())):r.push({eles:[t.id()],style:[Pe.EDGE_VISITED],duration:10})})};!o.isEmpty();)s();return r},Me=a(13),Ue=function(e){var t=e.cy,a=e.selection.id,n=[{lines:[8,9,10]}];return function e(t,a,n,i,o){o[a.id()]=!0,i.push({eles:[a.id()],style:[Me.NODE_GRAY],inst:[{name:"update_level",data:{id:a.id(),value:n}}],lines:[1]}),a.outgoers("edge").forEach(function(a){var r=a.target();i.push({eles:[a.id()],style:[Me.EDGE_TRAVERSE],lines:[2]}),void 0===o[r.id()]?(i.push({lines:[3,4]},{eles:[a.id()],style:[Me.EDGE_VISITED],duration:10}),e(t,r,n+1,i,o)):i.push({eles:[a.id()],style:[Me.EDGE_VISITED],duration:10})}),i.push({eles:[a.id()],style:[Me.NODE_BLACK],inst:[{name:"pop"}],lines:[5]})}(t,t.getElementById(a),0,n,{}),n},Fe=a(13),je=function(e){var t=e.cy,a=e.selection.id,n=new ae(function(e,t){return e.distance<t.distance},function(e,t){return e.distance===t.distance}),i={},o={},r=[];r.push({lines:[1,2]}),i[a]=0,n.push({distance:0,id:a}),r.push({eles:t.nodes().map(function(e){return e.id()}),distance:Array(t.nodes().length).fill("\u221e"),duration:1e3,inst:[{name:"fill",data:{value:"\u221e",class:"heap-default"}}],lines:[3]});for(var s=function(){r.push({lines:[4]});var e=n.top(),a=e.id,s=e.distance;if(n.pop(),o[a])return"continue";o[a]=!0;var d=t.getElementById(a);r.push({eles:[a],distance:[s.toString()],style:[Fe.NODE_RED],duration:1e3,inst:[{name:"change_element",position:parseInt(d.data("value"),10)-1,data:{value:s.toString(),class:"heap-wrong"}}],lines:[5]}),d.outgoers("edge").forEach(function(e){var t=e.target(),a=e.data("weight"),o=t.id();r.push({eles:[e.id()],style:[Fe.EDGE_TRAVERSE],lines:[6],duration:1e3});var d=i[o];void 0===d&&(d="inf"),void 0===i[o]||s+a<i[o]?(i[o]=s+a,r.push({lines:[7],eles:[o],style:[Fe.NODE_GRAY]}),n.push({distance:s+a,id:o}),"inf"!==d&&r.push({eles:[o],distance:[s+a+"\u2264"+d],duration:1e3}),r.push({eles:[o],distance:[s+a],duration:1e3,lines:[8,9],inst:[{name:"change_element",position:parseInt(t.data("value"),10)-1,data:{value:(s+a).toString(),class:"heap-default"}}]})):r.push({eles:[o],distance:[d+"\u2264"+(s+a)],duration:1e3,lines:[8]},{eles:[o],distance:[d],duration:1e3}),r.push({eles:[e.id()],style:[Fe.EDGE_VISITED],duration:10})}),r.push({eles:[a],distance:[s.toString()],style:[Fe.NODE_BLACK],duration:1e3,inst:[{name:"change_element",position:parseInt(d.data("value"),10)-1,data:{value:s.toString(),class:"heap-default"}}]})};!n.isEmpty();)s();return r},He=a(13),Ve=function(e){var t=e.cy,a=e.selection.id,n={},i={},o=[];o.push({eles:t.nodes().map(function(e){return e.id()}),distance:Array(t.nodes().length).fill("\u221e"),duration:1e3,lines:[1,2]}),n[a]=0,o.push({eles:[a],distance:[0],lines:[3]});for(var r=t.nodes().length/2,s=(t.edges(),0);s<r-1;s++)for(var d=1;d<=r;d++){var l="node-"+d;t.getElementById(l).outgoers("edge").forEach(function(e){var t=e.data("source"),a=e.data("target"),r=e.data("weight"),s=e.id();if(o.push({eles:[t,a,s],style:[He.NODE_BLACK,He.NODE_BLACK,He.EDGE_SELECTED],lines:[5]}),null!=n[t]){var d=null==n[a]?"\u221e":n[a].toString();null==n[a]||n[t]+r<n[a]?(o.push({eles:[a],distance:[(n[t]+r).toString()+"<"+d],lines:[6,7]}),n[a]=n[t]+r,i[a]={id:s,u:t,v:a},o.push({eles:[a],distance:[n[t]+r]})):(o.push({eles:[a],distance:[d+"\u2264"+(n[t]+r).toString()]}),o.push({eles:[a],distance:[d]}))}o.push({eles:[t,a,s],style:[He.NODE,He.NODE,He.EDGE_DIRECTED]})})}for(var u=!1,c=1;c<=r&&!u;c++){var p="node-"+c;t.getElementById(p).outgoers("edge").forEach(function(e){if(!u){var t=e.data("source"),a=e.data("target"),r=e.data("weight"),s=e.id();if(o.push({eles:[t,a,s],style:[He.NODE_BLACK,He.NODE_BLACK,He.EDGE_SELECTED],lines:[9]}),null!=n[t]&&n[t]+r<n[a]){for(var d=[],l=[],c={};;){c[a]=!0;var p=i[a];if(d.push(p.id,p.u,p.v),l.push(He.EDGE_SELECTED,He.NODE_RED,He.NODE_RED),c[a=p.u])break}return o.push({eles:d,style:l,inst:[{name:"negative_cycle"}],lines:[10,11]}),void(u=!0)}o.push({eles:[t,a,s],style:[He.NODE,He.NODE,He.EDGE_DIRECTED]})}})}return o},Ke=a(13),ze=function(e){var t=e.cy,a=t.nodes(),n=t.edges(),i={},o={},r=new ae(function(e,t){return e.weight<=t.weight}),s=[];s.push({eles:a.map(function(e){return e.data("id")}),distance:Array(t.nodes().length).fill("\u221e"),lines:[1,2,3,4,5]},{eles:n.map(function(e){return e.data("id")}),style:Array(t.edges().length).fill(Ke.EDGE_NO_MST),duration:1e3,lines:[1,2,3,4,5]}),a.forEach(function(e){e.id().match("-popper")||r.push({target:e.id(),edgeId:"NONE",weight:1/0})});for(var d=function(){var e=r.top();r.pop();var a=e.target,n=e.edgeId,d=e.weight;if(o[a])return"continue";d===1/0&&(i[a]=0),s.push({lines:[6],duration:1e3}),o[a]=!0;var l=t.getElementById(a);s.push({eles:[a],style:[Ke.NODE_RED],duration:1e3,lines:[7,8],inst:[{name:"change_element",position:parseInt(l.data("value"),10)-1,data:{value:i[a].toString(),class:"heap-wrong"}}]}),"NONE"!==n&&(s.push({eles:[n],style:[Ke.EDGE_MST],lines:[9,10]}),o[n]=!0),t.getElementById(a).connectedEdges().forEach(function(e){if(!o[e.id()]){var n=e.target().id();if(n===a&&(n=e.source().id()),!o[n]){var d,l=e.data("weight");s.push({eles:[e.id()],style:[Ke.EDGE_TRAVERSE],lines:[11]}),s.push({lines:[12]}),(void 0===i[n]||i[n]>l)&&(s.push({lines:[13,14],eles:[n],style:[Ke.NODE_GRAY],distance:[l],inst:[{name:"change_element",position:parseInt(t.getElementById(n).data("value"),10)-1,data:{value:l.toString(),class:"heap-default"}}]}),i[n]=l,r.push({target:n,edgeId:e.id(),weight:l})),d=o[e.id()]?Ke.EDGE_MST:Ke.EDGE_NO_MST,s.push({eles:[e.id()],style:[d],duration:10})}}}),s.push({inst:[{name:"change_element",position:parseInt(l.data("value"),10)-1,data:{value:void 0===i[a]?"0":i[a].toString(),class:"heap-default"}}]})};!r.isEmpty();)d();return s},Je=function(){function e(t){var a=this;Object(s.a)(this,e),this._parent={},t.forEach(function(e){return a._parent[e.id()]=e.id()})}return Object(d.a)(e,[{key:"find",value:function(e){return this._parent[e]===e?e:(this._parent[e]=this.find(this._parent[e]),this._parent[e])}},{key:"join",value:function(e,t){this._parent[this.find(e)]=this.find(t)}},{key:"connected",value:function(e,t){return this.find(e)===this.find(t)}}]),e}(),Ye=a(13),We=function(e){var t=e.cy,a=t.nodes(),n=t.edges(),i=new ae(function(e,t){return e.data("weight")<=t.data("weight")});n.forEach(function(e){return i.push(e)});for(var o=[{eles:n.map(function(e){return e.data("id")}),style:Array(t.edges().length).fill(Ye.EDGE_NO_MST),duration:1e3,lines:[1,2]}],r=new Je(a);!i.isEmpty();){var s=i.top();i.pop();var d=s.source().id(),l=s.target().id();if(o.push({eles:[s.id()],style:[Ye.EDGE_TRAVERSE],duration:1e3,lines:[3]}),r.connected(d,l))o.push({eles:[s.id()],style:[Ye.EDGE_NO_MST],duration:1e3,lines:null});else{r.join(d,l),s.data("weight");var u=s.source(),c=s.target();o.push({eles:[s.id(),u.id(),c.id()],style:[Ye.EDGE_MST,Ye.NODE_RED,Ye.NODE_RED],duration:1e3,lines:[4,5]})}}return o},qe={singlySet:{main:[{text:"ListaEnlazada{",ind:0},{text:"Nodo* inicio",ind:1},{text:"ExtraerPrimero()",ind:1},{text:"ExtraerUltimo()",ind:1},{text:"InsertarPrimero(Entero v)",ind:1},{text:"InsertarUltimo(Entero v)",ind:1},{text:"Eliminar(Nodo* p)",ind:1},{text:"InsertarAntesDe(Nodo* p, Entero v)",ind:1},{text:"InsertarDespuesDe(Nodo* p, Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"InsertarPrimero(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si inicio==NULL",ind:1},{text:"inicio=p",ind:2},{text:"Sino:",ind:1},{text:"p->sig=inicio",ind:2},{text:"inicio=p",ind:2}],pushBack:[{text:"InsertarUltimo(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si inicio==NULL",ind:1},{text:"inicio=p",ind:2},{text:"Sino:",ind:1},{text:"nodo *actual = inicio",ind:2},{text:"Mientras(actual->sig != NULL):",ind:2},{text:"actual=actual->sig",ind:3},{text:"actual->sig=p",ind:2}],popFront:[{text:"ExtraerFrente():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"nodo* aux=inicio",ind:1},{text:"inicio=inicio->sig",ind:1},{text:"retornar aux",ind:1}],popBack:[{text:"ExtraerUltimo():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"Si inicio->sig == NULL:",ind:1},{text:"Nodo* aux = inicio",ind:2},{text:"inicio=NULL",ind:2},{text:"retornar aux",ind:2},{text:"nodo *actual = inicio, *anterior",ind:1},{text:"Mientras(actual->sig != NULL):",ind:1},{text:"anterior=actual",ind:2},{text:"actual=actual->sig",ind:2},{text:"anterior->sig=NULL",ind:1},{text:"retornar actual",ind:1}],insertBefore:[{text:"InsertarAntesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si inicio==p",ind:1},{text:"aux->sig=inicio",ind:2},{text:"inicio=aux",ind:2},{text:"sino:",ind:1},{text:"Nodo *actual=inicio",ind:2},{text:"Mientras actual->sig != p:",ind:2},{text:"actual=actual->sig",ind:3},{text:"actual->sig=aux",ind:2},{text:"aux->sig=p",ind:2}],insertAfter:[{text:"InsertarDespuesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *s = p->sig",ind:1},{text:"p->sig=aux",ind:1},{text:"aux->sig=s",ind:1}],remove:[{text:"Eliminar(Nodo *p):",ind:0},{text:"Si inicio==p:",ind:1},{text:"inicio=inicio->sig",ind:2},{text:"borrar p",ind:2},{text:"Sino:",ind:1},{text:"Nodo *actual=incio, *anterior=NULL",ind:2},{text:"Mientras actual != p:",ind:2},{text:"anterior=actual",ind:3},{text:"actual=actual->sig",ind:3},{text:"anterior->sig=p->sig",ind:2},{text:"borrar p",ind:2}]},doublySet:{main:[{text:"ListaDoblementeEnlazada{",ind:0},{text:"Nodo *primero, *ultimo",ind:1},{text:"ExtraerPrimero()",ind:1},{text:"ExtraerUltimo()",ind:1},{text:"InsertarPrimero(Entero v)",ind:1},{text:"InsertarUltimo(Entero v)",ind:1},{text:"Eliminar(Nodo* p)",ind:1},{text:"InsertarAntesDe(Nodo* p, Entero v)",ind:1},{text:"InsertarDespuesDe(Nodo* p, Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *ant, *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"InsertarPrimero(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si primero==NULL",ind:1},{text:"primero=ultimo=p",ind:2},{text:"Sino:",ind:1},{text:"p->sig=primero",ind:2},{text:"primero->ant=p",ind:2},{text:"primero=p",ind:2}],pushBack:[{text:"InsertarUltimo(Entero v):",ind:0},{text:"Nodo *p = nuevo Nodo(v)",ind:1},{text:"Si primero==NULL",ind:1},{text:"primero=ultimo=p",ind:2},{text:"Sino:",ind:1},{text:"ultimo->sig=p",ind:2},{text:"p->ant=ultimo",ind:2},{text:"ultimo=p",ind:2}],popFront:[{text:"ExtraerFrente():",ind:0},{text:"Si primero == NULL: retornar",ind:1},{text:"nodo* aux=primero",ind:1},{text:"primero=primero->sig",ind:1},{text:"Si primero==NULL:",ind:1},{text:"ultimo=NULL",ind:2},{text:"Sino:",ind:1},{text:"primero->ant=NULL",ind:2},{text:"retornar aux",ind:1}],popBack:[{text:"ExtraerUltimo():",ind:0},{text:"Si inicio == NULL: retornar",ind:1},{text:"nodo* aux=ultimo",ind:1},{text:"ultimo=ultimo->ant",ind:1},{text:"Si ultimo==NULL:",ind:1},{text:"inicio=NULL",ind:2},{text:"Sino:",ind:1},{text:"ultimo->sig=NULL",ind:2},{text:"retornar aux",ind:1}],insertBefore:[{text:"InsertarAntesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *ant = p->ant",ind:1},{text:"aux->sig=p, aux->ant=ant",ind:1},{text:"p->ant=aux",ind:1},{text:"Si ant == NULL:",ind:1},{text:"primero=aux",ind:2},{text:"Sino:",ind:1},{text:"ant->sig=aux",ind:2}],insertAfter:[{text:"InsertarDespuesDe(Nodo *p, Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Nodo *sig = p->sig",ind:1},{text:"aux->ant=p, aux->sig=sig",ind:1},{text:"p->sig=aux",ind:1},{text:"Si sig == NULL:",ind:1},{text:"ultimo=aux",ind:2},{text:"Sino:",ind:1},{text:"sig->ant=aux",ind:2}],remove:[{text:"Eliminar(Nodo *p):",ind:0},{text:"Nodo *ant=p->ant, *sig=p->sig",ind:1},{text:"Caso 1: ant==NULL y sig==NULL:",ind:1},{text:"primero=ultimo=NULL",ind:2},{text:"Caso 2: ant==NULL y sig!=NULL",ind:1},{text:"primero=sig",ind:2},{text:"Caso 3: ant!=NULL y sig==NULL:",ind:1},{text:"ultimo=ant",ind:2},{text:"Caso 4: ant!=NULL y sig!=NULL",ind:1},{text:"ant->sig=sig, sig->ant=ant",ind:2},{text:"borrar p",ind:1}]},queueSet:{main:[{text:"Cola{",ind:0},{text:"Nodo *frente, *final",ind:1},{text:"Encolar(Entero v)",ind:1},{text:"Desencolar()",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[],pushBack:[{text:"Encolar(Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si frente==NULL:",ind:1},{text:"frente=final=aux",ind:2},{text:"Sino:",ind:1},{text:"final->sig=aux",ind:2},{text:"final=aux",ind:2}],popFront:[{text:"Desencolar():",ind:0},{text:"Si frente==NULL: retornar",ind:1},{text:"Nodo *aux = frente->sig"},{text:"Si frente==NULL: ",ind:1},{text:"ultimo=NULL",ind:2},{text:"Sino:",ind:1},{text:"frente=frente->sig",ind:2},{text:"retornar aux",ind:1}],popBack:[],insertBefore:[],insertAfter:[],remove:[]},stackSet:{main:[{text:"Pila{",ind:0},{text:"Nodo *tope",ind:1},{text:"Apilar(Entero v)",ind:1},{text:"Desapilar(Entero v)",ind:1},{text:"}",ind:0},{text:"\u2063",ind:0},{text:"Nodo{",ind:0},{text:"Entero v",ind:1},{text:"Nodo *sig",ind:1},{text:"}",ind:0}],pushFront:[{text:"Apilar(Entero v):",ind:0},{text:"Nodo *aux = nuevo Nodo(v)",ind:1},{text:"Si tope==NULL:",ind:1},{text:"tope=aux",ind:2},{text:"Sino:",ind:1},{text:"aux->sig=tope",ind:2},{text:"tope=aux",ind:2}],pushBack:[],popFront:[{text:"Desapilar():",ind:0},{text:"Si tope==NULL: retornar",ind:1},{text:"Nodo *aux=tope",ind:1},{text:"tope=tope->sig",ind:1},{text:"retornar aux",ind:1}],popBack:[],insertBefore:[],insertAfter:[],remove:[]}},Xe={BFS:{execute:Be,directed:!0,action:A.SELECT_BFS},DFS:{execute:Ue,directed:!0,action:A.SELECT_DFS},Dijkstra:{execute:je,directed:!0,weighted:!0,action:A.SELECT_DIJKSTRA},BellmanFord:{execute:Ve,directed:!0,weighted:!0,action:A.SELECT_BELLMAN_FORD},Prim:{execute:ze,directed:!1,weighted:!0,action:A.SELECT_PRIM},Kruskal:{execute:We,directed:!1,weighted:!0,action:A.SELECT_KRUSKAL},Heap:{action:A.SELECT_HEAP},AVL:{action:A.SELECT_AVL},BubbleSort:{action:A.SELECT_BUBBLESORT},MergeSort:{action:A.SELECT_MERGESORT},BinarySearch:{action:A.SELECT_BINARY_SEARCH},SingleLinkedList:{action:A.SELECT_LINKED_LIST,type:A.SELECT_SINGLE_LINKED_LIST,pseudoset:qe.singlySet},DoubleLinkedList:{action:A.SELECT_LINKED_LIST,type:A.SELECT_DOUBLE_LINKED_LIST,pseudoset:qe.doublySet},Stack:{action:A.SELECT_LINKED_LIST,type:A.SELECT_STACK,pseudoset:qe.stackSet},Queue:{action:A.SELECT_LINKED_LIST,type:A.SELECT_QUEUE,pseudoset:qe.queueSet}},Qe=a(14),$e=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);for(var n=t.length,i=[],o=0;o<n;o++){i.push({eles:[],style:[],lines:[1,2]});for(var r=!0,s=0;s<n-1;s++){var d=void 0,l=!1;if(t[s]>t[s+1]){r=!1,l=!0;var u=[t[s+1],t[s]];t[s]=u[0],t[s+1]=u[1],d="LightCoral"}else d="Chartreuse";i.push({eles:[s.toString(),(s+1).toString()],style:[{"background-color":d},{"background-color":d}],duration:1e3,lines:[4]},{eles:[s.toString(),(s+1).toString()],style:[{"background-color":"white"},{"background-color":"white"}],data:[{value:t[s]},{value:t[s+1]}],duration:1e3,lines:l?[5,6]:[3]}),l&&i.push({eles:[],style:[],lines:[3]})}if(r){i.push({eles:[],style:[],lines:[7]});break}}return i},Ze=a(11).connect,et=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).input=void 0,a.setStepInputRef=void 0,a.handleAccept=function(){if(a.input&&a.validateArray(a.input.value)){var e=a.input.value.split(",").map(function(e){return parseInt(e)});console.log(e),a.props.changeArray(e),a.props.handleClose()}},a.handleChange=function(e){a.setState({text:e.currentTarget.value})},a.handleCancel=function(){a.setState({text:a.props.currentValues.toString()}),a.props.handleClose()},a.input=null,a.state={text:a.props.currentValues.toString()},a.setStepInputRef=function(e){a.input=e},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"validateArray",value:function(e){return!(!e||!/^(([-]?([0-9]{1,3})([,][ ]*)){0,15})([-]?([0-9]{1,3}))$/.test(e))||(this.props.dispatch({type:A.INVALID_ARRAY_ERROR}),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.show,n=t.handleClose;return i.a.createElement(x.a,{show:a,onHide:n},i.a.createElement(x.a.Header,{className:"modal-header",closeButton:!0},i.a.createElement(x.a.Title,null,"Introduzca un arreglo de enteros")),i.a.createElement(x.a.Body,null,i.a.createElement("p",null,"Debe estar representado por maximo 16 numeros separados por coma"),i.a.createElement("p",null,"Cada numero debe estar entre -999 y 999"),i.a.createElement("input",{type:"text",ref:this.setStepInputRef,value:this.state.text,size:60,onChange:function(t){return e.handleChange(t)}})),i.a.createElement(x.a.Footer,null,i.a.createElement(C.a,{variant:"secondary",onClick:this.handleCancel},"Cancelar"),i.a.createElement(C.a,{variant:"primary",onClick:this.handleAccept},"Aceptar")))}}]),t}(i.a.Component),tt=Ze()(et),at=a(13),nt=a(18),it=a(11).connect,ot=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=nt(),a.undo=[],a.redo=[],a.state={show:!1,values:[1,4,8,1,4,3,6,9,10,-1]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=at.NODE,a.options=void 0,a.buffer=[],a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(console.log("UNDO"),0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}})},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BUBBLESORT_INFO}),a.step=0,a.animation()},a.runButton=function(){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),a.valuesToGraph(),void clearTimeout(a.animationTimeout);new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START});var n=$e(a.state.values);a.buffer=j(a.exportGraph(),n),e()}).then(function(){setTimeout(a.executeAnimation,1e3/a.props.speed)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){a.setState({values:e})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ordenar",run:a.runButton},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.valuesToGraph(),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue}})}},{key:"componentDidUpdate",value:function(e,t){t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(e){var t=e.id(),a=document.getElementById(t+"popper");a&&document.body.removeChild(a)})}},{key:"initialize",value:function(e){this.cy=nt({container:document.getElementById("canvas"),elements:e,style:[{selector:"node",style:Object(f.a)({},at.NODE,{shape:"square"})}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(Qe.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)})}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"animation",value:function(){var e=this;!function t(){if(e.step===e.buffer.length)return e.props.dispatch({type:A.ARRAY_SORTED_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration;i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),e.props.paused||(e.loadGraph(n),e.refreshLayout(),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed))}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){var e=this,t=this.state.values;this.cy.nodes().forEach(function(t){return e.cy.remove(t)});for(var a=0;a<t.length;a++)this.addNode(a.toString(),t[a]),this.refreshLayout()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(tt,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),rt=it(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(ot),st=function(e,t,a){var n=[],i=t/2;return function e(t,a,i,o,r){var s=Object(Qe.a)(t),d=s.length,l=[],u=[],c=[],p=[],h=[],E=[],y={nodes:[],duration:1e3,style:[]},m=(i+o)/2;if(s.forEach(function(e,t){l.push({id:(a+t).toString()}),p.push({x:m-17.5*(d-1)+35*t,y:r}),u.push({"border-width":"3"}),c.push({"border-width":"1"}),h.push({id:(a+t).toString()+"-"+r.toString(),value:"+",position:{x:m-17.5*(d-1)+35*t,y:r}}),E.push({id:(a+t).toString()+"-"+r.toString(),value:"-"})}),n.push({nodes:l,style:u,positions:p}),n.push({shadows:h,duration:10}),1===d)return n.push({nodes:[],lines:[1,2],shadows:[{id:a+"-"+r,value:"-"}]}),s;var f=Math.floor((d+1)/2);n.push({nodes:[],lines:[3]}),n.push({nodes:l,style:c,duration:10});var v=e(s.slice(0,f),a,i,(i+o)/2,r+50);n.push({nodes:l,style:u,duration:10}),n.push({nodes:[],lines:[4]}),n.push({nodes:l,style:c,duration:10});var g=e(s.slice(f),a+f,(i+o)/2,o,r+50);n.push({nodes:l,style:u,duration:10});var N=0,_=0;n.push({nodes:[],lines:[5]},{nodes:[],lines:[8,9]});for(var S=0;S<d;S++){var I=m-17.5*(d-1)+35*S;y={nodes:[],duration:1e3},_==g.length||N<v.length&&v[N].value<=g[_].value?(y.nodes=[{id:v[N].id}],y.lines=[11,12],y.positions=[{x:I,y:r}],s[S]=v[N++]):(y.nodes=[{id:g[_].id}],y.positions=[{x:I,y:r}],s[S]=g[_++],y.lines=[13,14]),n.push(y)}return n.push({nodes:[],lines:[15]}),n.push({nodes:[],lines:[5]}),n.push({nodes:l,style:c,shadows:E}),s}(e=e.map(function(e,t){return{value:e,id:t.toString()}}),0,i-35*e.length,i+35*e.length,a/4),n},dt=(a(13),a(18)),lt=(a(11).connect,function(e){var t=[];return e.nodes().forEach(function(e){var a=e.data("prevPosition");a||(a=e.data("position")),t.push({group:"nodes",data:{id:e.id(),value:e.data("value"),style:e.data("style"),position:e.data("position")},position:a}),e.data("prevPosition",e.data("position"))}),e.edges().forEach(function(e){t.push({group:"edges",data:{id:e.id(),source:e.source().id(),target:e.target().id(),weight:e.data("weight"),style:e.data("style")}})}),console.log(JSON.parse(JSON.stringify(t))),JSON.parse(JSON.stringify(t))}),ut=function(e,t){for(var a=dt({elements:JSON.parse(JSON.stringify(e)),headless:!0}),n=[],i=[],o=0,r=function(e){var r=t[e],s=r.nodes,d=r.duration,l=r.lines,u=r.style,c=r.positions,p=r.shadows;null==d&&(d=1e3),null==l&&(l=[]),n.push({elements:lt(a),lines:i,duration:o}),i=l,o=d,s&&s.forEach(function(e,t){var n=a.getElementById(e.id);n.data("prevPosition",n.data("position"));var i=n.data("style");u&&n.data("style",Object(f.a)({},i,u[t])),c&&n.data("position",c[t])}),p&&p.forEach(function(e){"+"===e.value?function(e,t,a){console.log("adding shadow"),e.add({group:"nodes",data:{id:t,style:{zIndex:1},position:{x:a.x,y:a.y}},position:{x:a.x,y:a.y}}),console.log("shadow added",e.nodes())}(a,e.id,e.position):a.remove('node[id="'+e.id+'"]')})},s=0;s<t.length;s++)r(s);return n.push({elements:lt(a),lines:i,duration:0}),n},ct=a(13),pt=a(18),ht=a(11).connect,Et={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},yt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=pt(),a.state={show:!1,values:[4,8,12,16,10,4,45,17]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=Object(f.a)({},ct.NODE,{shape:"square",zIndex:2}),a.options=void 0,a.buffer=[],a.undo=[],a.redo=[],a.step=0,a.animationTimeout=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}}),Et.positions[e]={x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}},a.addShadow=function(e,t){a.cy.add({group:"nodes",data:{id:e},style:{"z-index":1},position:t}),Et.positions[e]=t},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BUBBLESORT_INFO}),a.step=0,a.animation()},a.runButton=function(){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),a.valuesToGraph(),void clearTimeout(a.animationTimeout);new Promise(function(e,t){a.props.dispatch({type:A.ANIMATION_START});var n=st(a.state.values,a.cy.width(),a.cy.height());a.buffer=ut(a.exportGraph(),n),e()}).then(function(){setTimeout(a.executeAnimation,1e3/a.props.speed)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){a.setState({values:e})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Ordenar",run:a.runButton},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.initialize([]),this.valuesToGraph(),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}})}},{key:"componentDidUpdate",value:function(e,t){Et.animationDuration=500/this.props.speed,t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1}},{key:"initialize",value:function(e){this.cy=pt({container:document.getElementById("canvas"),elements:JSON.parse(JSON.stringify(e)),style:[{selector:"node",style:this.nodeStyle}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),Et.positions={},this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout(Et),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(Qe.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var a=e.data("position");null!=a&&(Et.positions[e.id()]=JSON.parse(JSON.stringify(a)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),zIndex:a.style("z-index"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(f.a)({},Et,{animate:!0})),this.layout.run()}},{key:"animation",value:function(){var e=this;!function t(){if(console.log(e.props.paused),e.step===e.buffer.length)return e.props.dispatch({type:A.ARRAY_SORTED_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(e.props.animation){var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration;e.props.paused||(e.loadGraph(n),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),console.log(o),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed))}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){for(var e=this.state.values,t=0;t<e.length;t++)this.addNode(t.toString(),e[t]);this.refreshLayout()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(tt,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),mt=ht(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(yt),ft=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a]);for(var n=t.length,i=0;i<n;i++){for(var o=!0,r=0;r<n-1;r++)if(t[r]>t[r+1]){o=!1;var s=[t[r+1],t[r]];t[r]=s[0],t[r+1]=s[1]}if(o)break}return t},vt=function(e,t){for(var a=ft(e),n=a.length,i=Array(n).fill().map(function(e,t){return t.toString()}),o=Array(n).fill({"border-width":1,"z-index":0}),r=[],s=0,d=n-1,l=!1;s<=d;){r.push({eles:i,style:o,duration:0});for(var u={eles:[],style:[]},c=s;c<=d;c++)u.eles.push(c.toString()),u.style.push({"border-width":3,"z-index":1});r.push(u);var p=Math.floor((s+d)/2);if(r.push({eles:[p.toString()],style:[{"background-color":"gray","z-index":2}],lines:[3]}),r.push({lines:t<a[p]?[6,7]:a[p]<t?[8,9]:[4,5]}),a[p]===t){r.push({eles:[p.toString()],style:[{"background-color":"lightgreen"}],lines:[4,5]}),l=!0;break}r.push({eles:[p.toString()],style:[{"background-color":"white","z-index":1}],duration:10}),a[p]<t?s=p+1:d=p-1}return l||r.push({eles:[],style:[],lines:[10]}),r},gt=a(13),Nt=a(18),_t=a(11).connect,St=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a._mediaRecorder=new T,a.cy=Nt(),a.undo=[],a.redo=[],a.state={show:!1,showInputModal:!1,values:[1,2,3,4,5,6,7,8]},a.layout={run:function(){},stop:function(){}},a.nodeStyle=gt.NODE,a.options=void 0,a.buffer=[],a.animationTimeout=0,a.step=0,a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.undo.pop();a.redo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var e=a.redo.pop();a.undo.push(Object(Qe.a)(a.state.values)),e&&a.changeArray(e)}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.addNode=function(e,t){a.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.cy.width()/2-17.5*(a.state.values.length-1)+35*parseInt(e),y:a.cy.height()/4}})},a.executeAnimation=function(e,t){a.cy.nodes().style({"background-color":"white",color:"black"}),a.props.dispatch({type:A.STARTING_BINARY_SEARCH_INFO}),a.step=0,a.animation()},a.runButton=function(e){if(a.props.animation)return a.props.dispatch({type:A.ANIMATION_END}),a.clearGraph(),a.valuesToGraph(),void clearTimeout(a.animationTimeout);new Promise(function(t,n){a.props.dispatch({type:A.ANIMATION_START});var i=vt(a.state.values,e);a.buffer=j(a.exportGraph(),i),t(a.cy.nodes("[value = "+e+"]").length>0)}).then(function(e){setTimeout(a.executeAnimation,1e3/a.props.speed,e)})},a.handleClose=function(){a.setState({show:!1})},a.changeArray=function(e){var t=ft(e);a.setState({values:t})},a._mediaRecorder=new T(e.dispatch),a.options=[{name:"Buscar",run:function(){return a.setState({showInputModal:!0})}},{name:"Cambiar arreglo",run:function(){return a.setState({show:!0})}}],a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},options:this.options,undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,pause:this.handlePauseContinue,repeat:this.handleRepeat}}),this.initialize([]),this.valuesToGraph()}},{key:"componentDidUpdate",value:function(e,t){t.values!==this.state.values&&(this.clearGraph(),this.valuesToGraph()),e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:this.runButton}]}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:A.ANIMATION_END}),this._isMounted=!1,clearTimeout(this.animationTimeout),this.cy.nodes().forEach(function(e){var t=e.id(),a=document.getElementById(t+"popper");a&&document.body.removeChild(a)})}},{key:"pushState",value:function(){this.redo=[],this.undo.push(Object(Qe.a)(this.state.values))}},{key:"loadGraph",value:function(e){var t=this;this.cy.nodes().forEach(function(e){t.cy.remove(e)});for(var a=0;a<e.length;a++)this.cy.add(e[a]);this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)})}},{key:"exportGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return this.cy.nodes().forEach(function(a){t.push({group:"nodes",data:{id:a.id(),value:a.data("value"),position:a.position(),style:e?{color:a.style("color"),backgroundColor:a.style("background-color"),borderWidth:a.style("border-width"),width:a.style("width"),height:a.style("height"),visibility:a.style("visibility")}:{}},position:{x:a.position().x,y:a.position().y}})}),t}},{key:"refreshLayout",value:function(){this.layout.stop(),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"animation",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function a(){if(e.props.animation){if(e.step===e.buffer.length)return e.props.dispatch({type:t?A.BINARY_SEARCH_FOUND_SUCCESS:A.BINARY_SEARCH_NOT_FOUND_INFO}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(!e.props.paused){var n=e.buffer[e.step++],i=n.elements,o=n.lines,r=n.duration;e.loadGraph(i),o&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:o}}),e.refreshLayout(),e.animationTimeout=window.setTimeout(a,(void 0===r?1e3:r)/e.props.speed)}}else e.cy.nodes().style(e.nodeStyle)}()}},{key:"valuesToGraph",value:function(){var e=this,t=this.state.values;this.cy.nodes().forEach(function(t){return e.cy.remove(t)});for(var a=0;a<t.length;a++)this.addNode(a.toString(),t[a]),this.refreshLayout()}},{key:"initialize",value:function(e){this.cy=Nt({container:document.getElementById("canvas"),elements:e,style:[{selector:"node",style:Object(f.a)({},gt.NODE,{shape:"square"})}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.cy.autopanOnDrag({enabled:!0,speed:.01}),this.layout=this.cy.elements().makeLayout({name:"preset"}),this.layout.run()}},{key:"clearGraph",value:function(){for(var e=this.cy.nodes(),t=0;t<e.length;t++)this.cy.remove('node[id="'+e[t].id()+'"]')}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{show:this.state.showInputModal,handleClose:function(){return e.setState({showInputModal:!1})},callback:function(t){return e.runButton(t)},currentValue:0}),i.a.createElement(tt,{show:this.state.show,handleClose:this.handleClose,changeArray:function(t){e.pushState(),e.changeArray(t)},currentValues:this.state.values}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),It=_t(function(e){return{animation:e.animation,speed:e.speed,paused:e.paused}})(St),Ot=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";Object(s.a)(this,e),this._data=[],this._data=Object(Qe.a)(t),this.type=a}return Object(d.a)(e,[{key:"length",value:function(){return this._data.length}},{key:"push_back",value:function(e,t){var a,n=e.id,i=e.value,o=void 0,r=[];if(0===this.length()?r.push({lines:[2,3]}):this.type===A.SELECT_QUEUE?a=[4,5,6]:this.type===A.SELECT_DOUBLE_LINKED_LIST&&(a=[4,5,6,7]),t)for(var s=0;s<this.length();s++){var d=this._data[s].id;r.push({eles:[d],style:[{"background-color":"black",color:"white"}],lines:[6,7]},{eles:[d],style:[{"background-color":"white",color:"black"}],duration:10})}return this.length()&&(o=this._data[this.length()-1].id),this.type===A.SELECT_SINGLE_LINKED_LIST&&(a=[8]),r.push({eles:[],style:[],inst:[{name:"push_back",data:{id:n,value:i,source:o}}],lines:a}),console.log(r),r}},{key:"pop_back",value:function(e){if(0===this.length())return[];var t=[];if(e)for(var a=0;a<this.length();a++){var n=this._data[a].id,i=void 0;i=1===this.length()?[2,3,4,5]:[7,8,9],t.push({eles:[n],style:[{"background-color":"black",color:"white"}],lines:i},{eles:[n],style:[{"background-color":"white",color:"black"}],duration:10})}var o,r=this._data[this.length()-1].id;return this.type===A.SELECT_SINGLE_LINKED_LIST&&this.length()>1?o=[10,11]:this.type===A.SELECT_DOUBLE_LINKED_LIST&&(t.push({eles:[r],style:[{"background-color":"black",color:"white"}],lines:[2,3]}),o=1===this.length()?[4,5]:[6,7]),t.push({eles:[],style:[],inst:[{name:"pop_back",data:{id:r,value:this.length()-1}}],lines:o}),t}},{key:"push_front",value:function(e){var t,a=e.id,n=e.value,i=void 0;return this.length()&&(i=this._data[0].id),0===this.length()?t=[2,3]:this.type===A.SELECT_SINGLE_LINKED_LIST?t=[4,5,6]:this.type===A.SELECT_DOUBLE_LINKED_LIST?t=[4,5,6,7]:this.type===A.SELECT_STACK&&(t=[4,5,6]),[{eles:[],style:[],inst:[{name:"push_front",data:{id:a,value:n,target:i}}],lines:t}]}},{key:"pop_front",value:function(){if(0===this.length())return[{eles:[],style:[]}];var e,t=this._data[0].id,a=[];return this.type===A.SELECT_SINGLE_LINKED_LIST||this.type===A.SELECT_STACK?e=[2,3,4]:this.type===A.SELECT_DOUBLE_LINKED_LIST?(a.push({eles:[t],style:[{"background-color":"black",color:"white"}],lines:[2,3]}),e=1===this.length()?[4,5]:[6,7]):e=1===this.length()?[3,4]:[5,6],a.push({eles:[],style:[],inst:[{name:"pop_front",data:{id:t}}],lines:e}),a}},{key:"search",value:function(e){for(var t=this.length(),a=[],n=0;n<t;n++){var i=this._data[n].id;if(a.push({eles:[i],style:[{"background-color":"black",color:"white"}]}),this._data[n].value===e)return a.push({eles:[i],style:[{"background-color":"lightgreen",color:"black"}]}),!0;a.push({eles:[i],style:[{"background-color":"white",color:"black"}],duration:10})}return a}},{key:"insert_before",value:function(e,t,a){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.length(),r=[];for(n=0;n<o;n++){var s=this._data[n].id;if(e===s)break;i&&r.push({eles:[s],style:[{"background-color":"black",color:"white"}],lines:[7,8]},{eles:[s],style:[{"background-color":"white",color:"black"}],duration:10})}if(n===o)return r;var d,l=n,u="",c=e;return d=this.type===A.SELECT_SINGLE_LINKED_LIST?0===l?[2,3,4]:[9,10]:0===l?[5,6]:[7,8],l-1>=0&&(u=this._data[l-1].id,r.push({inst:[{name:"remove_edge",data:{source:u,target:c}}],lines:this.type===A.SELECT_DOUBLE_LINKED_LIST?[2,3,4]:void 0,duration:500})),r.push({inst:[{name:"add_node_before",data:{id:t,value:a,pos:l}},{name:"add_edge",data:{source:u,target:t}},{name:"add_edge",data:{source:t,target:c}}],lines:d}),r}},{key:"insert_after",value:function(e,t,a){var n,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.length(),r=[];for(n=0;n<o;n++){var s=this._data[n].id;if(i&&r.push({eles:[s],style:[{"background-color":"black",color:"white"}],duration:500},{eles:[s],style:[{"background-color":"white",color:"black"}],duration:10}),e===s)break}if(n===o)return r;var d,l=n,u=e,c="";return l+1<this.length()&&(c=this._data[l+1].id),l+1<this.length()&&r.push({inst:[{name:"remove_edge",data:{source:u,target:c},duration:500}],lines:this.type===A.SELECT_DOUBLE_LINKED_LIST?[2,3,4]:[2,3]}),d=this.type===A.SELECT_DOUBLE_LINKED_LIST?l===this.length()-1?[5,6]:[7,8]:[4],r.push({inst:[{name:"add_node",data:{id:t,value:a,pos:l}},{name:"add_edge",data:{source:u,target:t}},{name:"add_edge",data:{source:t,target:c}}],lines:d,duration:500}),r}},{key:"delete_position",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.length(),i=[];for(t=0;t<n;t++){var o=this._data[t].id;if(a){var r=void 0;r=e===o&&0===t?[1,2]:[6,7,8],i.push({eles:[o],style:[{"background-color":"black",color:"white"}],duration:1e3,lines:r},{eles:[o],style:[{"background-color":"white",color:"black"}],duration:10})}if(e===o)break}if(t===n)return i;var s,d,l,u=t;if(u>0&&u+1<this.length()&&(s=this._data[u-1].id,d=this._data[u+1].id),this.type===A.SELECT_SINGLE_LINKED_LIST)l=0===u?[3]:[9,10];else if(this.type===A.SELECT_DOUBLE_LINKED_LIST){var c;c=1===this.length()?[2,3]:0===u?[4,5]:u===this.length()-1?[6,7]:[8,9],i.push({eles:[e],style:[{"background-color":"black",color:"white"}],lines:c}),l=[10]}return i.push({inst:[{name:"remove",data:{id:e,value:u,source:s,target:d}}],lines:l,duration:500}),i}}]),e}(),At=(a(13),a(18)),bt=(a(11).connect,function(){function e(t,a,n,i){var o=this;Object(s.a)(this,e),this.cy=At(),this.vh=void 0,this.vw=void 0,this.list=new Ot,this.buffer=[],this.doublyLinked=void 0,this.removeNode=function(e){o.cy.remove('node[id="'+e+'"]')},this.removeEdge=function(e){o.cy.remove('edge[id="'+e+'"]')},this.vh=a,this.vw=t,this.doublyLinked=n,this.list=new Ot([],i)}return Object(d.a)(e,[{key:"loadGraph",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.cy=At({elements:JSON.parse(JSON.stringify(e))}),this.list._data=Object(Qe.a)(t)}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){var a=t.data("prevPosition");a||(a=t.data("position")),e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:t.data("position"),style:t.data("style")},position:a})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight"),style:t.data("style")}})}),e}},{key:"layoutProcessing",value:function(){var e=this.list.length();if(0!==e)for(var t=this.vw/2,a=0;a<e;a++){var n=this.list._data[a].id,i=this.cy.getElementById(n),o=i.data("position");i.data("prevPosition",{x:o.x,y:o.y}),i.data("position",{x:t-35*(e-1)+70*a,y:this.vh/4})}}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e,value:t,position:{x:a.x,y:a.y}}})}},{key:"addEdge",value:function(e,t){this.cy.add({group:"edges",data:{id:e+"-"+t,source:e,target:t,weight:"sig"}})}},{key:"pushStep",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.buffer.push({elements:this.exportGraph(),lines:e,duration:t,list:this.list._data})}},{key:"processCommands",value:function(e){var t=this;this.cy.nodes().style({"background-color":"white",color:"black"}),this.buffer=[];var a=[],n=0;this.pushStep([],0),console.log(e);for(var i=function(i){var o=e[i],r=o.eles,s=o.style,d=o.duration,l=o.inst,u=o.lines;null==d&&(d=1e3),null==u&&(u=a),t.layoutProcessing(),t.pushStep(a,n),a=u,n=d,r&&r.forEach(function(e,a){s&&t.cy.getElementById(e).data("style",s[a])}),l&&l.forEach(function(e){if(null!=e.data){var a=e.data,n=a.id,i=a.value,o=a.source,r=a.target;if("remove"===e.name)void 0!==n&&t.removeNode(n),null!=o&&null!=r&&t.addEdge(o,r),void 0!==i&&t.list._data.splice(i,1);else if("add"===e.name)void 0!==n&&void 0!==i&&(t.addNode(n,i),t.list._data.push({id:n,value:i}),void 0!==o&&t.addEdge(o,n),void 0!==r&&t.addEdge(n,r));else if("push_back"===e.name){if(null!=n&&null!=i){var s=t.list.length();t.addNode(n,i,{x:t.vw/2+35*s,y:t.vh/4-70}),t.list._data.push({id:n,value:i}),null!=o&&t.addEdge(o,n)}}else if("push_front"===e.name)null!=n&&null!=i&&(t.addNode(n,i,{x:t.vw/2-35*t.list.length(),y:t.vh/4-70}),t.list._data.unshift({id:n,value:i}),null!=r&&t.addEdge(n,r));else if("pop_front"===e.name)null!=n&&(t.removeNode(n),t.list._data.shift());else if("pop_back"===e.name)null!=n&&(t.removeNode(n),t.list._data.pop());else if("add_node_before"===e.name){var d=e.data,l=d.id,u=d.value,c=d.pos;if(null!=l&&null!=u&&null!=c){var p=t.vw/2-35*(t.list.length()-1)+70*c;if(t.addNode(l,u,{x:p,y:t.vh/4-70}),0===c)t.list._data.unshift({id:l,value:u});else{var h,E=t.list._data.splice(c);t.list._data.push({id:l,value:u}),t.list._data=(h=t.list._data).concat.apply(h,Object(Qe.a)(E))}}}else if("add_node"===e.name){var y=e.data,m=y.id,f=y.value,v=y.pos;if(null!=m&&null!=f&&null!=v){var g=t.vw/2-35*(t.list.length()-1)+70*v;if(t.addNode(m,f,{x:g,y:t.vh/4-70}),++v===t.list.length())t.list._data.push({id:m,value:f});else{var N,_=t.list._data.splice(v);t.list._data.push({id:m,value:f}),t.list._data=(N=t.list._data).concat.apply(N,Object(Qe.a)(_))}}}else if("add_edge"===e.name){var S=e.data,I=S.source,O=S.target;I&&O&&(console.log("ADD",I,O),t.addEdge(I,O))}else if("remove_edge"===e.name){var A=e.data,b=A.source,R=A.target;b&&R&&(t.removeEdge(b+"-"+R),t.doublyLinked&&t.removeEdge(R+"-"+b))}}})},o=0;o<e.length;o++)i(o);this.layoutProcessing(),this.pushStep(a,n)}},{key:"pushFront",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=0;this.cy.getElementById(t.toString()).length>0;)t++;var a=this.list.push_front({id:t.toString(),value:e});return this.processCommands(a),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"pushBack",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=0;this.cy.getElementById(a.toString()).length>0;)a++;var n=this.list.push_back({id:a.toString(),value:e},t);return this.processCommands(n),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"popFront",value:function(){var e=this.list.pop_front();return this.processCommands(e),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"popBack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.list.pop_back(e);return this.processCommands(t),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"insert",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,o=0;this.cy.getElementById(o.toString()).length>0;)o++;return console.log(i),console.log(this.list._data),e="before"===a?this.list.insert_before(i,o.toString(),t,n):this.list.insert_after(i,o.toString(),t,n),this.processCommands(e),this.layoutProcessing(),this.pushStep(),this.buffer}},{key:"remove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,a=this.list.delete_position(t,e);return this.processCommands(a),this.layoutProcessing(),this.pushStep(),this.buffer}}]),e}()),Rt=a(18),Tt=a(13),Lt=a(11).connect,xt={name:"preset",positions:{},padding:30,animate:!0,animationDuration:500},Ct=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e)))._mediaRecorder=new T(a.props.dispatch),a._isMounted=!1,a.list=new Ot,a.undo=[],a.redo=[],a.ListProcessor=void 0,a.layout={run:function(){},stop:function(){}},a.doublyLinked=!1,a.state={showDeleteModal:!1,showPushBeforeModal:!1,showPushBackModal:!1,showPushFrontModal:!1,showPushAfterModal:!1},a.cy=Rt(),a.nodeStyle=Object(f.a)({},Tt.NODE,{shape:"square"}),a.edgeStyle={},a.buffer=[],a.options=[],a.step=0,a.animationTimeout=0,a.clearGraph=function(){if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.CLEAR_GRAPH});var e=a.cy.nodes();if(0!==e.length){a.pushState(),a.ListProcessor.loadGraph();for(var t=0;t<e.length;t++)a.removeNode(e[t].id())}}},a.handleClickOnNode=function(e){if(!0!==a.props.animation){var t=e.id(),n=a.props.selection;if(n&&"node"===n.type)if(a.cy.getElementById(n.id).style(a.nodeStyle),n.id===t)return void a.props.dispatch({type:A.NO_SELECTION});e.style(Tt.NODE_SELECTED),a.props.dispatch({type:A.SELECTION,payload:{selection:{id:t,type:"node"}}})}},a.handleUndo=function(){if(0!==a.undo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.undo.pop();void 0!==t&&(a.redo.push({list:JSON.parse(JSON.stringify(a.ListProcessor.list._data)),elements:e}),a.loadGraph(t.elements),a.ListProcessor.loadGraph(t.elements,t.list))}},a.handleRedo=function(){if(0!==a.redo.length)if(a.props.animation)a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{a.props.dispatch({type:A.NO_SELECTION});var e=a.exportGraph(),t=a.redo.pop();void 0!==t&&(a.undo.push({list:JSON.parse(JSON.stringify(a.ListProcessor.list._data)),elements:e}),a.loadGraph(t.elements),a.ListProcessor.loadGraph(t.elements,t.list))}},a.handleRewind=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.max(a.step-1,0);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleForward=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=Math.min(a.step+1,a.buffer.length-1);var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handleRepeat=function(){clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}),a.step=0;var e=a.buffer[a.step],t=e.elements,n=e.lines;a.loadGraph(t),a.props.dispatch({type:A.CHANGE_LINE,payload:{lines:n}})},a.handlePauseContinue=function(){a.props.paused?new Promise(function(e){a.props.dispatch({type:A.ANIMATION_CONTINUE}),e()}).then(function(){return a.animation()}):(clearTimeout(a.animationTimeout),a.props.dispatch({type:A.ANIMATION_PAUSE}))},a.removeNode=function(e){a.cy.remove('node[id="'+e+'"]')},a.removeEdge=function(e){a.cy.remove('edge[id="'+e+'"]')},a.props.type===A.SELECT_SINGLE_LINKED_LIST||a.props.type===A.SELECT_DOUBLE_LINKED_LIST?a.options=[{name:"Insertar al frente",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushFrontModal:!0})}},{name:"Insertar al final",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushBackModal:!0})}},{name:"Extraer frente",run:function(){return a.popFront()}},{name:"Extraer final",run:function(){return a.popBack(!a.doublyLinked)}},{name:"Insertar antes de",run:function(){return a.props.selection?a.setState({showPushBeforeModal:!0}):a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Insertar despues de",run:function(){return a.props.selection?a.setState({showPushAfterModal:!0}):a.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}},{name:"Eliminar nodo",run:function(){return a.remove(!a.doublyLinked)}}]:a.props.type===A.SELECT_STACK?a.options=[{name:"Apilar",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushFrontModal:!0})}},{name:"Desapilar",run:function(){return a.popFront()}}]:a.props.type===A.SELECT_QUEUE&&(a.options=[{name:"Encolar",run:function(){return a.props.animation?a.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):a.setState({showPushBackModal:!0})}},{name:"Desencolar",run:function(){return a.popFront()}}]),a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"initialize",value:function(e){var t=this;this.edgeStyle=Object(f.a)({},Tt.EDGE,Tt.EDGE_DIRECTED),this.doublyLinked&&(this.edgeStyle=Object(f.a)({},this.edgeStyle,Tt.EDGE_DOUBLE));var a=e.list,n=e.elements;this.cy=Rt({container:document.getElementById("canvas"),elements:n,style:[{selector:"node",style:Object(f.a)({},Tt.NODE,{shape:"square"})},{selector:"edge",style:this.edgeStyle}],layout:{name:"preset"},headless:!1,styleEnabled:!0,hideEdgesOnViewport:!1,hideLabelsOnViewport:!1,userPanningEnabled:!1,zoomingEnabled:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.2,pixelRatio:"1.0",autoungrabify:!0}),this.list._data=a,this.cy.on("click","node",function(e){return t.handleClickOnNode(e.target)}),this.cy.on("resize",function(){return t.refreshLayout(!1)}),this.layout=this.cy.elements().makeLayout(xt),this.layout.run(),this.refreshLayout(!1)}},{key:"componentDidUpdate",value:function(e){var t=this;xt.animationDuration=500/this.props.speed,e.animation&&!this.props.animation?this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:this.options}}):!e.animation&&this.props.animation&&this.props.dispatch({type:A.CHANGE_OPTIONS,payload:{options:[{name:"Volver a edicion",run:function(){clearTimeout(t.animationTimeout),t.loadGraph(t.buffer[t.buffer.length-1].elements),t.props.dispatch({type:A.ANIMATION_END})}}]}})}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.doublyLinked=this.props.type===A.SELECT_DOUBLE_LINKED_LIST,this.list.type=this.props.type,this.initialize({list:[],elements:[]}),this.ListProcessor=new bt(this.cy.width(),this.cy.height(),this.doublyLinked,this.props.type),this.props.dispatch({type:this.props.action,payload:{photo:function(){return e._mediaRecorder.takePicture(e.cy)},gif:function(){return e._mediaRecorder.takeGif(e.cy)},undo:this.handleUndo,redo:this.handleRedo,rewind:this.handleRewind,forward:this.handleForward,repeat:this.handleRepeat,pause:this.handlePauseContinue,remove:function(){return e.remove(!e.doublyLinked)},clear:this.clearGraph,options:this.options,type:this.props.type}})}},{key:"componentWillUnmount",value:function(){var e=this;this.props.dispatch({type:A.ANIMATION_END}),clearTimeout(this.animationTimeout),this._isMounted=!1,this.cy.nodes().forEach(function(t){e.removeNode(t.id())})}},{key:"layoutProcessing",value:function(){var e=this.list.length();if(0!==e)for(var t=this.cy.width()/2,a=0;a<e;a++){var n=this.list._data[a].id;xt.positions[n]={x:t-35*(e-1)+70*a,y:this.cy.height()/4}}}},{key:"refreshLayout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.layout.stop(),this.layout=this.cy.elements().makeLayout(Object(f.a)({},xt,{animate:e})),this.layout.run()}},{key:"pushState",value:function(){this.redo=[],this.undo.push({list:JSON.parse(JSON.stringify(this.ListProcessor.list._data)),elements:this.exportGraph()})}},{key:"loadGraph",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cy.nodes(),i={};n.forEach(function(e){a&&(i[e.id()]=JSON.parse(JSON.stringify(e.data("position")))),t.cy.remove(e)});for(var o=0;o<e.length;o++)this.cy.add(JSON.parse(JSON.stringify(e[o])));this.cy.nodes().forEach(function(e){var t=e.data("style");null!=t&&e.style(t);var n=e.data("position");a&&i[e.id()]&&e.position({x:i[e.id()].x,y:i[e.id()].y}),null!=n&&(xt.positions[e.id()]=JSON.parse(JSON.stringify(n)))}),this.cy.edges().forEach(function(e){var t=e.data("style");null!=t&&e.style(t)}),this.refreshLayout()}},{key:"exportGraph",value:function(){var e=[];return this.cy.nodes().forEach(function(t){e.push({group:"nodes",data:{id:t.id(),value:t.data("value"),position:{x:t.position().x,y:t.position().y}},position:{x:t.position().x,y:t.position().y}})}),this.cy.edges().forEach(function(t){e.push({group:"edges",data:{id:t.id(),source:t.source().id(),target:t.target().id(),weight:t.data("weight")}})}),e}},{key:"animation",value:function(){var e=this;!function t(){if(e._isMounted){if(e.step===e.buffer.length)return e.props.dispatch({type:A.FINISHED_ALGORITHM_SUCCESS}),void e.props.dispatch({type:A.ANIMATION_PAUSE});if(!e.props.animation)return e.cy.nodes().style(e.nodeStyle),e.cy.edges().style(e.edgeStyle),e.props.dispatch({type:A.ANIMATION_END}),void e.cy.autolock(!1);var a=e.buffer[e.step++],n=a.elements,i=a.lines,o=a.duration;e.props.paused||(e.loadGraph(n),i&&e.props.dispatch({type:A.CHANGE_LINE,payload:{lines:i}}),e.animationTimeout=window.setTimeout(t,(void 0===o?1e3:o)/e.props.speed))}}()}},{key:"addNode",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};this.cy.add({group:"nodes",data:{id:e,value:t},position:{x:a.x,y:a.y}}),xt.positions[e]=a}},{key:"addEdge",value:function(e,t){this.cy.add({group:"edges",data:{id:e+"-"+t,source:e,target:t,weight:"sig"}})}},{key:"pushFront",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.step=0,this.pushState(),this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushFront}}),this.buffer=this.ListProcessor.pushFront(t),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()}))}},{key:"pushBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.pushBack}}),this.step=0,this.pushState(),this.buffer=this.ListProcessor.pushBack(t,a),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()}))}},{key:"popFront",value:function(){var e=this;if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{if(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popFront}}),0===this.ListProcessor.list.length())return this.props.dispatch({type:A.CHANGE_LINE,payload:{lines:[1]}}),void this.props.dispatch({type:A.EMPTY_LIST_WARNING});this.step=0,this.pushState(),this.buffer=this.ListProcessor.popFront(),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}}},{key:"popBack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.animation?this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR}):(this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.popBack}}),0!==this.ListProcessor.list.length()?(this.step=0,this.pushState(),this.buffer=this.ListProcessor.popBack(t),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})):this.props.dispatch({type:A.EMPTY_LIST_WARNING}))}},{key:"remove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var a=this.props.selection;if(a){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:this.props.pseudoset.remove}}),this.step=0,this.pushState();var n=a.id;this.buffer=this.ListProcessor.remove(t,n),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"insert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.props.animation)this.props.dispatch({type:A.ANIMATION_RUNNING_ERROR});else{var i=this.props.selection;if(i){this.props.dispatch({type:A.CHANGE_PSEUDO,payload:{pseudo:"before"===a?this.props.pseudoset.insertBefore:this.props.pseudoset.insertAfter}}),this.step=0,this.pushState();var o=i.id;this.buffer=this.ListProcessor.insert(t,a,n,o),new Promise(function(t,a){e.props.dispatch({type:A.ANIMATION_START}),t()}).then(function(){return e.animation()})}else this.props.dispatch({type:A.NO_NODE_SELECTED_ERROR})}}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{show:this.state.showPushFrontModal,handleClose:function(){return e.setState({showPushFrontModal:!1})},callback:function(t){return e.pushFront(t)}}),i.a.createElement(B,{show:this.state.showPushBackModal,handleClose:function(){return e.setState({showPushBackModal:!1})},callback:function(t){return e.pushBack(t,e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),i.a.createElement(B,{show:this.state.showPushBeforeModal,handleClose:function(){return e.setState({showPushBeforeModal:!1})},callback:function(t){return e.insert(t,"before",e.props.type===A.SELECT_SINGLE_LINKED_LIST)}}),i.a.createElement(B,{show:this.state.showPushAfterModal,handleClose:function(){return e.setState({showPushAfterModal:!1})},callback:function(t){return e.insert(t,"after")}}),i.a.createElement("div",{id:"canvas",className:"standard-struct"}))}}]),t}(i.a.Component),kt=Lt(function(e){return{animation:e.animation,speed:e.speed,selection:e.selection,paused:e.paused}})(Ct),Dt={BFS:"/bfs",DFS:"/dfs",Dijkstra:"/dijkstra",BellmanFord:"/bellman-ford",Kruskal:"/kruskal",Prim:"/prim",BubbleSort:"/bubblesort",MergeSort:"/mergesort",BinarySearch:"/busqueda-binaria",SingleLinkedList:"/lista-enlazada",DoubleLinkedList:"/lista-doblemente-enlazada",Queue:"/cola",Stack:"/pila",MinHeap:"/minheap",AVL:"/avl"},Gt=a(43),wt=Gt.HashRouter,Pt=Gt.Route,Bt=(Gt.Switch,function(e){function t(e){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement(wt,null,i.a.createElement(y.a,null,i.a.createElement(m.a,null,i.a.createElement(Pt,{path:Dt.BFS,render:function(){return i.a.createElement(W,Xe.BFS)}}),i.a.createElement(Pt,{path:Dt.DFS,render:function(){return i.a.createElement(W,Xe.DFS)}}),i.a.createElement(Pt,{path:Dt.Dijkstra,render:function(){return i.a.createElement(W,Xe.Dijkstra)}}),i.a.createElement(Pt,{path:Dt.BellmanFord,render:function(){return i.a.createElement(W,Xe.BellmanFord)}}),i.a.createElement(Pt,{path:Dt.Prim,render:function(){return i.a.createElement(W,Xe.Prim)}}),i.a.createElement(Pt,{path:Dt.Kruskal,render:function(){return i.a.createElement(W,Xe.Kruskal)}}),i.a.createElement(Pt,{path:Dt.MinHeap,render:function(){return i.a.createElement(ce,Xe.Heap)}}),i.a.createElement(Pt,{path:Dt.AVL,render:function(){return i.a.createElement(Ge,Xe.AVL)}}),i.a.createElement(Pt,{path:Dt.BubbleSort,render:function(){return i.a.createElement(rt,Xe.BubbleSort)}}),i.a.createElement(Pt,{path:Dt.MergeSort,render:function(){return i.a.createElement(mt,Xe.MergeSort)}}),i.a.createElement(Pt,{path:Dt.BinarySearch,render:function(){return i.a.createElement(It,Xe.BinarySearch)}}),i.a.createElement(Pt,{path:Dt.SingleLinkedList,render:function(){return i.a.createElement(kt,Xe.SingleLinkedList)}}),i.a.createElement(Pt,{path:Dt.DoubleLinkedList,render:function(){return i.a.createElement(kt,Xe.DoubleLinkedList)}}),i.a.createElement(Pt,{path:Dt.Queue,render:function(){return i.a.createElement(kt,Xe.Queue)}}),i.a.createElement(Pt,{path:Dt.Stack,render:function(){return i.a.createElement(kt,Xe.Stack)}}))))}}]),t}(i.a.Component)),Mt=a(43),Ut=Mt.NavLink,Ft=Mt.HashRouter,jt=((0,a(11).connect)(function(e){return{algorithm:e.algorithm}})(function(e){for(var t=[{name:"BFS"},{name:"DFS"},{name:"Dijkstra"},{name:"Prim"},{name:"Kruskal"},{name:"Heap"},{name:"AVL"},{name:"BubbleSort"},{name:"MergeSort"}],a=[],n=0;n<t.length;n++)a.push(i.a.createElement(Ut,{to:"/"+t[n].name},i.a.createElement("li",{className:t[n].name===e.algorithm?"active":"normal"},t[n].name)));return i.a.createElement(Ft,null,i.a.createElement("ul",null,a))}),[{text:"BFS(Grafo G(V,E), nodo inicio):",ind:0},{text:"Para cada nodo u \u2208 V:",ind:1},{text:"color[u]=Blanco",ind:2},{text:"color[inicio]=Gris:",ind:1},{text:"encolar(cola, inicio)",ind:1},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer(cola)",ind:2},{text:"color[u]=Negro",ind:2},{text:"Para cada v adyacente a u:",ind:2},{text:"Si color[v] es Blanco:",ind:3},{text:"color[v]=Gris",ind:4},{text:"encolar(cola, v)",ind:4}]),Ht=function(e){var t=e.op,a=Array();return t.forEach(function(e){var t=e.name,n=e.run;a.push(i.a.createElement("button",{onClick:n},t))}),i.a.createElement(i.a.Fragment,null,a)},Vt=(0,a(11).connect)(function(e){return{speed:e.speed}})(function(e){return i.a.createElement(y.a,null,i.a.createElement(m.a,{xs:12},i.a.createElement("div",{className:"slidecontainer"},i.a.createElement("input",{type:"range",min:"0.25",max:"5",value:e.speed,id:"myRange",step:"0.05",onChange:function(t){e.dispatch({type:A.CHANGE_SPEED,payload:{speed:t.currentTarget.value}})},className:"slider"}))))}),Kt=a(24),zt=a(21),Jt=a(11).connect,Yt={BFS:"BFS",DFS:"DFS",Dijkstra:"Dijkstra",BellmanFord:"Bellman-Ford",Prim:"Prim",Kruskal:"Kruskal",Heap:"Min Heap",AVL:"Arbol AVL",BubbleSort:"Bubble Sort",MergeSort:"Merge Sort",BinarySearch:"Busqueda Binaria",SingleLinkedList:"Lista enlazada",DoubleLinkedList:"Lista doble",Queue:"Cola",Stack:"Pila"},Wt=0,qt=function(e){var t=e.title,a=e.callback,n=e.delay,o=e.children;return i.a.createElement("button",{title:t,className:"dropdown-button",onMouseDown:function(){a(),Wt=window.setInterval(function(){return a()},n),console.log("STARTED",Wt)},onMouseUp:function(){console.log("STOP",Wt),clearInterval(Wt)}},o)},Xt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={showActions:!0},a.interval=0,a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props.algorithm);var t,a=this.props,n=a.animation,o=a.paused;return n?t=[i.a.createElement(m.a,{md:1},i.a.createElement("button",{title:o?"Continuar":"Pausa",className:"dropdown-button",onClick:this.props.pause},i.a.createElement(Kt.a,{icon:o?zt.d:zt.c,size:"lg"}))),i.a.createElement(m.a,{md:1},i.a.createElement("button",{title:"Repetir",className:"dropdown-button",onClick:this.props.repeat},i.a.createElement(Kt.a,{icon:zt.e,size:"lg"}))),i.a.createElement(m.a,{md:1},i.a.createElement(qt,{title:"Retroceder",callback:this.props.rewind,delay:200},i.a.createElement(Kt.a,{icon:zt.a,size:"lg"}))),i.a.createElement(m.a,{md:1},i.a.createElement(qt,{title:"Avanzar",callback:this.props.forward,delay:200},i.a.createElement(Kt.a,{icon:zt.b,size:"lg"})))]:(t=[i.a.createElement(m.a,{md:1},i.a.createElement(qt,{title:"Deshacer",callback:this.props.undo,delay:500},i.a.createElement(Kt.a,{icon:zt.h,size:"lg"}))),i.a.createElement(m.a,{md:1},i.a.createElement(qt,{title:"Rehacer",callback:this.props.redo,delay:500},i.a.createElement(Kt.a,{icon:zt.e,size:"lg"})))],this.props.remove&&t.push(i.a.createElement(m.a,{md:1},i.a.createElement("button",{title:"Eliminar elemento",className:"dropdown-button",onClick:this.props.remove},i.a.createElement(Kt.a,{icon:zt.f,size:"lg"})))),this.props.clear&&t.push(i.a.createElement(m.a,{md:1},i.a.createElement("button",{title:"Limpiar canvas",className:"dropdown-button",onClick:this.props.clear},i.a.createElement(Kt.a,{icon:zt.g,size:"lg"}))))),i.a.createElement("div",{className:"footer"},"none"!==this.props.algorithm&&i.a.createElement(y.a,null,i.a.createElement(m.a,{md:2},i.a.createElement("div",{className:"dropup"},i.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.setState({showActions:!e.state.showActions})}},Yt[this.props.algorithm]),this.state.showActions&&i.a.createElement("div",{className:"actions-menu"},i.a.createElement(Ht,{op:this.props.options})))),i.a.createElement(m.a,{md:1},i.a.createElement("span",null,"Velocidad"),i.a.createElement(Vt,null)),i.a.createElement(i.a.Fragment,null,t),i.a.createElement(m.a,{md:{span:2,offset:7-t.length}},i.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.props.dispatch({type:A.TOGGLE_PSEUDO})}},"Pseudocodigo"))))}}]),t}(i.a.Component),Qt=Jt(function(e){return Object(f.a)({},e)})(Xt),$t=a(11).connect,Zt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).handleClick=function(){a.props.dispatch({type:A.PHOTO_SUCCESS}),a.props.callback()},a}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("button",{className:"dropdown-button",onClick:this.handleClick},"Foto")}}]),t}(i.a.Component),ea=$t()(Zt),ta=a(11).connect,aa=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"handleClick",value:function(){this.props.callback()}},{key:"render",value:function(){var e=this,t=this.props.timeEllapsed,a=Math.floor(t/10).toString(),n=(t%10).toString();return 1===a.length&&(a="0"+a),i.a.createElement("button",{className:"dropdown-button",onClick:function(){return e.handleClick()}},"GIF 0:",a,":",n)}}]),t}(i.a.Component),na=ta(function(e){return{timeEllapsed:e.gifLength}})(aa),ia=a(11).connect,oa=a(43),ra=oa.NavLink,sa=oa.HashRouter,da=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=[i.a.createElement(ra,{to:Dt.BFS},i.a.createElement("button",{className:"dropdown-button"},"BFS")),i.a.createElement(ra,{to:Dt.DFS},i.a.createElement("button",{className:"dropdown-button"},"DFS")),i.a.createElement(ra,{to:Dt.Dijkstra},i.a.createElement("button",{className:"dropdown-button"},"Dijkstra")),i.a.createElement(ra,{to:Dt.BellmanFord},i.a.createElement("button",{className:"dropdown-button"},"Bellman-Ford"))],t=[i.a.createElement(ra,{to:Dt.Kruskal},i.a.createElement("button",{className:"dropdown-button"},"Kruskal")),i.a.createElement(ra,{to:Dt.Prim},i.a.createElement("button",{className:"dropdown-button"},"Prim"))],a=[i.a.createElement(ra,{to:Dt.BubbleSort},i.a.createElement("button",{className:"dropdown-button"},"Bubble Sort")),i.a.createElement(ra,{to:Dt.MergeSort},i.a.createElement("button",{className:"dropdown-button"},"Merge Sort")),i.a.createElement(ra,{to:Dt.BinarySearch},i.a.createElement("button",{className:"dropdown-button"},"Busqueda Binaria"))],n=[i.a.createElement(ra,{to:Dt.SingleLinkedList},i.a.createElement("button",{className:"dropdown-button"},"Lista enlazada")),i.a.createElement(ra,{to:Dt.Queue},i.a.createElement("button",{className:"dropdown-button"},"Cola")),i.a.createElement(ra,{to:Dt.Stack},i.a.createElement("button",{className:"dropdown-button"},"Pila")),i.a.createElement(ra,{to:Dt.DoubleLinkedList},i.a.createElement("button",{className:"dropdown-button"},"Lista doble")),i.a.createElement(ra,{to:Dt.MinHeap},i.a.createElement("button",{className:"dropdown-button"},"Min Heap")),i.a.createElement(ra,{to:Dt.AVL},i.a.createElement("button",{className:"dropdown-button"},"Arbol AVL"))];return i.a.createElement("div",{className:"top-bar"},i.a.createElement(y.a,null,i.a.createElement(m.a,{md:2},i.a.createElement("div",{className:"dropdown"},i.a.createElement("button",{className:"dropdown-button"},"Algoritmos"),i.a.createElement(sa,null,i.a.createElement("div",{className:"dropdown-menu"},i.a.createElement("div",{className:"dropright"},i.a.createElement("button",{className:"dropdown-button"},"Algoritmos de Busqueda"),i.a.createElement("div",{className:"right-menu"},e)),i.a.createElement("div",{className:"dropright"},i.a.createElement("button",{className:"dropdown-button"},"Arbol Recubridor Minimo"),i.a.createElement("div",{className:"right-menu"},t)),i.a.createElement("div",{className:"dropright"},i.a.createElement("button",{className:"dropdown-button"},"Arreglos"),i.a.createElement("div",{className:"right-menu"},a)),i.a.createElement("div",{className:"dropright"},i.a.createElement("button",{className:"dropdown-button"},"Estructuras de Datos"),i.a.createElement("div",{className:"right-menu"},n)))))),i.a.createElement(m.a,{md:1},i.a.createElement(ea,{callback:this.props.photo})),i.a.createElement(m.a,{md:1},i.a.createElement(na,{callback:this.props.gif}))))}}]),t}(i.a.Component),la=ia(function(e){return Object(f.a)({},e)})(da),ua=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return i.a.createElement("body",null,i.a.createElement("div",null,i.a.createElement(E.a,null,i.a.createElement(h.a,null),i.a.createElement(S,null),i.a.createElement(la,null),i.a.createElement(y.a,null,i.a.createElement(m.a,null,i.a.createElement(Bt,{algorithm:this.props.algorithm}))),i.a.createElement(Qt,null))))}}]),t}(i.a.Component);a(121),a(122),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ca=a(36),pa=a(11),ha=[{text:"DFS_visitar(nodo u):",ind:0},{text:"color[u]=Gris",ind:1},{text:"Para cada v adyacente a u:",ind:1},{text:"Si color[v] es blanco:",ind:2},{text:"DFS_visitar(v)",ind:3},{text:"color[u]=Negro",ind:1},{text:"\u2063",ind:0},{text:"DFS(Grafo G(V,E), Nodo inicio):",ind:0},{text:"Para cada u \u2208 V",ind:1},{text:"color[u]=blanco:",ind:2},{text:"DFS_visitar(u)",ind:1}],Ea=[{text:"Dijkstra(Grafo G(V,E), nodo inicio):",ind:0},{text:"Para cada u \u2208 V:",ind:1},{text:"distancia[u]=\u221e",ind:2},{text:"encolar(cola, <inicio,0>)",ind:1},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer_minimo(cola)",ind:2},{text:"Para cada v adyacente a u:",ind:2},{text:"Si distancia[u]+peso(u,v)<distancia[v]:",ind:3},{text:"distancia[v]=distancia[u]+peso(u,v)",ind:4},{text:"actualizar(cola, <v,distancia[v]>)",ind:4}],ya=[{text:"Kruskal(Grafo G(V,E)):",ind:0},{text:"F=Vacio",ind:1},{text:"ordenar_por_peso(E)",ind:1},{text:"Para cada arista (u, v) \u2208 E:",ind:1},{text:"Si no_camino(u,v):",ind:2},{text:"A\xf1adir (u, v) a F",ind:3},{text:"Retornar F",ind:1}],ma=[{text:"BellmanFord(Grafo G(V,E), nodo inicio):",ind:0},{text:"Para cada u \u2208 V:",ind:1},{text:"distancia[u]=\u221e",ind:2},{text:"distancia[inicio]=0",ind:1},{text:"Para i=0 hasta |G|-1:",ind:1},{text:"Para cada arista (u, v) con peso w \u2208 E:",ind:2},{text:"Si distancia[u]+w<distancia[v]",ind:3},{text:"distancia[v]=distancia[u]+w",ind:4},{text:"\u2063",ind:0},{text:"Para cada arista (u, v) con peso w \u2208 E:",ind:1},{text:"Si distancia[u]+w<distancia[v]",ind:2},{text:"Alertar existencia de ciclo negativo",ind:3}],fa=[{text:"OrdenamientoBurbuja(Arreglo A):",ind:0},{text:"Repetir:",ind:1},{text:"Ordenado=Verdad",ind:2},{text:"Para i=1 hasta longitud(A)-1:",ind:2},{text:"Si A[i-1] > A[i]:",ind:3},{text:"Intercambiar(A[i-1], A[i])",ind:4},{text:"Ordenado=Falso",ind:4},{text:"Hasta Ordenado",ind:1}],va=[{text:"mergeSort(Arreglo A[n]):",ind:0},{text:"Si n==1:",ind:1},{text:"Retornar A",ind:2},{text:"Arreglo L=mergeSort(A[0..n/2))",ind:1},{text:"Arreglo R=mergeSort(A[n/2..n))",ind:1},{text:"retornar merge(L,R)",ind:1},{text:"\u2063",ind:0},{text:"merge(Arreglo L[n], Arreglo R[m]):",ind:0},{text:"Arreglo M[n+m]",ind:1},{text:"p=0, i=0, j=0",ind:1},{text:"Mientras i<n o j<m :",ind:1},{text:"Si j==m o (i<n y L[i]\u2264R[j]):",ind:2},{text:"M[p]=L[i], p=p+1, i=i+1",ind:3},{text:"Sino:",ind:2},{text:"M[p]=R[j], p=p+1, j=j+1",ind:3},{text:"Retornar M",ind:1}],ga=[{text:"Prim(Grafo G(V,E)):",ind:0},{text:"F=Vacio",ind:1},{text:"Para cada u \u2208 V",ind:1},{text:"distancia[u]=\u221e",ind:2},{text:"padre[u]=u",ind:2},{text:"encolar(cola,<u,\u221e>)",ind:2},{text:"Mientras no vacio(cola):",ind:1},{text:"u=extraer_minimo(cola)",ind:2},{text:"A\xf1adir u a F",ind:2},{text:"Si padre[u]!=u:",ind:2},{text:"A\xf1adir (padre[u], u) a F",ind:3},{text:"Para cada v adyacente a u:",ind:2},{text:"Si v \u2209 F y peso(u,v)<distancia[v]:",ind:3},{text:"Actualizar(cola,<v,peso(u,v)>)",ind:4},{text:"distancia[v]=peso(u,v)",ind:4},{text:"retornar F",ind:1}],Na=[{text:"BusquedaBinaria(Arreglo A[0..n), entero v):",ind:0},{text:"inf=0, sup=n-1",ind:1},{text:"Mientras inf \u2264 sup:",ind:1},{text:"medio=(inf+sup)/2",ind:2},{text:"Si v == A[medio]:",ind:2},{text:"Retornar Verdadero",ind:3},{text:"Si v < A[medio]:",ind:2},{text:"sup=medio-1",ind:3},{text:"Sino",ind:2},{text:"inf=medio+1",ind:3},{text:"Retornar falso",ind:1}],_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=t.payload?{options:t.payload.options,photo:t.payload.photo,gif:t.payload.gif,undo:t.payload.undo,redo:t.payload.redo,rewind:t.payload.rewind,forward:t.payload.forward,pause:t.payload.pause,repeat:t.payload.repeat,remove:t.payload.remove||null,clear:t.payload.clear||null,selection:null}:{};switch(t.type){case A.SELECT_BFS:return Object(f.a)({},e,a,{algorithm:"BFS",selection:null,pseudo:jt,run:t.payload.run});case A.SELECT_DFS:return Object(f.a)({},e,a,{algorithm:"DFS",pseudo:ha,run:t.payload.run});case A.SELECT_DIJKSTRA:return Object(f.a)({},e,a,{algorithm:"Dijkstra",pseudo:Ea,run:t.payload.run});case A.SELECT_BELLMAN_FORD:return Object(f.a)({},e,a,{algorithm:"BellmanFord",pseudo:ma,run:t.payload.run});case A.SELECT_KRUSKAL:return Object(f.a)({},e,a,{algorithm:"Kruskal",pseudo:ya,run:t.payload.run});case A.SELECT_PRIM:return Object(f.a)({},e,a,{algorithm:"Prim",pseudo:ga,run:t.payload.run});case A.SELECT_HEAP:return Object(f.a)({},e,a,{algorithm:"Heap",pseudo:ee});case A.SELECT_AVL:return Object(f.a)({},e,a,{algorithm:"AVL",pseudo:Ae});case A.SELECT_BUBBLESORT:return Object(f.a)({},e,a,{algorithm:"BubbleSort",pseudo:fa});case A.SELECT_MERGESORT:return Object(f.a)({},e,a,{algorithm:"MergeSort",pseudo:va});case A.SELECT_BINARY_SEARCH:return Object(f.a)({},e,a,{algorithm:"BinarySearch",pseudo:Na});case A.SELECT_LINKED_LIST:var n=Object(f.a)({},e,a);switch(t.payload.type){case A.SELECT_SINGLE_LINKED_LIST:return Object(f.a)({},n,{algorithm:"SingleLinkedList",pseudo:qe.singlySet.main});case A.SELECT_DOUBLE_LINKED_LIST:return Object(f.a)({},n,{algorithm:"DoubleLinkedList",pseudo:qe.doublySet.main});case A.SELECT_QUEUE:return Object(f.a)({},n,{algorithm:"Queue",pseudo:qe.queueSet.main});case A.SELECT_STACK:return Object(f.a)({},n,{algorithm:"Stack",pseudo:qe.stackSet.main})}default:return e}},Sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.ANIMATION_START:return Object(f.a)({},e,{selection:null,animation:!0});case A.ANIMATION_PAUSE:return Object(f.a)({},e,{paused:!0});case A.ANIMATION_CONTINUE:return Object(f.a)({},e,{paused:!1});case A.ANIMATION_END:return Object(f.a)({},e,{animation:!1,paused:!1,lines:null});case A.DEC_SPEED:return Object(f.a)({},e,{speed:Math.min(e.speed+.1,2)});case A.INC_SPEED:return Object(f.a)({},e,{speed:Math.max(e.speed-.1,0)});case A.CHANGE_SPEED:return Object(f.a)({},e,{speed:t.payload.speed});case A.CHANGE_PSEUDO:return Object(f.a)({},e,{pseudo:t.payload.pseudo});case A.SHOW_PSEUDO:return Object(f.a)({},e,{showPseudo:!0});case A.TOGGLE_PSEUDO:return Object(f.a)({},e,{showPseudo:!e.showPseudo});case A.CHANGE_LINE:return Object(f.a)({},e,{lines:t.payload.lines});case A.CHANGE_OPTIONS:return Object(f.a)({},e,{options:t.payload.options});default:return e}},Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.CLEAR_GRAPH:return Object(f.a)({},e,{selection:null,animation:!1});case A.LOAD_GRAPH:return Object(f.a)({},e,{loadingGraph:!0,animation:!1,data:t.payload.data,selection:null});case A.FINISHED_LOAD:return Object(f.a)({},e,{loadingGraph:!1,data:null});case A.INC_GIF_LENGTH:return Object(f.a)({},e,{gifLength:e.gifLength+1});case A.RESET_GIF_LENGTH:return Object(f.a)({},e,{gifLength:0});default:return e}},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.NO_SELECTION:return Object(f.a)({},e,{selection:null});case A.SELECTION:return Object(f.a)({},e,{selection:t.payload.selection});default:return e}},Aa=function(e,t,a){p.store.addNotification({title:e,message:t,type:a,insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3,onscreen:!0,showIcon:!0}})},ba=function(e){switch(e.type){case A.NO_NODE_SELECTED_ERROR:Aa("Error","Seleccione un nodo para ejecutar el algoritmo","danger");break;case A.NO_EDGE_SELECTED_ERROR:Aa("Error","Seleccione una arista para cambiar su peso","danger");break;case A.NO_ELEMENT_SELECTED_ERROR:Aa("Error","Debe seleccionar un elemento para eliminarlo","danger");break;case A.INVALID_INTEGER_ERROR:Aa("Error","Debe ingresar un numero entero entre -999 y 999","danger");break;case A.INVALID_ARRAY_ERROR:Aa("Arreglo invalido","Verifique que el arreglo cumpla con los requerimientos","danger");break;case A.INVALID_GRAPH_ERROR:Aa("Error en el archivo","El archivo no representa un grafo valido","danger");break;case A.INVALID_HEAP_ERROR:Aa("Error","El archivo proporcionado no representa un Heap valido. Intente con otro archivo","danger");break;case A.INVALID_AVL_ERROR:Aa("Error","El archivo proporcionado no representa un AVL valido. Intente con otro archivo","danger");break;case A.ANIMATION_RUNNING_ERROR:Aa("Error","No se pueden hacer modificaciones mientras se ejecuta el algoritmo","warning");break;case A.EMPTY_LIST_WARNING:Aa("La lista se encuentra vacia","No se pudo realizar la accion","warning");break;case A.EMPTY_HEAP_WARNING:Aa("Heap vacio","No se puede extraer el minimo elemento de un heap vacio","warning");break;case A.DIJKSTRA_NEGATIVE_WEIGHT_WARNING:Aa("Cuidado con las aristas con peso negativo","El algoritmo de Dijkstra puede no obtener el camino minimo si hay aristas negativas","warning");break;case A.NEGATIVE_CYCLE_FOUND:Aa("El algoritmo ha encontrado un ciclo negativo","Los nodos pertenecientes al ciclo estan marcados en rojo","warning");break;case A.AVL_NOT_FOUND_INFO:Aa("El elemento no fue encontrado en el arbol AVL","Debe volver a la edicion para modificar el arreglo","info");break;case A.AVL_ELEMENT_ALREADY_INFO:Aa("Elemento en el arbol","El elemento ya se encuentra en el arbol AVL","info");break;case A.STARTING_BFS_INFO:Aa("","Realizando BFS desde el nodo seleccionado","info");break;case A.STARTING_DFS_INFO:Aa("","Realizando DFS desde el nodo seleccionado","info");break;case A.STARTING_DIJKSTRA_INFO:Aa("","Calculando caminos de peso minimo desde el nodo seleccionado mediante Dijkstra","info");break;case A.STARTING_BELLMAN_FORD_INFO:Aa("","Calculando caminos de peso minimo desde el nodo seleccionado mediante Bellman-Ford","info");break;case A.STARTING_KRUSKAL_INFO:Aa("","Obteniendo arbol recubridor minimo mediante el algoritmo de Kruskal","info");break;case A.STARTING_PRIM_INFO:Aa("","Obteniendo arbol recubridor minimo mediante el algoritmo de Prim","info");break;case A.STARTING_BUBBLESORT_INFO:Aa("","Ordenando el arreglo mediante ordenamiento burbuja","info");break;case A.STARTING_MERGESORT_INFO:Aa("","Ordenando el arreglo mediante ordenamiento por mezcla","info");break;case A.STARTING_BINARYSEARCH_INFO:Aa("","Realizando busqueda binaria sobre el arreglo","info");break;case A.STARTING_GIF_RECORDING_INFO:Aa("Creacion de GIF iniciada","La grabacion tendra una duracion maxima de 30 segundos","info");break;case A.FINISHED_GIF_RECORDING_INFO:Aa("Grabacion de GIF terminada","Procesando GIF para descargar","info");break;case A.SORTING_BINARY_SEARCH_INFO:Aa("Solo arreglos ordenados","Los arreglos se ordenaran para realizar la busqueda binaria","info");break;case A.BINARY_SEARCH_NOT_FOUND_INFO:Aa("El elemento no se encuentra en el arreglo","Debe volver a la edicion para modificar el arreglo","info");break;case A.NO_FILE_SELECTED_INFO:Aa("Ningun archivo seleccionado","Debe seleccionar un archivo para subirlo","info");break;case A.FINISHED_GIF_SUCCESS:Aa("Creacion de GIF terminada","El archivo GIF sera descargado a su dispositivo","success");break;case A.LOAD_GRAPH_SUCCESS:Aa("Grafo cargado con exito"," ","success");break;case A.PHOTO_SUCCESS:Aa("Captura realizada","La captura sera descargada a su dispositivo","success");break;case A.FINISHED_ALGORITHM_SUCCESS:Aa("Ejecucion terminada exitosamente","Debe volver a la edicion para modificar el grafo","success");break;case A.AVL_FOUND_SUCCESS:Aa("Busqueda terminada","El elemento fue encontrado en el arbol AVL","success");break;case A.ARRAY_SORTED_SUCCESS:Aa("El arreglo fue ordenado exitosamente","Debe volver a la edicion para modificar el arreglo","success");break;case A.BINARY_SEARCH_FOUND_SUCCESS:Aa("El elemento fue encontrado en el arreglo","Debe volver a la edicion para modificar el arreglo","success")}},Ra={algorithm:"none",selection:null,animation:!1,speed:.75,loadingGraph:!1,data:null,pseudo:null,lines:null,run:function(){},options:[],photo:function(){},gif:function(){},gifLength:0,showPseudo:!0,paused:!1,remove:null,clear:null,undo:function(){},redo:function(){},rewind:function(){},forward:function(){},repeat:function(){},pause:function(){}},Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0,a=e;return a=_a(a,t),a=Sa(a,t),a=Ia(a,t),a=Oa(a,t),ba(t),a},La=Object(ca.b)(Ta);r.a.render(i.a.createElement(pa.Provider,{store:La},i.a.createElement(ua,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},13:function(e,t,a){"use strict";a.r(t),a.d(t,"NODE",function(){return n}),a.d(t,"NODE_GRAY",function(){return i}),a.d(t,"NODE_RED",function(){return o}),a.d(t,"NODE_BLACK",function(){return r}),a.d(t,"NODE_CORRECT",function(){return s}),a.d(t,"NODE_WRONG",function(){return d}),a.d(t,"NODE_SELECTED",function(){return l}),a.d(t,"EDGE",function(){return u}),a.d(t,"EDGE_VISITED",function(){return c}),a.d(t,"EDGE_TRAVERSE",function(){return p}),a.d(t,"EDGE_NO_MST",function(){return h}),a.d(t,"EDGE_MST",function(){return E}),a.d(t,"EDGE_DIRECTED",function(){return y}),a.d(t,"EDGE_DOUBLE",function(){return m}),a.d(t,"EDGE_WEIGHTED",function(){return f}),a.d(t,"EDGE_SELECTED",function(){return v}),a.d(t,"LINE_STD",function(){return g}),a.d(t,"LINE_FOCUS",function(){return N}),a.d(t,"NODE_POPPER",function(){return _});var n={"background-color":"white",color:"black","border-style":"solid",width:"35",height:"35","border-width":"1","border-opacity":"1","border-color":"black",label:"data(value)","text-valign":"center","text-halign":"center","z-index":3},i={"background-color":"gray",color:"black"},o={"background-color":"red",color:"black"},r={"background-color":"black",color:"white"},s={"background-color":"Chartreuse",color:"black"},d={"background-color":"#FF9494",color:"black"},l={"background-color":"#2B3B6B",color:"white"},u={width:2,"line-color":"#ccc","curve-style":"bezier","line-style":"solid"},c={"line-color":"#2B3B6B","target-arrow-color":"#2B3B6B"},p={"line-color":"green","target-arrow-color":"green"},h={"line-style":"dashed","line-color":"#eee"},E={"line-style":"solid","line-color":"black"},y={"target-arrow-color":"#ccc","line-color":"#ccc","target-arrow-shape":"triangle"},m={"source-arrow-color":"#ccc","source-arrow-shape":"triangle"},f={label:"data(weight)","text-margin-y":"-10.0","text-rotation":"autorotate"},v={"line-color":"black","target-arrow-color":"black"},g={color:"#CECFE6"},N={"background-color":"#4C5090",color:"#CECFE6"},_={"z-index":0,"border-width":0,"font-size":15,width:10,height:10,visibility:"visible"}},65:function(e,t,a){e.exports=a(123)},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.b2093cb2.chunk.js.map